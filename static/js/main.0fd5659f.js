/*! For license information please see main.0fd5659f.js.LICENSE.txt */
!function(){var e={53:function(e,t,n){"use strict";var r=n(351),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),v=s(n),y=0;y<o.length;++y){var m=o[y];if(!a[m]&&(!r||!r[m])&&(!v||!v[m])&&(!u||!u[m])){var g=h(n,m);try{c(t,m,g)}catch(k){}}}}return t}},505:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case y:case v:case s:return e;default:return t}}case i:return t}}}function x(e){return w(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=y,t.Memo=v,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return x(e)||w(e)===l},t.isConcurrentMode=x,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===h},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===y},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===u},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===v||e.$$typeof===s||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===b||e.$$typeof===m)},t.typeOf=w},351:function(e,t,n){"use strict";e.exports=n(505)},137:function(e,t,n){e=n.nmd(e);var r="__lodash_hash_undefined__",i=1,a=2,o=9007199254740991,u="[object Arguments]",s="[object Array]",c="[object AsyncFunction]",l="[object Boolean]",f="[object Date]",h="[object Error]",d="[object Function]",p="[object GeneratorFunction]",v="[object Map]",y="[object Number]",m="[object Null]",g="[object Object]",k="[object Promise]",b="[object Proxy]",w="[object RegExp]",x="[object Set]",_="[object String]",S="[object Symbol]",I="[object Undefined]",E="[object WeakMap]",T="[object ArrayBuffer]",C="[object DataView]",A=/^\[object .+?Constructor\]$/,N=/^(?:0|[1-9]\d*)$/,D={};D["[object Float32Array]"]=D["[object Float64Array]"]=D["[object Int8Array]"]=D["[object Int16Array]"]=D["[object Int32Array]"]=D["[object Uint8Array]"]=D["[object Uint8ClampedArray]"]=D["[object Uint16Array]"]=D["[object Uint32Array]"]=!0,D[u]=D[s]=D[T]=D[l]=D[C]=D[f]=D[h]=D[d]=D[v]=D[y]=D[g]=D[w]=D[x]=D[_]=D[E]=!1;var O="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,R="object"==typeof self&&self&&self.Object===Object&&self,P=O||R||Function("return this")(),L=t&&!t.nodeType&&t,M=L&&e&&!e.nodeType&&e,F=M&&M.exports===L,j=F&&O.process,U=function(){try{return j&&j.binding&&j.binding("util")}catch(e){}}(),V=U&&U.isTypedArray;function q(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function z(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function B(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var K,G,W=Array.prototype,Q=Function.prototype,H=Object.prototype,$=P["__core-js_shared__"],X=Q.toString,Y=H.hasOwnProperty,J=function(){var e=/[^.]+$/.exec($&&$.keys&&$.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Z=H.toString,ee=RegExp("^"+X.call(Y).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),te=F?P.Buffer:void 0,ne=P.Symbol,re=P.Uint8Array,ie=H.propertyIsEnumerable,ae=W.splice,oe=ne?ne.toStringTag:void 0,ue=Object.getOwnPropertySymbols,se=te?te.isBuffer:void 0,ce=(K=Object.keys,G=Object,function(e){return K(G(e))}),le=je(P,"DataView"),fe=je(P,"Map"),he=je(P,"Promise"),de=je(P,"Set"),pe=je(P,"WeakMap"),ve=je(Object,"create"),ye=ze(le),me=ze(fe),ge=ze(he),ke=ze(de),be=ze(pe),we=ne?ne.prototype:void 0,xe=we?we.valueOf:void 0;function _e(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Se(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ie(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ee(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Ie;++t<n;)this.add(e[t])}function Te(e){var t=this.__data__=new Se(e);this.size=t.size}function Ce(e,t){var n=Ge(e),r=!n&&Ke(e),i=!n&&!r&&We(e),a=!n&&!r&&!i&&Ye(e),o=n||r||i||a,u=o?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],s=u.length;for(var c in e)!t&&!Y.call(e,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||qe(c,s))||u.push(c);return u}function Ae(e,t){for(var n=e.length;n--;)if(Be(e[n][0],t))return n;return-1}function Ne(e){return null==e?void 0===e?I:m:oe&&oe in Object(e)?function(e){var t=Y.call(e,oe),n=e[oe];try{e[oe]=void 0;var r=!0}catch(a){}var i=Z.call(e);r&&(t?e[oe]=n:delete e[oe]);return i}(e):function(e){return Z.call(e)}(e)}function De(e){return Xe(e)&&Ne(e)==u}function Oe(e,t,n,r,o){return e===t||(null==e||null==t||!Xe(e)&&!Xe(t)?e!==e&&t!==t:function(e,t,n,r,o,c){var d=Ge(e),p=Ge(t),m=d?s:Ve(e),k=p?s:Ve(t),b=(m=m==u?g:m)==g,I=(k=k==u?g:k)==g,E=m==k;if(E&&We(e)){if(!We(t))return!1;d=!0,b=!1}if(E&&!b)return c||(c=new Te),d||Ye(e)?Le(e,t,n,r,o,c):function(e,t,n,r,o,u,s){switch(n){case C:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case T:return!(e.byteLength!=t.byteLength||!u(new re(e),new re(t)));case l:case f:case y:return Be(+e,+t);case h:return e.name==t.name&&e.message==t.message;case w:case _:return e==t+"";case v:var c=z;case x:var d=r&i;if(c||(c=B),e.size!=t.size&&!d)return!1;var p=s.get(e);if(p)return p==t;r|=a,s.set(e,t);var m=Le(c(e),c(t),r,o,u,s);return s.delete(e),m;case S:if(xe)return xe.call(e)==xe.call(t)}return!1}(e,t,m,n,r,o,c);if(!(n&i)){var A=b&&Y.call(e,"__wrapped__"),N=I&&Y.call(t,"__wrapped__");if(A||N){var D=A?e.value():e,O=N?t.value():t;return c||(c=new Te),o(D,O,n,r,c)}}if(!E)return!1;return c||(c=new Te),function(e,t,n,r,a,o){var u=n&i,s=Me(e),c=s.length,l=Me(t),f=l.length;if(c!=f&&!u)return!1;var h=c;for(;h--;){var d=s[h];if(!(u?d in t:Y.call(t,d)))return!1}var p=o.get(e);if(p&&o.get(t))return p==t;var v=!0;o.set(e,t),o.set(t,e);var y=u;for(;++h<c;){var m=e[d=s[h]],g=t[d];if(r)var k=u?r(g,m,d,t,e,o):r(m,g,d,e,t,o);if(!(void 0===k?m===g||a(m,g,n,r,o):k)){v=!1;break}y||(y="constructor"==d)}if(v&&!y){var b=e.constructor,w=t.constructor;b==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w||(v=!1)}return o.delete(e),o.delete(t),v}(e,t,n,r,o,c)}(e,t,n,r,Oe,o))}function Re(e){return!(!$e(e)||function(e){return!!J&&J in e}(e))&&(Qe(e)?ee:A).test(ze(e))}function Pe(e){if(!function(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||H;return e===n}(e))return ce(e);var t=[];for(var n in Object(e))Y.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Le(e,t,n,r,o,u){var s=n&i,c=e.length,l=t.length;if(c!=l&&!(s&&l>c))return!1;var f=u.get(e);if(f&&u.get(t))return f==t;var h=-1,d=!0,p=n&a?new Ee:void 0;for(u.set(e,t),u.set(t,e);++h<c;){var v=e[h],y=t[h];if(r)var m=s?r(y,v,h,t,e,u):r(v,y,h,e,t,u);if(void 0!==m){if(m)continue;d=!1;break}if(p){if(!q(t,(function(e,t){if(i=t,!p.has(i)&&(v===e||o(v,e,n,r,u)))return p.push(t);var i}))){d=!1;break}}else if(v!==y&&!o(v,y,n,r,u)){d=!1;break}}return u.delete(e),u.delete(t),d}function Me(e){return function(e,t,n){var r=t(e);return Ge(e)?r:function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}(r,n(e))}(e,Je,Ue)}function Fe(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function je(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Re(n)?n:void 0}_e.prototype.clear=function(){this.__data__=ve?ve(null):{},this.size=0},_e.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},_e.prototype.get=function(e){var t=this.__data__;if(ve){var n=t[e];return n===r?void 0:n}return Y.call(t,e)?t[e]:void 0},_e.prototype.has=function(e){var t=this.__data__;return ve?void 0!==t[e]:Y.call(t,e)},_e.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ve&&void 0===t?r:t,this},Se.prototype.clear=function(){this.__data__=[],this.size=0},Se.prototype.delete=function(e){var t=this.__data__,n=Ae(t,e);return!(n<0)&&(n==t.length-1?t.pop():ae.call(t,n,1),--this.size,!0)},Se.prototype.get=function(e){var t=this.__data__,n=Ae(t,e);return n<0?void 0:t[n][1]},Se.prototype.has=function(e){return Ae(this.__data__,e)>-1},Se.prototype.set=function(e,t){var n=this.__data__,r=Ae(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Ie.prototype.clear=function(){this.size=0,this.__data__={hash:new _e,map:new(fe||Se),string:new _e}},Ie.prototype.delete=function(e){var t=Fe(this,e).delete(e);return this.size-=t?1:0,t},Ie.prototype.get=function(e){return Fe(this,e).get(e)},Ie.prototype.has=function(e){return Fe(this,e).has(e)},Ie.prototype.set=function(e,t){var n=Fe(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Ee.prototype.add=Ee.prototype.push=function(e){return this.__data__.set(e,r),this},Ee.prototype.has=function(e){return this.__data__.has(e)},Te.prototype.clear=function(){this.__data__=new Se,this.size=0},Te.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Te.prototype.get=function(e){return this.__data__.get(e)},Te.prototype.has=function(e){return this.__data__.has(e)},Te.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Se){var r=n.__data__;if(!fe||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Ie(r)}return n.set(e,t),this.size=n.size,this};var Ue=ue?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}(ue(e),(function(t){return ie.call(e,t)})))}:function(){return[]},Ve=Ne;function qe(e,t){return!!(t=null==t?o:t)&&("number"==typeof e||N.test(e))&&e>-1&&e%1==0&&e<t}function ze(e){if(null!=e){try{return X.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Be(e,t){return e===t||e!==e&&t!==t}(le&&Ve(new le(new ArrayBuffer(1)))!=C||fe&&Ve(new fe)!=v||he&&Ve(he.resolve())!=k||de&&Ve(new de)!=x||pe&&Ve(new pe)!=E)&&(Ve=function(e){var t=Ne(e),n=t==g?e.constructor:void 0,r=n?ze(n):"";if(r)switch(r){case ye:return C;case me:return v;case ge:return k;case ke:return x;case be:return E}return t});var Ke=De(function(){return arguments}())?De:function(e){return Xe(e)&&Y.call(e,"callee")&&!ie.call(e,"callee")},Ge=Array.isArray;var We=se||function(){return!1};function Qe(e){if(!$e(e))return!1;var t=Ne(e);return t==d||t==p||t==c||t==b}function He(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}function $e(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Xe(e){return null!=e&&"object"==typeof e}var Ye=V?function(e){return function(t){return e(t)}}(V):function(e){return Xe(e)&&He(e.length)&&!!D[Ne(e)]};function Je(e){return null!=(t=e)&&He(t.length)&&!Qe(t)?Ce(e):Pe(e);var t}e.exports=function(e,t){return Oe(e,t)}},772:function(e,t,n){"use strict";var r=n(867),i=n(882);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var M,F=Object.assign;function j(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function q(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case x:return"Portal";case I:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function H(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){Y(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&H(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ae(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,_e=null,Se=null;function Ie(e){if(e=ki(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),xe(e.stateNode,e.type,t))}}function Ee(e){_e?Se?Se.push(e):Se=[e]:_e=e}function Te(){if(_e){var e=_e,t=Se;if(Se=_e=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function Ce(e,t){return e(t)}function Ae(){}var Ne=!1;function De(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ce(e,t,n)}finally{Ne=!1,(null!==_e||null!==Se)&&(Ae(),Te())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Re=!1;if(l)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(le){Re=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,je=!1,Ue=null,Ve={onError:function(e){Me=!0,Fe=e}};function qe(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(Ve,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(ze(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Qe=i.unstable_scheduleCallback,He=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Ye=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,_t,St,It,Et=!1,Tt=[],Ct=null,At=null,Nt=null,Dt=new Map,Ot=new Map,Rt=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void It(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){jt(e)&&n.delete(t)}function Vt(){Et=!1,null!==Ct&&jt(Ct)&&(Ct=null),null!==At&&jt(At)&&(At=null),null!==Nt&&jt(Nt)&&(Nt=null),Dt.forEach(Ut),Ot.forEach(Ut)}function qt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function zt(e){function t(t){return qt(t,e)}if(0<Tt.length){qt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&qt(Ct,e),null!==At&&qt(At,e),null!==Nt&&qt(Nt,e),Dt.forEach(t),Ot.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Rt.shift()}var Bt=b.ReactCurrentBatchConfig,Kt=!0;function Gt(e,t,n,r){var i=kt,a=Bt.transition;Bt.transition=null;try{kt=1,Qt(e,t,n,r)}finally{kt=i,Bt.transition=a}}function Wt(e,t,n,r){var i=kt,a=Bt.transition;Bt.transition=null;try{kt=4,Qt(e,t,n,r)}finally{kt=i,Bt.transition=a}}function Qt(e,t,n,r){if(Kt){var i=$t(e,t,n,r);if(null===i)Kr(e,t,r,Ht,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return At=Mt(At,e,t,n,r,i),!0;case"mouseover":return Nt=Mt(Nt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Dt.set(a,Mt(Dt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Ot.set(a,Mt(Ot.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=$t(e,t,n,r))&&Kr(e,t,r,Ht,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Ht=null;function $t(e,t,n,r){if(Ht=null,null!==(e=gi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ht=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Yt?Yt.value:Yt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),yn=an(F({},fn,{relatedTarget:0})),mn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function In(){return Sn}var En=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(En),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In})),Nn=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=an(Dn),Rn=[9,13,27,32],Pn=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!Pn||Ln&&8<Ln&&11>=Ln),jn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function Gn(e,t,n,r){Ee(r),0<(t=Wr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Qn=null;function Hn(e){jr(e,0)}function $n(e){if(Q(bi(e)))return e}function Xn(e,t){if("change"===e)return t}var Yn=!1;if(l){var Jn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Yn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Qn=Wn=null)}function nr(e){if("value"===e.propertyName&&$n(Qn)){var t=[];Gn(t,Qn,e,we(e)),De(Hn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Qn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Qn)}function ar(e,t){if("click"===e)return $n(t)}function or(e,t){if("input"===e||"change"===e)return $n(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=H();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=H((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==H(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Wr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},_r={},Sr={};function Ir(e){if(_r[e])return _r[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return _r[e]=n[t];return e}l&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Er=Ir("animationend"),Tr=Ir("animationiteration"),Cr=Ir("animationstart"),Ar=Ir("transitionend"),Nr=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Nr.set(e,t),s(t,[e])}for(var Rr=0;Rr<Dr.length;Rr++){var Pr=Dr[Rr];Or(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Or(Er,"onAnimationEnd"),Or(Tr,"onAnimationIteration"),Or(Cr,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(qe.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,je||(je=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(je)throw e=Ue,je=!1,Ue=null,e}function Ur(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(Br(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),Br(n,e,r,t)}var qr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[qr]){e[qr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[qr]||(t[qr]=!0,Vr("selectionchange",!1,t))}}function Br(e,t,n,r){switch(Xt(t)){case 1:var i=Gt;break;case 4:i=Wt;break;default:i=Qt}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}De((function(){var r=a,i=we(n),o=[];e:{var u=Nr.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=yn;break;case"focusout":c="blur",s=yn;break;case"beforeblur":case"afterblur":s=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=An;break;case Er:case Tr:case Cr:s=mn;break;case Ar:s=Nn;break;case"scroll":s=hn;break;case"wheel":s=On;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Oe(p,h))&&l.push(Gr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Qr(d))p++;for(d=0,v=h;v;v=Qr(v))d++;for(;0<p-d;)l=Qr(l),p--;for(;0<d-p;)h=Qr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Qr(l),h=Qr(h)}l=null}else l=null;null!==s&&Hr(o,u,s,l,!1),null!==c&&null!==f&&Hr(o,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Xn;else if(Kn(u))if(Yn)y=or;else{y=ir;var m=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=ar);switch(y&&(y=y(e,r))?Gn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ee(u,"number",u.value)),m=r?bi(r):window,e){case"focusin":(Kn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(Pn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else zn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==k?"onCompositionEnd"===k&&zn&&(g=en()):(Jt="value"in(Yt=i)?Yt.value:Yt.textContent,zn=!0)),0<(m=Wr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=qn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return qn(t);case"keypress":return 32!==t.which?null:(Un=!0,jn);case"textInput":return(e=t.data)===jn&&Un?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Pn&&Vn(e,t)?(e=en(),Zt=Jt=Yt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}jr(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Oe(e,n))&&r.unshift(Gr(e,a,i)),null!=(a=Oe(e,t))&&r.push(Gr(e,a,i))),e=e.return}return r}function Qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Hr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Oe(n,a))&&o.unshift(Gr(n,s,u)):i||null!=(s=Oe(n,a))&&o.push(Gr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var $r=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Xr,"")}function Jr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,yi="__reactListeners$"+fi,mi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var xi=[],_i=-1;function Si(e){return{current:e}}function Ii(e){0>_i||(e.current=xi[_i],xi[_i]=null,_i--)}function Ei(e,t){_i++,xi[_i]=e.current,e.current=t}var Ti={},Ci=Si(Ti),Ai=Si(!1),Ni=Ti;function Di(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){Ii(Ai),Ii(Ci)}function Pi(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Ei(Ci,t),Ei(Ai,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,B(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ni=Ci.current,Ei(Ci,e),Ei(Ai,Ai.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Ii(Ai),Ii(Ci),Ei(Ci,e)):Ii(Ai),Ei(Ai,n)}var ji=null,Ui=!1,Vi=!1;function qi(e){null===ji?ji=[e]:ji.push(e)}function zi(){if(!Vi&&null!==ji){Vi=!0;var e=0,t=kt;try{var n=ji;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ji=null,Ui=!1}catch(i){throw null!==ji&&(ji=ji.slice(e+1)),Qe(Ze,zi),i}finally{kt=t,Vi=!1}}return null}var Bi=[],Ki=0,Gi=null,Wi=0,Qi=[],Hi=0,$i=null,Xi=1,Yi="";function Ji(e,t){Bi[Ki++]=Wi,Bi[Ki++]=Gi,Gi=e,Wi=t}function Zi(e,t,n){Qi[Hi++]=Xi,Qi[Hi++]=Yi,Qi[Hi++]=$i,$i=e;var r=Xi;e=Yi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xi=1<<32-ot(t)+i|n<<i|r,Yi=a+e}else Xi=1<<a|n<<i|r,Yi=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===Gi;)Gi=Bi[--Ki],Bi[Ki]=null,Wi=Bi[--Ki],Bi[Ki]=null;for(;e===$i;)$i=Qi[--Hi],Qi[Hi]=null,Yi=Qi[--Hi],Qi[Hi]=null,Xi=Qi[--Hi],Qi[Hi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Oc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Xi,overflow:Yi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Oc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ya(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ma=Si(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function xa(e){var t=ma.current;Ii(ma),e._currentValue=t}function _a(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Sa(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bu=!0),e.firstContext=null)}function Ia(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ea=null;function Ta(e){null===Ea?Ea=[e]:Ea.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Aa(e,r)}function Aa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Na=!1;function Da(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ra(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Pa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&As)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Aa(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Aa(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Na=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Na=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Fs|=o,e.lanes=o,e.memoizedState=f}}function ja(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ua=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var qa={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Ra(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Pa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Ra(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Pa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Ra(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Pa(e,i,r))&&(rc(t,e,r,n),La(t,e,r))}};function za(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function Ba(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Ia(a):(i=Oi(t)?Ni:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Di(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=qa,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ka(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&qa.enqueueReplaceState(t,t.state,null)}function Ga(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ua,Da(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ia(a):(a=Oi(t)?Ni:Ci.current,i.context=Di(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&qa.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Wa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Qa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ha(e){return(0,e._init)(e._payload)}function $a(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===_?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===O&&Ha(a)===t.type)?((r=i(t,n.props)).ref=Wa(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Wa(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=jc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Wa(e,null,t),n.return=e,n;case x:return(t=Uc(t,e.mode,n)).return=e,t;case O:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Qa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null;case O:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Qa(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Qa(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===u.length)return n(i,f),ia&&Ji(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Ji(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),ia&&Ji(i,v),c}function y(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),ia&&Ji(i,y),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return ia&&Ji(i,y),l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Ji(i,y),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===_){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&Ha(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Wa(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===_?((a=Mc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Lc(o.type,o.key,o.props,null,r.mode,s)).ref=Wa(r,a,o),s.return=r,r=s)}return u(r);case x:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,s)).return=r,r=a}return u(r);case O:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return y(r,a,o,s);Qa(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=jc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Xa=$a(!0),Ya=$a(!1),Ja={},Za=Si(Ja),eo=Si(Ja),to=Si(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Ei(to,t),Ei(eo,e),Ei(Za,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ii(Za),Ei(Za,t)}function io(){Ii(Za),Ii(eo),Ii(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Ei(eo,e),Ei(Za,n))}function oo(e){eo.current===e&&(Ii(Za),Ii(eo))}var uo=Si(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,po=0,vo=null,yo=null,mo=null,go=!1,ko=!1,bo=0,wo=0;function xo(){throw Error(a(321))}function _o(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function So(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,mo=yo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==yo&&null!==yo.next,po=0,mo=yo=vo=null,go=!1,t)throw Error(a(300));return e}function Io(){var e=0!==bo;return bo=0,e}function Eo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?vo.memoizedState=mo=e:mo=mo.next=e,mo}function To(){if(null===yo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=yo.next;var t=null===mo?vo.memoizedState:mo.next;if(null!==t)mo=t,yo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(yo=e).memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},null===mo?vo.memoizedState=mo=e:mo=mo.next=e}return mo}function Co(e,t){return"function"===typeof t?t(e):t}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,Fs|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(bu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Fs|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(bu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Do(){}function Oo(e,t){var n=vo,r=To(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,bu=!0),r=r.queue,Ko(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==mo&&1&mo.memoizedState.tag){if(n.flags|=2048,Uo(9,Po.bind(null,n,r,i,t),void 0,null),null===Ns)throw Error(a(349));0!==(30&po)||Ro(n,t,i)}return i}function Ro(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Po(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Aa(e,1);null!==t&&rc(t,e,1,-1)}function jo(e){var t=Eo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return To().memoizedState}function qo(e,t,n,r){var i=Eo();vo.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==yo){var o=yo.memoizedState;if(a=o.destroy,null!==r&&_o(r,o.deps))return void(i.memoizedState=Uo(t,n,a,r))}vo.flags|=e,i.memoizedState=Uo(1|t,n,a,r)}function Bo(e,t){return qo(8390656,8,e,t)}function Ko(e,t){return zo(2048,8,e,t)}function Go(e,t){return zo(4,2,e,t)}function Wo(e,t){return zo(4,4,e,t)}function Qo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ho(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Qo.bind(null,t,e),n)}function $o(){}function Xo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Yo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Fs|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return To().memoizedState}function tu(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){rc(n,e,r,tc()),au(n,t,r)}}function nu(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ta(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(rc(n,e,r,i=tc()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Ia,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},uu={readContext:Ia,useCallback:function(e,t){return Eo().memoizedState=[e,void 0===t?null:t],e},useContext:Ia,useEffect:Bo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,qo(4194308,4,Qo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return qo(4194308,4,e,t)},useInsertionEffect:function(e,t){return qo(4,2,e,t)},useMemo:function(e,t){var n=Eo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Eo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Eo().memoizedState=e},useState:jo,useDebugValue:$o,useDeferredValue:function(e){return Eo().memoizedState=e},useTransition:function(){var e=jo(!1),t=e[0];return e=Zo.bind(null,e[1]),Eo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=Eo();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ns)throw Error(a(349));0!==(30&po)||Ro(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Bo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Po.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Eo(),t=Ns.identifierPrefix;if(ia){var n=Yi;t=":"+t+"R"+(n=(Xi&~(1<<32-ot(Xi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Ia,useCallback:Xo,useContext:Ia,useEffect:Ko,useImperativeHandle:Ho,useInsertionEffect:Go,useLayoutEffect:Wo,useMemo:Yo,useReducer:Ao,useRef:Vo,useState:function(){return Ao(Co)},useDebugValue:$o,useDeferredValue:function(e){return Jo(To(),yo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],To().memoizedState]},useMutableSource:Do,useSyncExternalStore:Oo,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Ia,useCallback:Xo,useContext:Ia,useEffect:Ko,useImperativeHandle:Ho,useInsertionEffect:Go,useLayoutEffect:Wo,useMemo:Yo,useReducer:No,useRef:Vo,useState:function(){return No(Co)},useDebugValue:$o,useDeferredValue:function(e){var t=To();return null===yo?t.memoizedState=e:Jo(t,yo.memoizedState,e)},useTransition:function(){return[No(Co)[0],To().memoizedState]},useMutableSource:Do,useSyncExternalStore:Oo,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=q(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Ra(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gs||(Gs=!0,Ws=r),hu(0,t)},n}function vu(e,t,n){(n=Ra(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Qs?Qs=new Set([this]):Qs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function yu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function mu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ra(-1,1)).tag=2,Pa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=b.ReactCurrentOwner,bu=!1;function wu(e,t,n,r){t.child=null===e?Ya(t,null,n,r):Xa(t,e.child,n,r)}function xu(e,t,n,r,i){n=n.render;var a=t.ref;return Sa(t,i),r=So(e,t,n,r,a,i),n=Io(),null===e||bu?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gu(e,t,i))}function _u(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Rc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Su(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Gu(e,t,i)}return t.flags|=1,(e=Pc(a,r)).ref=t.ref,e.return=t,t.child=e}function Su(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(bu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Gu(e,t,i);0!==(131072&e.flags)&&(bu=!0)}}return Tu(e,t,n,r,i)}function Iu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ei(Ps,Rs),Rs|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ei(Ps,Rs),Rs|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ei(Ps,Rs),Rs|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ei(Ps,Rs),Rs|=r;return wu(e,t,i,n),t.child}function Eu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,i){var a=Oi(n)?Ni:Ci.current;return a=Di(t,a),Sa(t,i),n=So(e,t,n,r,a,i),r=Io(),null===e||bu?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gu(e,t,i))}function Cu(e,t,n,r,i){if(Oi(n)){var a=!0;Mi(t)}else a=!1;if(Sa(t,i),null===t.stateNode)Ku(e,t),Ba(t,n,r),Ga(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ia(c):c=Di(t,c=Oi(n)?Ni:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ka(t,o,r,c),Na=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ai.current||Na?("function"===typeof l&&(Va(t,n,l,r),s=t.memoizedState),(u=Na||za(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Oa(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ya(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Ia(s):s=Di(t,s=Oi(n)?Ni:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ka(t,o,r,s),Na=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ai.current||Na?("function"===typeof d&&(Va(t,n,d,r),p=t.memoizedState),(c=Na||za(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Au(e,t,n,r,a,i)}function Au(e,t,n,r,i,a){Eu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Gu(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Xa(t,e.child,null,a),t.child=Xa(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Nu(e){var t=e.stateNode;t.pendingContext?Pi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Pi(0,t.context,!1),ro(e,t.containerInfo)}function Du(e,t,n,r,i){return da(),pa(i),t.flags|=256,wu(e,t,n,r),t.child}var Ou,Ru,Pu,Lu,Mu={dehydrated:null,treeContext:null,retryLane:0};function Fu(e){return{baseLanes:e,cachePool:null,transitions:null}}function ju(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ei(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Fc(s,i,0,null),e=Mc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Fu(n),t.memoizedState=Mu,e):Uu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Vu(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Xa(t,e.child,null,u),t.child.memoizedState=Fu(u),t.memoizedState=Mu,o);if(0===(1&t.mode))return Vu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Vu(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),bu||s){if(null!==(r=Ns)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Aa(e,i),rc(r,e,i,-1))}return yc(),Vu(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Qi[Hi++]=Xi,Qi[Hi++]=Yi,Qi[Hi++]=$i,Xi=e.id,Yi=e.overflow,$i=t),t=Uu(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Pc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Pc(r,u):(u=Mc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Fu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Mu,i}return e=(u=e.child).sibling,i=Pc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Uu(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vu(e,t,n,r){return null!==r&&pa(r),Xa(t,e.child,null,n),(e=Uu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function qu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_a(e.return,t,n)}function zu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Bu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&qu(e,n,t);else if(19===e.tag)qu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ei(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zu(t,!0,n,null,a);break;case"together":zu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ku(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fs|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Qu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Hu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qu(t),null;case 1:case 17:return Oi(t.type)&&Ri(),Qu(t),null;case 3:return r=t.stateNode,io(),Ii(Ai),Ii(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(uc(aa),aa=null))),Ru(e,t),Qu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Pu(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Qu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":X(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Ur("scroll",r)}switch(n){case"input":W(r),Z(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Ou(e,t,!1,!1),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":X(e,r),i=$(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Ur("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Qu(t),null;case 6:if(e&&null!=t.stateNode)Lu(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Qu(t),null;case 13:if(Ii(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Qu(t),o=!1}else null!==aa&&(uc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Ls&&(Ls=3):yc())),null!==t.updateQueue&&(t.flags|=4),Qu(t),null);case 4:return io(),Ru(e,t),null===e&&zr(t.stateNode.containerInfo),Qu(t),null;case 10:return xa(t.type._context),Qu(t),null;case 19:if(Ii(uo),null===(o=t.memoizedState))return Qu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Wu(o,!1);else{if(0!==Ls||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Wu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ei(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Ye()>Bs&&(t.flags|=128,r=!0,Wu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Wu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Qu(t),null}else 2*Ye()-o.renderingStartTime>Bs&&1073741824!==n&&(t.flags|=128,r=!0,Wu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ye(),t.sibling=null,n=uo.current,Ei(uo,r?1&n|2:1&n),t):(Qu(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rs)&&(Qu(t),6&t.subtreeFlags&&(t.flags|=8192)):Qu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function $u(e,t){switch(ta(t),t.tag){case 1:return Oi(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ii(Ai),Ii(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ii(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ii(uo),null;case 4:return io(),null;case 10:return xa(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ou=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ru=function(){},Pu=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=$(e,i),r=$(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Ur("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Lu=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xu=!1,Yu=!1,Ju="function"===typeof WeakSet?WeakSet:Set,Zu=null;function es(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ic(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){Ic(e,t,r)}}var ns=!1;function rs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ts(t,n,a)}i=i.next}while(i!==r)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function os(e){var t=e.alternate;null!==t&&(e.alternate=null,os(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function us(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||us(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}function ls(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ls(e,t,n),e=e.sibling;null!==e;)ls(e,t,n),e=e.sibling}var fs=null,hs=!1;function ds(e,t,n){for(n=n.child;null!==n;)ps(e,t,n),n=n.sibling}function ps(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Yu||es(n,t);case 6:var r=fs,i=hs;fs=null,ds(e,t,n),hs=i,null!==(fs=r)&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fs.removeChild(n.stateNode));break;case 18:null!==fs&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),zt(e)):si(fs,n.stateNode));break;case 4:r=fs,i=hs,fs=n.stateNode.containerInfo,hs=!0,ds(e,t,n),fs=r,hs=i;break;case 0:case 11:case 14:case 15:if(!Yu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&ts(n,t,o),i=i.next}while(i!==r)}ds(e,t,n);break;case 1:if(!Yu&&(es(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ic(n,t,u)}ds(e,t,n);break;case 21:ds(e,t,n);break;case 22:1&n.mode?(Yu=(r=Yu)||null!==n.memoizedState,ds(e,t,n),Yu=r):ds(e,t,n);break;default:ds(e,t,n)}}function vs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ju),t.forEach((function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ys(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:fs=s.stateNode,hs=!1;break e;case 3:case 4:fs=s.stateNode.containerInfo,hs=!0;break e}s=s.return}if(null===fs)throw Error(a(160));ps(o,u,i),fs=null,hs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ic(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ms(t,e),t=t.sibling}function ms(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ys(t,e),gs(e),4&r){try{rs(3,e,e.return),is(3,e)}catch(y){Ic(e,e.return,y)}try{rs(5,e,e.return)}catch(y){Ic(e,e.return,y)}}break;case 1:ys(t,e),gs(e),512&r&&null!==n&&es(n,n.return);break;case 5:if(ys(t,e),gs(e),512&r&&null!==n&&es(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(y){Ic(e,e.return,y)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&Y(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?ye(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(y){Ic(e,e.return,y)}}break;case 6:if(ys(t,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){Ic(e,e.return,y)}}break;case 3:if(ys(t,e),gs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(y){Ic(e,e.return,y)}break;case 4:default:ys(t,e),gs(e);break;case 13:ys(t,e),gs(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zs=Ye())),4&r&&vs(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Yu=(l=Yu)||f,ys(t,e),Yu=l):ys(t,e),gs(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Zu=e,f=e.child;null!==f;){for(h=Zu=f;null!==Zu;){switch(p=(d=Zu).child,d.tag){case 0:case 11:case 14:case 15:rs(4,d,d.return);break;case 1:es(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){Ic(r,n,y)}}break;case 5:es(d,d.return);break;case 22:if(null!==d.memoizedState){xs(h);continue}}null!==p?(p.return=d,Zu=p):xs(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(y){Ic(e,e.return,y)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(y){Ic(e,e.return,y)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ys(t,e),gs(e),4&r&&vs(e);case 21:}}function gs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(us(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ls(e,ss(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cs(e,ss(e),o);break;default:throw Error(a(161))}}catch(u){Ic(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ks(e,t,n){Zu=e,bs(e,t,n)}function bs(e,t,n){for(var r=0!==(1&e.mode);null!==Zu;){var i=Zu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Xu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Yu;u=Xu;var c=Yu;if(Xu=o,(Yu=s)&&!c)for(Zu=i;null!==Zu;)s=(o=Zu).child,22===o.tag&&null!==o.memoizedState?_s(i):null!==s?(s.return=o,Zu=s):_s(i);for(;null!==a;)Zu=a,bs(a,t,n),a=a.sibling;Zu=i,Xu=u,Yu=c}ws(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zu=a):ws(e)}}function ws(e){for(;null!==Zu;){var t=Zu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Yu||is(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Yu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ya(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&ja(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}ja(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(a(163))}Yu||512&t.flags&&as(t)}catch(d){Ic(t,t.return,d)}}if(t===e){Zu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zu=n;break}Zu=t.return}}function xs(e){for(;null!==Zu;){var t=Zu;if(t===e){Zu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zu=n;break}Zu=t.return}}function _s(e){for(;null!==Zu;){var t=Zu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{is(4,t)}catch(s){Ic(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Ic(t,i,s)}}var a=t.return;try{as(t)}catch(s){Ic(t,a,s)}break;case 5:var o=t.return;try{as(t)}catch(s){Ic(t,o,s)}}}catch(s){Ic(t,t.return,s)}if(t===e){Zu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Zu=u;break}Zu=t.return}}var Ss,Is=Math.ceil,Es=b.ReactCurrentDispatcher,Ts=b.ReactCurrentOwner,Cs=b.ReactCurrentBatchConfig,As=0,Ns=null,Ds=null,Os=0,Rs=0,Ps=Si(0),Ls=0,Ms=null,Fs=0,js=0,Us=0,Vs=null,qs=null,zs=0,Bs=1/0,Ks=null,Gs=!1,Ws=null,Qs=null,Hs=!1,$s=null,Xs=0,Ys=0,Js=null,Zs=-1,ec=0;function tc(){return 0!==(6&As)?Ye():-1!==Zs?Zs:Zs=Ye()}function nc(e){return 0===(1&e.mode)?1:0!==(2&As)&&0!==Os?Os&-Os:null!==va.transition?(0===ec&&(ec=vt()),ec):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function rc(e,t,n,r){if(50<Ys)throw Ys=0,Js=null,Error(a(185));mt(e,n,r),0!==(2&As)&&e===Ns||(e===Ns&&(0===(2&As)&&(js|=n),4===Ls&&sc(e,Os)),ic(e,r),1===n&&0===As&&0===(1&t.mode)&&(Bs=Ye()+500,Ui&&zi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Ns?Os:0);if(0===r)null!==n&&He(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&He(n),1===t)0===e.tag?function(e){Ui=!0,qi(e)}(cc.bind(null,e)):qi(cc.bind(null,e)),oi((function(){0===(6&As)&&zi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zs=-1,ec=0,0!==(6&As))throw Error(a(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ht(e,e===Ns?Os:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=As;As|=2;var o=vc();for(Ns===e&&Os===t||(Ks=null,Bs=Ye()+500,dc(e,t));;)try{kc();break}catch(s){pc(e,s)}wa(),Es.current=o,As=i,null!==Ds?t=0:(Ns=null,Os=0,t=Ls)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ms,dc(e,0),sc(e,r),ic(e,Ye()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ms,dc(e,0),sc(e,r),ic(e,Ye()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:xc(e,qs,Ks);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=zs+500-Ye())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xc.bind(null,e,qs,Ks),t);break}xc(e,qs,Ks);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Is(r/1960))-r)){e.timeoutHandle=ri(xc.bind(null,e,qs,Ks),r);break}xc(e,qs,Ks);break;default:throw Error(a(329))}}}return ic(e,Ye()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=Vs;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=qs,qs=n,null!==t&&uc(t)),e}function uc(e){null===qs?qs=e:qs.push.apply(qs,e)}function sc(e,t){for(t&=~Us,t&=~js,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&As))throw Error(a(327));_c();var t=ht(e,0);if(0===(1&t))return ic(e,Ye()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ms,dc(e,0),sc(e,t),ic(e,Ye()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,qs,Ks),ic(e,Ye()),null}function lc(e,t){var n=As;As|=1;try{return e(t)}finally{0===(As=n)&&(Bs=Ye()+500,Ui&&zi())}}function fc(e){null!==$s&&0===$s.tag&&0===(6&As)&&_c();var t=As;As|=1;var n=Cs.transition,r=kt;try{if(Cs.transition=null,kt=1,e)return e()}finally{kt=r,Cs.transition=n,0===(6&(As=t))&&zi()}}function hc(){Rs=Ps.current,Ii(Ps)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ds)for(n=Ds.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:io(),Ii(Ai),Ii(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ii(uo);break;case 10:xa(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Ns=e,Ds=e=Pc(e.current,null),Os=Rs=t,Ls=0,Ms=null,Us=js=Fs=0,qs=Vs=null,null!==Ea){for(t=0;t<Ea.length;t++)if(null!==(r=(n=Ea[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ea=null}return e}function pc(e,t){for(;;){var n=Ds;try{if(wa(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,mo=yo=vo=null,ko=!1,bo=0,Ts.current=null,null===n||null===n.return){Ls=1,Ms=t,Ds=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Os,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=mu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&yu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){yu(o,l,t),yc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var m=mu(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),gu(m,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Ls&&(Ls=2),null===Vs?Vs=[o]:Vs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Qs||!Qs.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(b){t=b,Ds===n&&null!==n&&(Ds=n=n.return);continue}break}}function vc(){var e=Es.current;return Es.current=ou,null===e?ou:e}function yc(){0!==Ls&&3!==Ls&&2!==Ls||(Ls=4),null===Ns||0===(268435455&Fs)&&0===(268435455&js)||sc(Ns,Os)}function mc(e,t){var n=As;As|=2;var r=vc();for(Ns===e&&Os===t||(Ks=null,dc(e,t));;)try{gc();break}catch(i){pc(e,i)}if(wa(),As=n,Es.current=r,null!==Ds)throw Error(a(261));return Ns=null,Os=0,Ls}function gc(){for(;null!==Ds;)bc(Ds)}function kc(){for(;null!==Ds&&!$e();)bc(Ds)}function bc(e){var t=Ss(e.alternate,e,Rs);e.memoizedProps=e.pendingProps,null===t?wc(e):Ds=t,Ts.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Hu(n,t,Rs)))return void(Ds=n)}else{if(null!==(n=$u(n,t)))return n.flags&=32767,void(Ds=n);if(null===e)return Ls=6,void(Ds=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ds=t);Ds=t=e}while(null!==t);0===Ls&&(Ls=5)}function xc(e,t,n){var r=kt,i=Cs.transition;try{Cs.transition=null,kt=1,function(e,t,n,r){do{_c()}while(null!==$s);if(0!==(6&As))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ns&&(Ds=Ns=null,Os=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Hs||(Hs=!0,Nc(tt,(function(){return _c(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cs.transition,Cs.transition=null;var u=kt;kt=1;var s=As;As|=4,Ts.current=null,function(e,t){if(ei=Kt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Zu=t;null!==Zu;)if(e=(t=Zu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zu=e;else for(;null!==Zu;){t=Zu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ya(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Ic(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zu=e;break}Zu=t.return}v=ns,ns=!1}(e,n),ms(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,ks(n,e,i),Xe(),As=s,kt=u,Cs.transition=o}else e.current=n;if(Hs&&(Hs=!1,$s=e,Xs=i),o=e.pendingLanes,0===o&&(Qs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gs)throw Gs=!1,e=Ws,Ws=null,e;0!==(1&Xs)&&0!==e.tag&&_c(),o=e.pendingLanes,0!==(1&o)?e===Js?Ys++:(Ys=0,Js=e):Ys=0,zi()}(e,t,n,r)}finally{Cs.transition=i,kt=r}return null}function _c(){if(null!==$s){var e=bt(Xs),t=Cs.transition,n=kt;try{if(Cs.transition=null,kt=16>e?16:e,null===$s)var r=!1;else{if(e=$s,$s=null,Xs=0,0!==(6&As))throw Error(a(331));var i=As;for(As|=4,Zu=e.current;null!==Zu;){var o=Zu,u=o.child;if(0!==(16&Zu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Zu=l;null!==Zu;){var f=Zu;switch(f.tag){case 0:case 11:case 15:rs(8,f,o)}var h=f.child;if(null!==h)h.return=f,Zu=h;else for(;null!==Zu;){var d=(f=Zu).sibling,p=f.return;if(os(f),f===l){Zu=null;break}if(null!==d){d.return=p,Zu=d;break}Zu=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Zu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Zu=u;else e:for(;null!==Zu;){if(0!==(2048&(o=Zu).flags))switch(o.tag){case 0:case 11:case 15:rs(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zu=g;break e}Zu=o.return}}var k=e.current;for(Zu=k;null!==Zu;){var b=(u=Zu).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Zu=b;else e:for(u=k;null!==Zu;){if(0!==(2048&(s=Zu).flags))try{switch(s.tag){case 0:case 11:case 15:is(9,s)}}catch(x){Ic(s,s.return,x)}if(s===u){Zu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Zu=w;break e}Zu=s.return}}if(As=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{kt=n,Cs.transition=t}}return!1}function Sc(e,t,n){e=Pa(e,t=pu(0,t=lu(n,t),1),1),t=tc(),null!==e&&(mt(e,1,t),ic(e,t))}function Ic(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Qs||!Qs.has(r))){t=Pa(t,e=vu(t,e=lu(n,e),1),1),e=tc(),null!==t&&(mt(t,1,e),ic(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Ns===e&&(Os&n)===n&&(4===Ls||3===Ls&&(130023424&Os)===Os&&500>Ye()-zs?dc(e,0):Us|=n),ic(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Aa(e,t))&&(mt(e,t,n),ic(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tc(e,n)}function Nc(e,t){return Qe(e,t)}function Dc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oc(e,t,n,r){return new Dc(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=Oc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Rc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case _:return Mc(n.children,i,o,t);case S:u=8,i|=8;break;case I:return(e=Oc(12,n,t,2|i)).elementType=I,e.lanes=o,e;case A:return(e=Oc(13,n,t,i)).elementType=A,e.lanes=o,e;case N:return(e=Oc(19,n,t,i)).elementType=N,e.lanes=o,e;case R:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:u=10;break e;case T:u=9;break e;case C:u=11;break e;case D:u=14;break e;case O:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Oc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Oc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Oc(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function jc(e,t,n){return(e=Oc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Oc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function qc(e,t,n,r,i,a,o,u,s){return e=new Vc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Oc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Da(a),e}function zc(e){if(!e)return Ti;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Li(e,n,t)}return t}function Bc(e,t,n,r,i,a,o,u,s){return(e=qc(n,r,!0,e,0,a,0,u,s)).context=zc(null),n=e.current,(a=Ra(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Pa(n,a,i),e.current.lanes=i,mt(e,i,r),ic(e,r),e}function Kc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ra(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Pa(i,t,o))&&(rc(e,i,o,a),La(e,i,o)),o}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Qc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}Ss=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)bu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bu=!1,function(e,t,n){switch(t.tag){case 3:Nu(t),da();break;case 5:ao(t);break;case 1:Oi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ei(ma,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ei(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?ju(e,t,n):(Ei(uo,1&uo.current),null!==(e=Gu(e,t,n))?e.sibling:null);Ei(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Bu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ei(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Iu(e,t,n)}return Gu(e,t,n)}(e,t,n);bu=0!==(131072&e.flags)}else bu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ku(e,t),e=t.pendingProps;var i=Di(t,Ci.current);Sa(t,n),i=So(null,t,r,e,i,n);var o=Io();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Da(t),i.updater=qa,t.stateNode=i,i._reactInternals=t,Ga(t,r,e,n),t=Au(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ku(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===D)return 14}return 2}(r),e=ya(r,e),i){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=xu(null,t,r,e,n);break e;case 14:t=_u(null,t,r,ya(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 3:e:{if(Nu(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Oa(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Du(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Du(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ya(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Gu(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Eu(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return ju(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Xa(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ei(ma,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ai.current){t=Gu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Ra(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),_a(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),_a(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Sa(t,n),r=r(i=Ia(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ya(r=t.type,t.pendingProps),_u(e,t,r,i=ya(r.type,i),n);case 15:return Su(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ya(r,i),Ku(e,t),t.tag=1,Oi(r)?(e=!0,Mi(t)):e=!1,Sa(t,n),Ba(t,r,i),Ga(t,r,i,n),Au(null,t,r,!0,e,n);case 19:return Bu(e,t,n);case 22:return Iu(e,t,n)}throw Error(a(156,t.tag))};var Hc="function"===typeof reportError?reportError:function(e){console.error(e)};function $c(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Gc(o);u.call(e)}}Kc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Gc(o);a.call(e)}}var o=Bc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),fc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Gc(s);u.call(e)}}var s=qc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,zr(8===e.nodeType?e.parentNode:e),fc((function(){Kc(t,s,n,r)})),s}(n,t,e,i,r);return Gc(o)}Xc.prototype.render=$c.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Kc(e,t,null,null)},Xc.prototype.unmount=$c.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Kc(null,e,null,null)})),t[pi]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,Ye()),0===(6&As)&&(Bs=Ye()+500,zi()))}break;case 13:fc((function(){var t=Aa(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Qc(e,1)}},xt=function(e){if(13===e.tag){var t=Aa(e,134217728);if(null!==t)rc(t,e,134217728,tc());Qc(e,134217728)}},_t=function(e){if(13===e.tag){var t=nc(e),n=Aa(e,t);if(null!==n)rc(n,e,t,tc());Qc(e,t)}},St=function(){return kt},It=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},xe=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));Q(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=lc,Ae=fc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Ee,Te,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(a(299));var n=!1,r="",i=Hc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=qc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new $c(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Hc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},192:function(e,t,n){"use strict";var r=n(544);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},544:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(772)},631:function(e,t){"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.server_context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen");function m(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case u:case o:case h:case d:return e;default:switch(e=e&&e.$$typeof){case l:case c:case f:case v:case p:case s:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference")},686:function(e,t,n){"use strict";n(631)},482:function(e,t,n){"use strict";var r=n(867),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.jsx=c,t.jsxs=c},285:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var b=k.prototype=new g;b.constructor=k,v(b,m.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,_={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!S.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:_.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),A(o,t,i,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=A(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=A(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function N(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},R={transition:null},P={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:R,ReactCurrentOwner:_};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)x.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.2.0"},867:function(e,t,n){"use strict";e.exports=n(285)},834:function(e,t,n){"use strict";e.exports=n(482)},73:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(y=!1,b(e),!v)if(null!==r(c))v=!0,R(x);else{var t=r(l);null!==t&&P(w,t.startTime-e)}}function x(e,n){v=!1,y&&(y=!1,g(E),E=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!A());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&P(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,S=!1,I=null,E=-1,T=5,C=-1;function A(){return!(t.unstable_now()-C<T)}function N(){if(null!==I){var e=t.unstable_now();C=e;var n=!0;try{n=I(!0,e)}finally{n?_():(S=!1,I=null)}}else S=!1}if("function"===typeof k)_=function(){k(N)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,O=D.port2;D.port1.onmessage=N,_=function(){O.postMessage(null)}}else _=function(){m(N,0)};function R(e){I=e,S||(S=!0,_())}function P(e,n){E=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,R(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(E),E=-1):y=!0,P(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,R(x))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},882:function(e,t,n){"use strict";e.exports=n(73)},771:function(e,t,n){"use strict";var r=n(867);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=r.useState,o=r.useEffect,u=r.useLayoutEffect,s=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var l="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),i=r[0].inst,l=r[1];return u((function(){i.value=n,i.getSnapshot=t,c(i)&&l({inst:i})}),[e,n,t]),o((function(){return c(i)&&l({inst:i}),e((function(){c(i)&&l({inst:i})}))}),[e]),s(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},439:function(e,t,n){"use strict";var r=n(867),i=n(853);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=i.useSyncExternalStore,u=r.useRef,s=r.useEffect,c=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var f=u(null);if(null===f.current){var h={hasValue:!1,value:null};f.current=h}else h=f.current;f=c((function(){function e(e){if(!s){if(s=!0,o=e,e=r(e),void 0!==i&&h.hasValue){var t=h.value;if(i(t,e))return u=t}return u=e}if(t=u,a(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(o=e,u=n)}var o,u,s=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,i]);var d=o(e,f[0],f[1]);return s((function(){h.hasValue=!0,h.value=d}),[d]),l(d),d}},853:function(e,t,n){"use strict";e.exports=n(771)},599:function(e,t,n){"use strict";e.exports=n(439)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r](a,a.exports,n),a.loaded=!0,a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var u=2&i&&r;"object"==typeof u&&!~e.indexOf(u);u=t(u))Object.getOwnPropertyNames(u).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".61a68ed7.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="react-daily-goal-tracker:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){u=f;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var h=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=h.bind(null,u.onerror),u.onload=h.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},n.p="/react-daily-goal-tracker/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkreact_daily_goal_tracker=self.webpackChunkreact_daily_goal_tracker||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return W},SDK_VERSION:function(){return rt},_DEFAULT_ENTRY_NAME:function(){return Ke},_addComponent:function(){return He},_addOrOverwriteComponent:function(){return $e},_apps:function(){return We},_clearComponents:function(){return Ze},_components:function(){return Qe},_getProvider:function(){return Ye},_registerComponent:function(){return Xe},_removeServiceInstance:function(){return Je},deleteApp:function(){return ut},getApp:function(){return at},getApps:function(){return ot},initializeApp:function(){return it},onLog:function(){return lt},registerVersion:function(){return ct},setLogLevel:function(){return ft}});var t=n(867),r=n.t(t,2),i=n(192);function a(e){if(Array.isArray(e))return e}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){return a(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||u(e,t)||s()}function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function f(){f=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(N){s=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof p?t:p,o=Object.create(a.prototype),u=new T(i||[]);return r(o,"_invoke",{value:_(e,n,u)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(N){return{type:"throw",arg:N}}}e.wrap=c;var d={};function p(){}function v(){}function y(){}var m={};s(m,a,(function(){return this}));var g=Object.getPrototypeOf,k=g&&g(g(C([])));k&&k!==t&&n.call(k,a)&&(m=k);var b=y.prototype=p.prototype=Object.create(m);function w(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function i(r,a,o,u){var s=h(e[r],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==l(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,o,u)}),(function(e){i("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,u)}))}u(s.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function _(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return A()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=S(o,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=h(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=h(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,d;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function C(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:A}}function A(){return{value:void 0,done:!0}}return v.prototype=y,r(b,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:v,configurable:!0}),v.displayName=s(y,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,s(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(x.prototype),s(x.prototype,o,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new x(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(b),s(b,u,"Generator"),s(b,a,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=C,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function h(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){h(a,r,i,o,u,"next",e)}function u(e){h(a,r,i,o,u,"throw",e)}o(void 0)}))}}function p(e){var t=function(e,t){if("object"!==l(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===l(t)?t:String(t)}function v(e,t,n){return(t=p(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function g(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function k(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}function x(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}function S(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function I(e){var t=S();return function(){var n,r=_(e);if(t){var i=_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}(this,n)}}function E(e,t,n){return E=S()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&w(i,n.prototype),i},E.apply(null,arguments)}function T(e){var t="function"===typeof Map?new Map:void 0;return T=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return E(e,arguments,_(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),w(n,e)},T(e)}var C=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},A={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(C(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new N;var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},N=function(e){x(n,e);var t=I(n);function n(){var e;return y(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return g(n)}(T(Error)),D=function(e){return function(e){var t=C(e);return A.encodeByteArray(t,!0)}(e).replace(/\./g,"")},O=function(e){try{return A.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function R(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=R(e[n],t[n]));return e}var P=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},L=function(){try{return P()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/react-daily-goal-tracker",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&O(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},M=function(e){var t,n;return null===(n=null===(t=L())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},F=function(){var e;return null===(e=L())||void 0===e?void 0:e.config},j=function(e){var t;return null===(t=L())||void 0===t?void 0:t["_".concat(e)]},U=function(){function e(){var t=this;y(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return g(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function V(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function q(){var e,t=null===(e=L())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function z(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function B(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function K(){var e=V();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function G(){try{return"object"===typeof indexedDB}catch(e){return!1}}var W=function(e){x(n,e);var t=I(n);function n(e,r,i){var a;return y(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(b(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(b(a),Q.prototype.create),a}return g(n)}(T(Error)),Q=function(){function e(t,n,r){y(this,e),this.service=t,this.serviceName=n,this.errors=r}return g(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(H,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new W(n,a,t)}}]),e}();var H=/\{\$([^}]+)}/g;function $(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function X(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(Y(u)&&Y(s)){if(!X(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Y(e){return null!==e&&"object"===typeof e}function J(e){for(var t=[],n=function(){var e=c(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Z(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=c(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function ee(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function te(e,t){var n=new ne(e,t);return n.subscribe.bind(n)}var ne=function(){function e(t,n){var r=this;y(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return g(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=k(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=re),void 0===r.error&&(r.error=re),void 0===r.complete&&(r.complete=re);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function re(){}function ie(e){return e&&e._delegate?e._delegate:e}function ae(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function oe(e){return function(e){if(Array.isArray(e))return o(e)}(e)||ae(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ue=function(){function e(t,n,r){y(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return g(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),se="[DEFAULT]",ce=function(){function e(t,n){y(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return g(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new U;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:se})}catch(s){}var t,n=k(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=c(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=d(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(oe(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),oe(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=k(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=c(i.value,2),s=u[0],l=u[1];r===this.normalizeInstanceIdentifier(s)&&l.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=k(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(h_){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===se?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(h_){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se;return this.component?this.component.multipleInstances?e:se:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var le,fe,he=function(){function e(t){y(this,e),this.name=t,this.providers=new Map}return g(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new ce(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),de=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(fe||(fe={}));var pe={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},ve=fe.INFO,ye=(v(le={},fe.DEBUG,"log"),v(le,fe.VERBOSE,"log"),v(le,fe.INFO,"info"),v(le,fe.WARN,"warn"),v(le,fe.ERROR,"error"),le),me=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=ye[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},ge=function(){function e(t){y(this,e),this.name=t,this._logLevel=ve,this._logHandler=me,this._userLogHandler=null,de.push(this)}return g(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in fe))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?pe[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,fe.DEBUG].concat(t)),this._logHandler.apply(this,[this,fe.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,fe.VERBOSE].concat(t)),this._logHandler.apply(this,[this,fe.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,fe.INFO].concat(t)),this._logHandler.apply(this,[this,fe.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,fe.WARN].concat(t)),this._logHandler.apply(this,[this,fe.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,fe.ERROR].concat(t)),this._logHandler.apply(this,[this,fe.ERROR].concat(t))}}]),e}();function ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var we,xe,_e=function(e,t){return t.some((function(t){return e instanceof t}))};var Se=new WeakMap,Ie=new WeakMap,Ee=new WeakMap,Te=new WeakMap,Ce=new WeakMap;var Ae={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ie.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Ee.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Oe(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Ne(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(xe||(xe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Re(this),n),Oe(Se.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Oe(e.apply(Re(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Re(this),t].concat(r));return Ee.set(a,t.sort?t.sort():[t]),Oe(a)}}function De(e){return"function"===typeof e?Ne(e):(e instanceof IDBTransaction&&function(e){if(!Ie.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Ie.set(e,t)}}(e),_e(e,we||(we=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Ae):e)}function Oe(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Oe(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Se.set(t,e)})).catch((function(){})),Ce.set(t,e),t}(e);if(Te.has(e))return Te.get(e);var t=De(e);return t!==e&&(Te.set(e,t),Ce.set(t,e)),t}var Re=function(e){return Ce.get(e)};var Pe,Le,Me=["get","getKey","getAll","getAllKeys","count"],Fe=["put","add","delete","clear"],je=new Map;function Ue(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(je.get(t))return je.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Fe.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Me.includes(n))){var a=function(){var e=d(f().mark((function e(t){var a,o,u,s,c,l,h=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=h.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=h[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return je.set(t,a),a}}}Ae=function(e){return be(be({},e),{},{get:function(t,n,r){return Ue(t,n)||e.get(t,n,r)},has:function(t,n){return!!Ue(t,n)||e.has(t,n)}})}(Ae);var Ve=function(){function e(t){y(this,e),this.container=t}return g(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var qe="@firebase/app",ze="0.9.5",Be=new ge("@firebase/app"),Ke="[DEFAULT]",Ge=(v(Pe={},qe,"fire-core"),v(Pe,"@firebase/app-compat","fire-core-compat"),v(Pe,"@firebase/analytics","fire-analytics"),v(Pe,"@firebase/analytics-compat","fire-analytics-compat"),v(Pe,"@firebase/app-check","fire-app-check"),v(Pe,"@firebase/app-check-compat","fire-app-check-compat"),v(Pe,"@firebase/auth","fire-auth"),v(Pe,"@firebase/auth-compat","fire-auth-compat"),v(Pe,"@firebase/database","fire-rtdb"),v(Pe,"@firebase/database-compat","fire-rtdb-compat"),v(Pe,"@firebase/functions","fire-fn"),v(Pe,"@firebase/functions-compat","fire-fn-compat"),v(Pe,"@firebase/installations","fire-iid"),v(Pe,"@firebase/installations-compat","fire-iid-compat"),v(Pe,"@firebase/messaging","fire-fcm"),v(Pe,"@firebase/messaging-compat","fire-fcm-compat"),v(Pe,"@firebase/performance","fire-perf"),v(Pe,"@firebase/performance-compat","fire-perf-compat"),v(Pe,"@firebase/remote-config","fire-rc"),v(Pe,"@firebase/remote-config-compat","fire-rc-compat"),v(Pe,"@firebase/storage","fire-gcs"),v(Pe,"@firebase/storage-compat","fire-gcs-compat"),v(Pe,"@firebase/firestore","fire-fst"),v(Pe,"@firebase/firestore-compat","fire-fst-compat"),v(Pe,"fire-js","fire-js"),v(Pe,"firebase","fire-js-all"),Pe),We=new Map,Qe=new Map;function He(e,t){try{e.container.addComponent(t)}catch(n){Be.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function $e(e,t){e.container.addOrOverwriteComponent(t)}function Xe(e){var t=e.name;if(Qe.has(t))return Be.debug("There were multiple attempts to register component ".concat(t,".")),!1;Qe.set(t,e);var n,r=k(We.values());try{for(r.s();!(n=r.n()).done;){He(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Ye(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Je(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ke;Ye(e,t).clearInstance(n)}function Ze(){Qe.clear()}var et=(v(Le={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),v(Le,"bad-app-name","Illegal App name: '{$appName}"),v(Le,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),v(Le,"app-deleted","Firebase App named '{$appName}' already deleted"),v(Le,"no-options","Need to provide options, when not being deployed to hosting via source."),v(Le,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),v(Le,"invalid-log-argument","First argument to `onLog` must be null or a function."),v(Le,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),v(Le,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),v(Le,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),v(Le,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Le),tt=new Q("app","Firebase",et),nt=function(){function e(t,n,r){var i=this;y(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ue("app",(function(){return i}),"PUBLIC"))}return g(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw tt.create("app-deleted",{appName:this._name})}}]),e}(),rt="9.18.0";function it(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:Ke,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw tt.create("bad-app-name",{appName:String(i)});if(n||(n=F()),!n)throw tt.create("no-options");var a=We.get(i);if(a){if(X(n,a.options)&&X(r,a.config))return a;throw tt.create("duplicate-app",{appName:i})}var o,u=new he(i),s=k(Qe.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new nt(n,r,u);return We.set(i,l),l}function at(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke,t=We.get(e);if(!t&&e===Ke)return it();if(!t)throw tt.create("no-app",{appName:e});return t}function ot(){return Array.from(We.values())}function ut(e){return st.apply(this,arguments)}function st(){return st=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!We.has(n)){e.next=6;break}return We.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)}))),st.apply(this,arguments)}function ct(e,t,n){var r,i=null!==(r=Ge[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Be.warn(u.join(" "))}Xe(new ue("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function lt(e,t){if(null!==e&&"function"!==typeof e)throw tt.create("invalid-log-argument");!function(e,t){var n,r=k(de);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=pe[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:fe[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function ft(e){var t;t=e,de.forEach((function(e){e.setLogLevel(t)}))}var ht="firebase-heartbeat-database",dt=1,pt="firebase-heartbeat-store",vt=null;function yt(){return vt||(vt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=Oe(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(Oe(u.result),e.oldVersion,e.newVersion,Oe(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}(ht,dt,{upgrade:function(e,t){if(0===t)e.createObjectStore(pt)}}).catch((function(e){throw tt.create("idb-open",{originalErrorMessage:e.message})}))),vt}function mt(e){return gt.apply(this,arguments)}function gt(){return gt=d(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,yt();case 3:return n=e.sent,e.abrupt("return",n.transaction(pt).objectStore(pt).get(wt(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof W?Be.warn(e.t0.message):(r=tt.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Be.warn(r.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),gt.apply(this,arguments)}function kt(e,t){return bt.apply(this,arguments)}function bt(){return bt=d(f().mark((function e(t,n){var r,i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,yt();case 3:return r=e.sent,i=r.transaction(pt,"readwrite"),a=i.objectStore(pt),e.next=8,a.put(n,wt(t));case 8:return e.abrupt("return",i.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof W?Be.warn(e.t0.message):(o=tt.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Be.warn(o.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),bt.apply(this,arguments)}function wt(e){return"".concat(e.name,"!").concat(e.options.appId)}var xt=function(){function e(t){var n=this;y(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Tt(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return g(e,[{key:"triggerHeartbeat",value:function(){var e=d(f().mark((function e(){var t,n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=_t(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=d(f().mark((function e(){var t,n,r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=_t(),n=St(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=D(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function _t(){return(new Date).toISOString().substring(0,10)}function St(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=k(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Ct(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Ct(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var It,Et,Tt=function(){function e(t){y(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return g(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(G()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=d(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,mt(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=d(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",kt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=d(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",kt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(oe(r.heartbeats),oe(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Ct(e){return D(JSON.stringify({version:2,heartbeats:e})).length}It="",Xe(new ue("platform-logger",(function(e){return new Ve(e)}),"PRIVATE")),Xe(new ue("heartbeat",(function(e){return new xt(e)}),"PRIVATE")),ct(qe,ze,It),ct(qe,ze,"esm2017"),ct("fire-js","");var At=function(){function e(t,n){var r=this;y(this,e),this._delegate=t,this.firebase=n,He(t,new ue("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return g(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),ut(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ke;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ke;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){He(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){$e(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Nt=(v(Et={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),v(Et,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Et),Dt=new Q("app-compat","Firebase",Nt);var Ot=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=it(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if($(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:ct,setLogLevel:ft,onLog:lt,apps:null,SDK_VERSION:rt,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Xe(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Dt.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&R(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!$(n,e=e||Ke))throw Dt.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(At);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){R(n,e)},createSubscribe:te,ErrorFactory:Q,deepExtend:R}),n}(),Rt=new ge("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Rt.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Pt=self.firebase.SDK_VERSION;Pt&&Pt.indexOf("LITE")>=0&&Rt.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Lt=Ot;!function(e){ct("@firebase/app-compat","0.2.5",e)}();function Mt(e){return a(e)||ae(e)||u(e)||s()}function Ft(){return Ft="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Ft.apply(this,arguments)}Lt.registerVersion("firebase","9.18.0","app-compat");function jt(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Ut;Object.create;var Vt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},qt="EMAIL_SIGNIN",zt="PASSWORD_RESET",Bt="RECOVER_EMAIL",Kt="REVERT_SECOND_FACTOR_ADDITION",Gt="VERIFY_AND_CHANGE_EMAIL",Wt="VERIFY_EMAIL";function Qt(){return v({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Ht=function(){var e;return v(e={},"admin-restricted-operation","This operation is restricted to administrators only."),v(e,"argument-error",""),v(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),v(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),v(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),v(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),v(e,"cordova-not-ready","Cordova framework is not ready."),v(e,"cors-unsupported","This browser is not supported."),v(e,"credential-already-in-use","This credential is already associated with a different user account."),v(e,"custom-token-mismatch","The custom token corresponds to a different audience."),v(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),v(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),v(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),v(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),v(e,"email-already-in-use","The email address is already in use by another account."),v(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),v(e,"expired-action-code","The action code has expired."),v(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),v(e,"internal-error","An internal AuthError has occurred."),v(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),v(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),v(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),v(e,"invalid-auth-event","An internal AuthError has occurred."),v(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),v(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),v(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),v(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),v(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),v(e,"invalid-email","The email address is badly formatted."),v(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),v(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),v(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),v(e,"invalid-credential","The supplied auth credential is malformed or has expired."),v(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),v(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),v(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),v(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),v(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),v(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),v(e,"wrong-password","The password is invalid or the user does not have a password."),v(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),v(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),v(e,"invalid-provider-id","The specified provider ID is invalid."),v(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),v(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),v(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),v(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),v(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),v(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),v(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),v(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),v(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),v(e,"missing-continue-uri","A continue URL must be provided in the request."),v(e,"missing-iframe-start","An internal AuthError has occurred."),v(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),v(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),v(e,"missing-multi-factor-info","No second factor identifier is provided."),v(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),v(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),v(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),v(e,"app-deleted","This instance of FirebaseApp has been deleted."),v(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),v(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),v(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),v(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),v(e,"no-auth-event","An internal AuthError has occurred."),v(e,"no-such-provider","User was not linked to an account with the given provider."),v(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),v(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),v(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),v(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),v(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),v(e,"provider-already-linked","User can only be linked to one identity for the given provider."),v(e,"quota-exceeded","The project's quota for this operation has been exceeded."),v(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),v(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),v(e,"rejected-credential","The request contains malformed or mismatching credentials."),v(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),v(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),v(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),v(e,"timeout","The operation has timed out."),v(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),v(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),v(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),v(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),v(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),v(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),v(e,"unverified-email","The operation requires a verified email."),v(e,"user-cancelled","The user did not grant your application the permissions it requested."),v(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),v(e,"user-disabled","The user account has been disabled by an administrator."),v(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),v(e,"user-signed-out",""),v(e,"weak-password","The password must be 6 characters long or more."),v(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),v(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},$t=Qt,Xt=new Q("auth","Firebase",Qt()),Yt=new ge("@firebase/auth");function Jt(e){if(Yt.logLevel<=fe.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Yt.error.apply(Yt,["Auth (".concat(rt,"): ").concat(e)].concat(n))}}function Zt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw rn.apply(void 0,[e].concat(n))}function en(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return rn.apply(void 0,[e].concat(n))}function tn(e,t,n){var r=Object.assign(Object.assign({},$t()),v({},t,n));return new Q("auth","Firebase",r).create(t,{appName:e.name})}function nn(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Zt(e,"argument-error"),tn(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function rn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=oe(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(oe(o)))}return Xt.create.apply(Xt,[e].concat(n))}function an(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw rn.apply(void 0,[t].concat(r))}}function on(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Jt(t),new Error(t)}function un(e,t){e||on(t)}var sn=new Map;function cn(e){un(e instanceof Function,"Expected a class definition");var t=sn.get(e);return t?(un(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,sn.set(e,t),t)}function ln(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function fn(){return"http:"===hn()||"https:"===hn()}function hn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var dn=function(){function e(t,n){y(this,e),this.shortDelay=t,this.longDelay=n,un(n>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(V())||B()}return g(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(fn()||z()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function pn(e,t){un(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var vn=function(){function e(){y(this,e)}return g(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void on("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void on("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void on("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),yn=(v(Ut={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),v(Ut,"MISSING_CUSTOM_TOKEN","internal-error"),v(Ut,"INVALID_IDENTIFIER","invalid-email"),v(Ut,"MISSING_CONTINUE_URI","internal-error"),v(Ut,"INVALID_PASSWORD","wrong-password"),v(Ut,"MISSING_PASSWORD","internal-error"),v(Ut,"EMAIL_EXISTS","email-already-in-use"),v(Ut,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),v(Ut,"INVALID_IDP_RESPONSE","invalid-credential"),v(Ut,"INVALID_PENDING_TOKEN","invalid-credential"),v(Ut,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),v(Ut,"MISSING_REQ_TYPE","internal-error"),v(Ut,"EMAIL_NOT_FOUND","user-not-found"),v(Ut,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),v(Ut,"EXPIRED_OOB_CODE","expired-action-code"),v(Ut,"INVALID_OOB_CODE","invalid-action-code"),v(Ut,"MISSING_OOB_CODE","internal-error"),v(Ut,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),v(Ut,"INVALID_ID_TOKEN","invalid-user-token"),v(Ut,"TOKEN_EXPIRED","user-token-expired"),v(Ut,"USER_NOT_FOUND","user-token-expired"),v(Ut,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),v(Ut,"INVALID_CODE","invalid-verification-code"),v(Ut,"INVALID_SESSION_INFO","invalid-verification-id"),v(Ut,"INVALID_TEMPORARY_PROOF","invalid-credential"),v(Ut,"MISSING_SESSION_INFO","missing-verification-id"),v(Ut,"SESSION_EXPIRED","code-expired"),v(Ut,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),v(Ut,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),v(Ut,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),v(Ut,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),v(Ut,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),v(Ut,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),v(Ut,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),v(Ut,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),v(Ut,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),v(Ut,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),v(Ut,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Ut),mn=new dn(3e4,6e4);function gn(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function kn(e,t,n,r){return bn.apply(this,arguments)}function bn(){return bn=d(f().mark((function e(t,n,r,i){var a,o=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",wn(t,a,d(f().mark((function e(){var a,o,u,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=J(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",vn.fetch()(In(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),bn.apply(this,arguments)}function wn(e,t,n){return xn.apply(this,arguments)}function xn(){return xn=d(f().mark((function e(t,n,r){var i,a,o,u,s,l,h,d,p,v;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},yn),n),e.prev=2,a=new En(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw Tn(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,l=s.split(" : "),h=c(l,2),d=h[0],p=h[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==d){e.next=23;break}throw Tn(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==d){e.next=27;break}throw Tn(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==d){e.next=29;break}throw Tn(t,"user-disabled",u);case 29:if(v=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-"),!p){e.next=34;break}throw tn(t,v,p);case 34:Zt(t,v);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof W)){e.next=41;break}throw e.t0;case 41:Zt(t,"internal-error",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),xn.apply(this,arguments)}function _n(e,t,n,r){return Sn.apply(this,arguments)}function Sn(){return Sn=d(f().mark((function e(t,n,r,i){var a,o,u=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,kn(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Zt(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Sn.apply(this,arguments)}function In(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?pn(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var En=function(){function e(t){var n=this;y(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(en(n.auth,"network-request-failed"))}),mn.get())}))}return g(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Tn(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=en(e,t,r);return i.customData._tokenResponse=n,i}function Cn(e,t){return An.apply(this,arguments)}function An(){return An=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kn(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),An.apply(this,arguments)}function Nn(e,t){return Dn.apply(this,arguments)}function Dn(){return Dn=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Dn.apply(this,arguments)}function On(e,t){return Rn.apply(this,arguments)}function Rn(){return Rn=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kn(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),Rn.apply(this,arguments)}function Pn(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Ln(){return Ln=d(f().mark((function e(t){var n,r,i,a,o,u,s=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=ie(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,an((a=Fn(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Pn(Mn(a.auth_time)),issuedAtTime:Pn(Mn(a.iat)),expirationTime:Pn(Mn(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Ln.apply(this,arguments)}function Mn(e){return 1e3*Number(e)}function Fn(e){var t=c(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return Jt("JWT malformed, contained fewer than 3 sections"),null;try{var a=O(r);return a?JSON.parse(a):(Jt("Failed to decode base64 JWT payload"),null)}catch(o){return Jt("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function jn(e,t){return Un.apply(this,arguments)}function Un(){return Un=d(f().mark((function e(t,n){var r=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof W&&Vn(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Un.apply(this,arguments)}function Vn(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var qn=function(){function e(t){y(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return g(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(d(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),zn=function(){function e(t,n){y(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return g(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Pn(this.lastLoginAt),this.creationTime=Pn(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Bn(e){return Kn.apply(this,arguments)}function Kn(){return Kn=d(f().mark((function e(t){var n,r,i,a,o,u,s,c,l,h,d;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,jn(t,On(r,{idToken:i}));case 6:an(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((function(e){var t=e.providerId,n=jt(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],s=Wn(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),h=!!c&&l,d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new zn(o.createdAt,o.lastLoginAt),isAnonymous:h},Object.assign(t,d);case 17:case"end":return e.stop()}}),e)}))),Kn.apply(this,arguments)}function Gn(){return(Gn=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ie(t),e.next=3,Bn(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wn(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(oe(n),oe(t))}function Qn(e,t){return Hn.apply(this,arguments)}function Hn(){return Hn=d(f().mark((function e(t,n){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wn(t,{},d(f().mark((function e(){var r,i,a,o,u,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=J({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=In(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",vn.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),Hn.apply(this,arguments)}var $n=function(){function e(){y(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return g(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){an(e.idToken,"internal-error"),an("undefined"!==typeof e.idToken,"internal-error"),an("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Fn(e);return an(t,"internal-error"),an("undefined"!==typeof t.exp,"internal-error"),an("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=d(f().mark((function e(t){var n,r=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],an(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=d(f().mark((function e(t,n){var r,i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qn(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return on("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(an("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(an("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(an("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Xn(e,t){an("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Yn=function(){function e(t){y(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=jt(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new qn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?oe(a.providerData):[],this.metadata=new zn(a.createdAt||void 0,a.lastLoginAt||void 0)}return g(e,[{key:"getIdToken",value:function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jn(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(an(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Ln.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Gn.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(an(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){an(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=d(f().mark((function e(t){var n,r,i=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Bn(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=d(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,jn(this,Cn(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,x=n.providerData,_=n.stsTokenManager;an(k&&_,t,"internal-error");var S=$n.fromJSON(this.name,_);an("string"===typeof k,t,"internal-error"),Xn(f,t.name),Xn(h,t.name),an("boolean"===typeof b,t,"internal-error"),an("boolean"===typeof w,t,"internal-error"),Xn(d,t.name),Xn(p,t.name),Xn(v,t.name),Xn(y,t.name),Xn(m,t.name),Xn(g,t.name);var I=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:S,createdAt:m,lastLoginAt:g});return x&&Array.isArray(x)&&(I.providerData=x.map((function(e){return Object.assign({},e)}))),y&&(I._redirectEventId=y),I}},{key:"_fromIdTokenResponse",value:function(){var t=d(f().mark((function t(n,r){var i,a,o,u=arguments;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new $n).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Bn(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Jn=function(){function e(){y(this,e),this.type="NONE",this.storage={}}return g(e,[{key:"_isAvailable",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Jn.type="NONE";var Zn=Jn;function er(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var tr=function(){function e(t,n,r){y(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=er(this.userKey,a.apiKey,o),this.fullPersistenceKey=er("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return g(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=d(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Yn._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=d(f().mark((function t(n,r){var i,a,o,u,s,c,l,h,p,v,y,m=arguments;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=m.length>2&&void 0!==m[2]?m[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(cn(Zn),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||cn(Zn),u=er(i,n.config.apiKey,n.name),s=null,c=k(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return h=l.value,t.prev=14,t.next=17,h._get(u);case 17:if(!(p=t.sent)){t.next=23;break}return v=Yn._fromJSON(n,p),h!==o&&(s=v),o=h,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(y=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&y.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=y[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function nr(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(or(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(rr(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(sr(t))return"Blackberry";if(cr(t))return"Webos";if(ir(t))return"Safari";if((t.includes("chrome/")||ar(t))&&!t.includes("edge/"))return"Chrome";if(ur(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function rr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V();return/firefox\//i.test(e)}function ir(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:V()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ar(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V();return/crios\//i.test(e)}function or(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V();return/iemobile/i.test(e)}function ur(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V();return/android/i.test(e)}function sr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V();return/blackberry/i.test(e)}function cr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V();return/webos/i.test(e)}function lr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function fr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V();return lr(e)||ur(e)||cr(e)||sr(e)||/windows phone/i.test(e)||or(e)}function hr(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=nr(V());break;case"Worker":t="".concat(nr(V()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(rt,"/").concat(r)}var dr=function(){function e(t){y(this,e),this.auth=t,this.queue=[]}return g(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=d(f().mark((function e(t){var n,r,i,a,o,u,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=k(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=k(n);try{for(o.s();!(u=o.n()).done;){s=u.value;try{s()}catch(rT){}}}catch(c){o.e(c)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),pr=function(){function e(t,n,r){y(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yr(this),this.idTokenSubscription=new yr(this),this.beforeStateQueue=new dr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Xt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return g(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=cn(t)),this._initializationPromise=this.queue(d(f().mark((function r(){var i,a;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,tr.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=d(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=d(f().mark((function e(t){var n,r,i,a,o,u,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return an(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Bn(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?ie(t):null)&&an(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=d(f().mark((function e(t){var n,r=this,i=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&an(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(d(f().mark((function n(){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(cn(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Q("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=d(f().mark((function e(t,n){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return an(n=t&&cn(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,tr.create(this,[cn(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=d(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=d(f().mark((function e(t){var n=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return an(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return an(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=hr(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=d(f().mark((function e(){var t,n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function vr(e){return ie(e)}var yr=function(){function e(t){var n=this;y(this,e),this.auth=t,this.observer=null,this.addObserver=te((function(e){return n.observer=e}))}return g(e,[{key:"next",get:function(){return an(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function mr(e,t,n){var r=vr(e);an(r._canInitEmulator,r,"emulator-config-failed"),an(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=gr(t),o=function(e){var t=gr(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:kr(r.substr(a.length+1))}}var o=c(r.split(":"),2);return{host:o[0],port:kr(o[1])}}(t),u=o.host,s=o.port,l=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function gr(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function kr(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var br=function(){function e(t,n){y(this,e),this.providerId=t,this.signInMethod=n}return g(e,[{key:"toJSON",value:function(){return on("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return on("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return on("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return on("not implemented")}}]),e}();function wr(e,t){return xr.apply(this,arguments)}function xr(){return xr=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kn(t,"POST","/v1/accounts:resetPassword",gn(t,n)));case 1:case"end":return e.stop()}}),e)}))),xr.apply(this,arguments)}function _r(e,t){return Sr.apply(this,arguments)}function Sr(){return Sr=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Sr.apply(this,arguments)}function Ir(e,t){return Er.apply(this,arguments)}function Er(){return Er=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kn(t,"POST","/v1/accounts:update",gn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Er.apply(this,arguments)}function Tr(e,t){return Cr.apply(this,arguments)}function Cr(){return Cr=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_n(t,"POST","/v1/accounts:signInWithPassword",gn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Cr.apply(this,arguments)}function Ar(e,t){return Nr.apply(this,arguments)}function Nr(){return Nr=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kn(t,"POST","/v1/accounts:sendOobCode",gn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Nr.apply(this,arguments)}function Dr(e,t){return Or.apply(this,arguments)}function Or(){return Or=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ar(t,n));case 1:case"end":return e.stop()}}),e)}))),Or.apply(this,arguments)}function Rr(e,t){return Pr.apply(this,arguments)}function Pr(){return Pr=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ar(t,n));case 1:case"end":return e.stop()}}),e)}))),Pr.apply(this,arguments)}function Lr(e,t){return Mr.apply(this,arguments)}function Mr(){return Mr=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ar(t,n));case 1:case"end":return e.stop()}}),e)}))),Mr.apply(this,arguments)}function Fr(e,t){return jr.apply(this,arguments)}function jr(){return jr=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ar(t,n));case 1:case"end":return e.stop()}}),e)}))),jr.apply(this,arguments)}function Ur(e,t){return Vr.apply(this,arguments)}function Vr(){return Vr=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_n(t,"POST","/v1/accounts:signInWithEmailLink",gn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Vr.apply(this,arguments)}function qr(e,t){return zr.apply(this,arguments)}function zr(){return zr=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_n(t,"POST","/v1/accounts:signInWithEmailLink",gn(t,n)));case 1:case"end":return e.stop()}}),e)}))),zr.apply(this,arguments)}var Br=function(e){x(n,e);var t=I(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return y(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return g(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Tr(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Ur(t,{email:this._email,oobCode:this._password}));case 5:Zt(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",_r(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",qr(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Zt(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(br);function Kr(e,t){return Gr.apply(this,arguments)}function Gr(){return Gr=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_n(t,"POST","/v1/accounts:signInWithIdp",gn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Gr.apply(this,arguments)}var Wr=function(e){x(n,e);var t=I(n);function n(){var e;return y(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return g(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Kr(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Kr(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Kr(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=J(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Zt("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=jt(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(br);function Qr(e,t){return Hr.apply(this,arguments)}function Hr(){return Hr=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kn(t,"POST","/v1/accounts:sendVerificationCode",gn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Hr.apply(this,arguments)}function $r(){return $r=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_n(t,"POST","/v1/accounts:signInWithPhoneNumber",gn(t,n)));case 1:case"end":return e.stop()}}),e)}))),$r.apply(this,arguments)}function Xr(){return Xr=d(f().mark((function e(t,n){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_n(t,"POST","/v1/accounts:signInWithPhoneNumber",gn(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Tn(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Xr.apply(this,arguments)}var Yr=v({},"USER_NOT_FOUND","user-not-found");function Jr(){return Jr=d(f().mark((function e(t,n){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",_n(t,"POST","/v1/accounts:signInWithPhoneNumber",gn(t,r),Yr));case 2:case"end":return e.stop()}}),e)}))),Jr.apply(this,arguments)}var Zr=function(e){x(n,e);var t=I(n);function n(e){var r;return y(this,n),(r=t.call(this,"phone","phone")).params=e,r}return g(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return $r.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Xr.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Jr.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(br);var ei=function(){function e(t){var n,r,i,a,o,u;y(this,e);var s=Z(ee(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);an(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return g(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Z(ee(e)).link,n=t?Z(ee(t)).deep_link_id:null,r=Z(ee(e)).deep_link_id;return(r?Z(ee(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(h_){return null}}}]),e}();var ti=function(){function e(){y(this,e),this.providerId=e.PROVIDER_ID}return g(e,null,[{key:"credential",value:function(e,t){return Br._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=ei.parseLink(t);return an(n,"argument-error"),Br._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();ti.PROVIDER_ID="password",ti.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ti.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var ni=function(){function e(t){y(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return g(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),ri=function(e){x(n,e);var t=I(n);function n(){var e;return y(this,n),(e=t.apply(this,arguments)).scopes=[],e}return g(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return oe(this.scopes)}}]),n}(ni),ii=function(e){x(n,e);var t=I(n);function n(){return y(this,n),t.apply(this,arguments)}return g(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return an(e.idToken||e.accessToken,"argument-error"),Wr._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return an("providerId"in t&&"signInMethod"in t,"argument-error"),Wr._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(ri),ai=function(e){x(n,e);var t=I(n);function n(){return y(this,n),t.call(this,"facebook.com")}return g(n,null,[{key:"credential",value:function(e){return Wr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(h_){return null}}}]),n}(ri);ai.FACEBOOK_SIGN_IN_METHOD="facebook.com",ai.PROVIDER_ID="facebook.com";var oi=function(e){x(n,e);var t=I(n);function n(){var e;return y(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return g(n,null,[{key:"credential",value:function(e,t){return Wr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(h_){return null}}}]),n}(ri);oi.GOOGLE_SIGN_IN_METHOD="google.com",oi.PROVIDER_ID="google.com";var ui=function(e){x(n,e);var t=I(n);function n(){return y(this,n),t.call(this,"github.com")}return g(n,null,[{key:"credential",value:function(e){return Wr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(h_){return null}}}]),n}(ri);ui.GITHUB_SIGN_IN_METHOD="github.com",ui.PROVIDER_ID="github.com";var si=function(e){x(n,e);var t=I(n);function n(e,r){var i;return y(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return g(n,[{key:"_getIdTokenResponse",value:function(e){return Kr(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Kr(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Kr(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(br),ci=function(e){x(n,e);var t=I(n);function n(e){return y(this,n),an(e.startsWith("saml."),"argument-error"),t.call(this,e)}return g(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=si.fromJSON(e);return an(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return si._create(r,n)}catch(i){return null}}}]),n}(ni),li=function(e){x(n,e);var t=I(n);function n(){return y(this,n),t.call(this,"twitter.com")}return g(n,null,[{key:"credential",value:function(e,t){return Wr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(h_){return null}}}]),n}(ri);function fi(e,t){return hi.apply(this,arguments)}function hi(){return hi=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_n(t,"POST","/v1/accounts:signUp",gn(t,n)));case 1:case"end":return e.stop()}}),e)}))),hi.apply(this,arguments)}li.TWITTER_SIGN_IN_METHOD="twitter.com",li.PROVIDER_ID="twitter.com";var di=function(){function e(t){y(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return g(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=d(f().mark((function t(n,r,i){var a,o,u,s,c=arguments;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Yn._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=pi(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=d(f().mark((function t(n,r,i){var a;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=pi(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function pi(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function vi(){return vi=d(f().mark((function e(t){var n,r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vr(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new di({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,fi(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,di._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),vi.apply(this,arguments)}var yi=function(e){x(n,e);var t=I(n);function n(e,r,i,a){var o,u;return y(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(b(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return g(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(W);function mi(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw yi._fromErrorAndOperation(e,n,t,r);throw n}))}function gi(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function ki(e,t){return bi.apply(this,arguments)}function bi(){return bi=d(f().mark((function e(t,n){var r,i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ie(t),e.next=3,_i(!0,r,n);case 3:return e.t0=Nn,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=gi(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),bi.apply(this,arguments)}function wi(e,t){return xi.apply(this,arguments)}function xi(){return xi=d(f().mark((function e(t,n){var r,i,a=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=jn,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",di._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),xi.apply(this,arguments)}function _i(e,t,n){return Si.apply(this,arguments)}function Si(){return Si=d(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bn(n);case 2:i=gi(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",an(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)}))),Si.apply(this,arguments)}function Ii(e,t){return Ei.apply(this,arguments)}function Ei(){return Ei=d(f().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,jn(t,mi(i,a,n,t),r);case 6:return an((o=e.sent).idToken,i,"internal-error"),an(u=Fn(o.idToken),i,"internal-error"),s=u.sub,an(t.uid===s,i,"user-mismatch"),e.abrupt("return",di._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Zt(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Ei.apply(this,arguments)}function Ti(e,t){return Ci.apply(this,arguments)}function Ci(){return Ci=d(f().mark((function e(t,n){var r,i,a,o,u=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,mi(t,i,n);case 4:return a=e.sent,e.next=7,di._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Ci.apply(this,arguments)}function Ai(e,t){return Ni.apply(this,arguments)}function Ni(){return Ni=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ti(vr(t),n));case 1:case"end":return e.stop()}}),e)}))),Ni.apply(this,arguments)}function Di(e,t){return Oi.apply(this,arguments)}function Oi(){return(Oi=d(f().mark((function e(t,n){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ie(t),e.next=3,_i(!1,r,n.providerId);case 3:return e.abrupt("return",wi(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ri(e,t){return Pi.apply(this,arguments)}function Pi(){return(Pi=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ii(ie(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Li(e,t){return Mi.apply(this,arguments)}function Mi(){return Mi=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_n(t,"POST","/v1/accounts:signInWithCustomToken",gn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Mi.apply(this,arguments)}function Fi(){return Fi=d(f().mark((function e(t,n){var r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vr(t),e.next=3,Li(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,di._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),Fi.apply(this,arguments)}var ji=function(){function e(t,n){y(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return g(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Ui._fromServerResponse(e,t):Zt(e,"internal-error")}}]),e}(),Ui=function(e){x(n,e);var t=I(n);function n(e){var r;return y(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return g(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(ji);function Vi(e,t,n){var r;an((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),an("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(an(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(an(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function qi(){return qi=d(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ie(t),a={requestType:"PASSWORD_RESET",email:n},r&&Vi(i,a,r),e.next=5,Rr(i,a);case 5:case"end":return e.stop()}}),e)}))),qi.apply(this,arguments)}function zi(){return zi=d(f().mark((function e(t,n,r){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wr(ie(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),zi.apply(this,arguments)}function Bi(){return Bi=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ir(ie(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),Bi.apply(this,arguments)}function Ki(e,t){return Gi.apply(this,arguments)}function Gi(){return Gi=d(f().mark((function e(t,n){var r,i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ie(t),e.next=3,wr(r,{oobCode:n});case 3:i=e.sent,an(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return an(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:an(i.mfaInfo,r,"internal-error");case 13:an(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=ji._fromServerResponse(vr(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),Gi.apply(this,arguments)}function Wi(){return Wi=d(f().mark((function e(t,n){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ki(ie(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),Wi.apply(this,arguments)}function Qi(e,t,n){return Hi.apply(this,arguments)}function Hi(){return Hi=d(f().mark((function e(t,n,r){var i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=vr(t),e.next=3,fi(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,di._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),Hi.apply(this,arguments)}function $i(e,t,n){return Ai(ie(e),ti.credential(t,n))}function Xi(){return Xi=d(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ie(t),a={requestType:"EMAIL_SIGNIN",email:n},an(r.handleCodeInApp,i,"argument-error"),r&&Vi(i,a,r),e.next=6,Lr(i,a);case 6:case"end":return e.stop()}}),e)}))),Xi.apply(this,arguments)}function Yi(){return Yi=d(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ie(t),an((a=ti.credentialWithLink(n,r||ln()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Ai(i,a));case 4:case"end":return e.stop()}}),e)}))),Yi.apply(this,arguments)}function Ji(e,t){return Zi.apply(this,arguments)}function Zi(){return Zi=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kn(t,"POST","/v1/accounts:createAuthUri",gn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Zi.apply(this,arguments)}function ea(){return ea=d(f().mark((function e(t,n){var r,i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fn()?ln():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Ji(ie(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),ea.apply(this,arguments)}function ta(){return(ta=d(f().mark((function e(t,n){var r,i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ie(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Vi(r.auth,a,n),e.next=8,Dr(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function na(){return(na=d(f().mark((function e(t,n,r){var i,a,o,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ie(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Vi(i.auth,o,r),e.next=8,Fr(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ra(e,t){return ia.apply(this,arguments)}function ia(){return ia=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),ia.apply(this,arguments)}function aa(){return(aa=d(f().mark((function e(t,n){var r,i,a,o,u,s,c;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=ie(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,jn(a,ra(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oa(e,t,n){return ua.apply(this,arguments)}function ua(){return ua=d(f().mark((function e(t,n,r){var i,a,o,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,jn(t,_r(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)}))),ua.apply(this,arguments)}var sa=g((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};y(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),ca=function(e){x(n,e);var t=I(n);function n(e,r,i,a){var o;return y(this,n),(o=t.call(this,e,r,i)).username=a,o}return g(n)}(sa),la=function(e){x(n,e);var t=I(n);function n(e,r){return y(this,n),t.call(this,e,"facebook.com",r)}return g(n)}(sa),fa=function(e){x(n,e);var t=I(n);function n(e,r){return y(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return g(n)}(ca),ha=function(e){x(n,e);var t=I(n);function n(e,r){return y(this,n),t.call(this,e,"google.com",r)}return g(n)}(sa),da=function(e){x(n,e);var t=I(n);function n(e,r,i){return y(this,n),t.call(this,e,"twitter.com",r,i)}return g(n)}(ca);function pa(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Fn(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new sa(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new la(a,i);case"github.com":return new fa(a,i);case"google.com":return new ha(a,i);case"twitter.com":return new da(a,i,e.screenName||null);case"custom":case"anonymous":return new sa(a,null);default:return new sa(a,r,i)}}(n)}var va=function(){function e(t,n,r){y(this,e),this.type=t,this.credential=n,this.auth=r}return g(e,[{key:"toJSON",value:function(){return{multiFactorSession:v({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),ya=function(){function e(t,n,r){y(this,e),this.session=t,this.hints=n,this.signInResolver=r}return g(e,[{key:"resolveSignIn",value:function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=vr(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return ji._fromServerResponse(r,e)}));an(i.mfaPendingCredential,r,"internal-error");var o=va._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=d(f().mark((function e(t){var a,u,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,di._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return an(n.user,r,"internal-error"),e.abrupt("return",di._forOperation(n.user,n.operationType,u));case 17:Zt(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function ma(e,t){return kn(e,"POST","/v2/accounts/mfaEnrollment:start",gn(e,t))}function ga(e,t){return kn(e,"POST","/v2/accounts/mfaEnrollment:withdraw",gn(e,t))}var ka=function(){function e(t){var n=this;y(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return ji._fromServerResponse(t.auth,e)})))}))}return g(e,[{key:"getSession",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=va,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user.auth,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=d(f().mark((function e(t,n){var r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,jn(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=d(f().mark((function e(t){var n,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.prev=4,e.next=7,jn(this.user,ga(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 7:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=11,this.user._updateTokensIfNecessary(i);case 11:return e.next=13,this.user.reload();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:case"end":return e.stop()}}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),ba=new WeakMap;var wa="__sak",xa=function(){function e(t,n){y(this,e),this.storageRetriever=t,this.type=n}return g(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(wa,"1"),this.storage.removeItem(wa),Promise.resolve(!0)):Promise.resolve(!1)}catch(h_){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var _a=function(e){x(n,e);var t=I(n);function n(){var e;return y(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=V();return ir(e)||lr(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=fr(),e._shouldAllowMigration=!0,e}return g(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);K()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=d(f().mark((function e(t,r){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft(_(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=d(f().mark((function e(t){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft(_(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft(_(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(xa);_a.type="LOCAL";var Sa=_a,Ia=function(e){x(n,e);var t=I(n);function n(){return y(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return g(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(xa);Ia.type="SESSION";var Ea=Ia;function Ta(e){return Promise.all(e.map(function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Ca=function(){function e(t){y(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return g(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=d(f().mark((function e(t){var n,r,i,a,o,u,s,c;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Ta(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Aa(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Ca.receivers=[];var Na=function(){function e(t){y(this,e),this.target=t,this.handlers=new Set}return g(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=d(f().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=Aa("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Da(){return window}function Oa(){return"undefined"!==typeof Da().WorkerGlobalScope&&"function"===typeof Da().importScripts}function Ra(){return Pa.apply(this,arguments)}function Pa(){return(Pa=d(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function La(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Ma="firebaseLocalStorageDb",Fa="firebaseLocalStorage",ja="fbase_key",Ua=function(){function e(t){y(this,e),this.request=t}return g(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Va(e,t){return e.transaction([Fa],t?"readwrite":"readonly").objectStore(Fa)}function qa(){var e=indexedDB.deleteDatabase(Ma);return new Ua(e).toPromise()}function za(){var e=indexedDB.open(Ma,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Fa,{keyPath:ja})}catch(r){n(r)}})),e.addEventListener("success",d(f().mark((function n(){var r;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Fa)){n.next=12;break}return r.close(),n.next=5,qa();case 5:return n.t0=t,n.next=8,za();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Ba(e,t,n){return Ka.apply(this,arguments)}function Ka(){return Ka=d(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Va(t,!0).put((v(i={},ja,n),v(i,"value",r),i)),e.abrupt("return",new Ua(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Ka.apply(this,arguments)}function Ga(e,t){return Wa.apply(this,arguments)}function Wa(){return Wa=d(f().mark((function e(t,n){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Va(t,!1).get(n),e.next=3,new Ua(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Wa.apply(this,arguments)}function Qa(e,t){var n=Va(e,!0).delete(t);return new Ua(n).toPromise()}var Ha=function(){function e(){y(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return g(e,[{key:"_openDb",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,za();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=d(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Oa()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=d(f().mark((function e(){var t=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Ca._getInstance(Oa()?self:null),this.receiver._subscribe("keyChanged",function(){var e=d(f().mark((function e(n,r){var i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=d(f().mark((function e(){var t,n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ra();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Na(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&La()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=d(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,za();case 5:return t=e.sent,e.next=8,Ba(t,wa,"1");case 8:return e.next=10,Qa(t,wa);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=d(f().mark((function e(t,n){var r=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Ba(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Ga(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=d(f().mark((function e(t){var n=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Qa(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=d(f().mark((function e(){var t,n,r,i,a,o,u,s,c,l,h;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Va(e,!1).getAll();return new Ua(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=k(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(f){i.e(f)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)h=l[c],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(d(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Ha.type="LOCAL";var $a=Ha;function Xa(e,t){return kn(e,"POST","/v2/accounts/mfaSignIn:start",gn(e,t))}function Ya(e){return Ja.apply(this,arguments)}function Ja(){return Ja=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kn(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),Ja.apply(this,arguments)}function Za(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=en("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function eo(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var to=1e12,no=function(){function e(t){y(this,e),this.auth=t,this.counter=to,this._widgets=new Map}return g(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new ro(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||to;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||to;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=d(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||to,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ro=function(){function e(t,n,r){var i=this;y(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;an(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return g(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var io=eo("rcb"),ao=new dn(3e4,6e4),oo=function(){function e(){var t;y(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=Da().grecaptcha)||void 0===t?void 0:t.render)}return g(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return an(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Da().grecaptcha):new Promise((function(r,i){var a=Da().setTimeout((function(){i(en(e,"network-request-failed"))}),ao.get());Da()[io]=function(){Da().clearTimeout(a),delete Da()[io];var o=Da().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(en(e,"internal-error"))},Za("".concat("https://www.google.com/recaptcha/api.js?","?").concat(J({onload:io,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(en(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=Da().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();var uo=function(){function e(){y(this,e)}return g(e,[{key:"load",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new no(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),so="recaptcha",co={theme:"light",type:"image"},lo=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},co),r=arguments.length>2?arguments[2]:void 0;y(this,e),this.parameters=n,this.type=so,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=vr(r),this.isInvisible="invisible"===this.parameters.size,an("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;an(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new uo:new oo,this.validateStartingState()}return g(e,[{key:"verify",value:function(){var e=d(f().mark((function e(){var t,n,r,i=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){an(!this.parameters.sitekey,this.auth,"argument-error"),an(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),an("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Da()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){an(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=d(f().mark((function e(){var t,n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=d(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return an(fn()&&!Oa(),this.auth,"internal-error"),e.next=3,fo();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Ya(this.auth);case 8:an(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return an(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function fo(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var ho=function(){function e(t,n){y(this,e),this.verificationId=t,this.onConfirmation=n}return g(e,[{key:"confirm",value:function(e){var t=Zr._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function po(){return po=d(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=vr(t),e.next=3,go(i,n,ie(r));case 3:return a=e.sent,e.abrupt("return",new ho(a,(function(e){return Ai(i,e)})));case 5:case"end":return e.stop()}}),e)}))),po.apply(this,arguments)}function vo(e,t,n){return yo.apply(this,arguments)}function yo(){return(yo=d(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ie(t),e.next=3,_i(!1,i,"phone");case 3:return e.next=5,go(i.auth,n,ie(r));case 5:return a=e.sent,e.abrupt("return",new ho(a,(function(e){return Di(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mo(){return(mo=d(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ie(t),e.next=3,go(i.auth,n,ie(r));case 3:return a=e.sent,e.abrupt("return",new ho(a,(function(e){return Ri(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function go(e,t,n){return ko.apply(this,arguments)}function ko(){return ko=d(f().mark((function e(t,n,r){var i,a,o,u,s,c,l,h,d;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,an("string"===typeof a,t,"argument-error"),an(r.type===so,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return an("enroll"===u.type,t,"internal-error"),e.next=13,ma(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return an("signin"===u.type,t,"internal-error"),an(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Xa(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Qr(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return h=e.sent,d=h.sessionInfo,e.abrupt("return",d);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),ko.apply(this,arguments)}function bo(){return(bo=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wi(ie(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var wo=function(){function e(t){y(this,e),this.providerId=e.PROVIDER_ID,this.auth=vr(t)}return g(e,[{key:"verifyPhoneNumber",value:function(e,t){return go(this.auth,e,ie(t))}}],[{key:"credential",value:function(e,t){return Zr._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Zr._fromTokenResponse(n,r):null}}]),e}();function xo(e,t){return t?cn(t):(an(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}wo.PROVIDER_ID="phone",wo.PHONE_SIGN_IN_METHOD="phone";var _o=function(e){x(n,e);var t=I(n);function n(e){var r;return y(this,n),(r=t.call(this,"custom","custom")).params=e,r}return g(n,[{key:"_getIdTokenResponse",value:function(e){return Kr(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Kr(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Kr(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(br);function So(e){return Ti(e.auth,new _o(e),e.bypassAuthState)}function Io(e){var t=e.auth,n=e.user;return an(n,t,"internal-error"),Ii(n,new _o(e),e.bypassAuthState)}function Eo(e){return To.apply(this,arguments)}function To(){return To=d(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,an(r=t.user,n,"internal-error"),e.abrupt("return",wi(r,new _o(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),To.apply(this,arguments)}var Co=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];y(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return g(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=d(f().mark((function t(n,r){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=d(f().mark((function e(t){var n,r,i,a,o,u,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return So;case"linkViaPopup":case"linkViaRedirect":return Eo;case"reauthViaPopup":case"reauthViaRedirect":return Io;default:Zt(this.auth,"internal-error")}}},{key:"resolve",value:function(e){un(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){un(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Ao=new dn(2e3,1e4);function No(e,t,n){return Do.apply(this,arguments)}function Do(){return Do=d(f().mark((function e(t,n,r){var i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=vr(t),nn(t,n,ni),a=xo(i,r),o=new Lo(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),Do.apply(this,arguments)}function Oo(){return Oo=d(f().mark((function e(t,n,r){var i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return nn((i=ie(t)).auth,n,ni),a=xo(i.auth,r),o=new Lo(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),Oo.apply(this,arguments)}function Ro(e,t,n){return Po.apply(this,arguments)}function Po(){return Po=d(f().mark((function e(t,n,r){var i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return nn((i=ie(t)).auth,n,ni),a=xo(i.auth,r),o=new Lo(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),Po.apply(this,arguments)}var Lo=function(e){x(n,e);var t=I(n);function n(e,r,i,a,o){var u;return y(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=b(u),u}return g(n,[{key:"executeNotNull",value:function(){var e=d(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return an(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=d(f().mark((function e(){var t,n=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return un(1===this.filter.length,"Popup operations only handle one event"),t=Aa(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(en(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(en(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(en(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Ao.get())}()}}]),n}(Co);Lo.currentPopupAction=null;var Mo="pendingRedirect",Fo=new Map,jo=function(e){x(n,e);var t=I(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return y(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return g(n,[{key:"execute",value:function(){var e=d(f().mark((function e(){var t,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Fo.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Uo(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Ft(_(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Fo.set(this.auth._key(),t);case 21:return this.bypassAuthState||Fo.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=d(f().mark((function e(t){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Ft(_(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Ft(_(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Co);function Uo(e,t){return Vo.apply(this,arguments)}function Vo(){return Vo=d(f().mark((function e(t,n){var r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Go(n),i=Ko(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),Vo.apply(this,arguments)}function qo(e,t){return zo.apply(this,arguments)}function zo(){return zo=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ko(t)._set(Go(n),"true"));case 1:case"end":return e.stop()}}),e)}))),zo.apply(this,arguments)}function Bo(e,t){Fo.set(e._key(),t)}function Ko(e){return cn(e._redirectPersistence)}function Go(e){return er(Mo,e.config.apiKey,e.name)}function Wo(e,t,n){return function(e,t,n){return Qo.apply(this,arguments)}(e,t,n)}function Qo(){return Qo=d(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=vr(t),nn(t,n,ni),e.next=4,i._initializationPromise;case 4:return a=xo(i,r),e.next=7,qo(a,i);case 7:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 8:case"end":return e.stop()}}),e)}))),Qo.apply(this,arguments)}function Ho(e,t,n){return function(e,t,n){return $o.apply(this,arguments)}(e,t,n)}function $o(){return $o=d(f().mark((function e(t,n,r){var i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return nn((i=ie(t)).auth,n,ni),e.next=4,i.auth._initializationPromise;case 4:return a=xo(i.auth,r),e.next=7,qo(a,i.auth);case 7:return e.next=9,nu(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 11:case"end":return e.stop()}}),e)}))),$o.apply(this,arguments)}function Xo(e,t,n){return function(e,t,n){return Yo.apply(this,arguments)}(e,t,n)}function Yo(){return Yo=d(f().mark((function e(t,n,r){var i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return nn((i=ie(t)).auth,n,ni),e.next=4,i.auth._initializationPromise;case 4:return a=xo(i.auth,r),e.next=7,_i(!1,i,n.providerId);case 7:return e.next=9,qo(a,i.auth);case 9:return e.next=11,nu(i);case 11:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 13:case"end":return e.stop()}}),e)}))),Yo.apply(this,arguments)}function Jo(e,t){return Zo.apply(this,arguments)}function Zo(){return Zo=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vr(t)._initializationPromise;case 2:return e.abrupt("return",eu(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),Zo.apply(this,arguments)}function eu(e,t){return tu.apply(this,arguments)}function tu(){return tu=d(f().mark((function e(t,n){var r,i,a,o,u,s=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=vr(t),a=xo(i,n),o=new jo(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),tu.apply(this,arguments)}function nu(e){return ru.apply(this,arguments)}function ru(){return(ru=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Aa("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var iu=function(){function e(t){y(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return g(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ou(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!ou(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(en(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(au(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(au(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function au(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function ou(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function uu(e){return su.apply(this,arguments)}function su(){return su=d(f().mark((function e(t){var n,r=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",kn(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),su.apply(this,arguments)}var cu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lu=/^https?/;function fu(){return fu=d(f().mark((function e(t){var n,r,i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,uu(t);case 4:n=e.sent,r=n.authorizedDomains,i=k(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!hu(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Zt(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),fu.apply(this,arguments)}function hu(e){var t=ln(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!lu.test(r))return!1;if(cu.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var du=new dn(3e4,6e4);function pu(){var e=Da().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=oe(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var vu=null;function yu(e){return vu=vu||function(e){return new Promise((function(t,n){var r,i,a;function o(){pu(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){pu(),n(en(e,"network-request-failed"))},timeout:du.get()})}if(null===(i=null===(r=Da().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Da().gapi)||void 0===a?void 0:a.load)){var u=eo("iframefcb");return Da()[u]=function(){gapi.load?o():n(en(e,"network-request-failed"))},Za("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw vu=null,e}))}(e),vu}var mu=new dn(5e3,15e3),gu="__/auth/iframe",ku="emulator/auth/iframe",bu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xu(e){var t=e.config;an(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?pn(t,ku):"https://".concat(e.config.authDomain,"/").concat(gu),r={apiKey:t.apiKey,appName:e.name,v:rt},i=wu.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(J(r).slice(1))}function _u(e){return Su.apply(this,arguments)}function Su(){return Su=d(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yu(t);case 2:return n=e.sent,an(r=Da().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:xu(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bu,dontclear:!0},(function(e){return new Promise(function(){var n=d(f().mark((function n(r,i){var a,o,u;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){Da().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=en(t,"network-request-failed"),o=Da().setTimeout((function(){i(a)}),mu.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Su.apply(this,arguments)}var Iu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Eu=function(){function e(t){y(this,e),this.window=t,this.associatedEvent=null}return g(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Tu(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},Iu),{width:r.toString(),height:i.toString(),top:a,left:o}),l=V().toLowerCase();n&&(u=ar(l)?"_blank":n),rr(l)&&(t=t||"http://localhost",s.scrollbars="yes");var f=Object.entries(s).reduce((function(e,t){var n=c(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return lr(arguments.length>0&&void 0!==arguments[0]?arguments[0]:V())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==u)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",u),new Eu(null);var h=window.open(t||"",u,f);an(h,e,"popup-blocked");try{h.focus()}catch(d){}return new Eu(h)}var Cu="__/auth/handler",Au="emulator/auth/handler";function Nu(e,t,n,r,i,a){an(e.config.authDomain,e,"auth-domain-config-required"),an(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:rt,eventId:i};if(t instanceof ni){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var l=c(s[u],2),f=l[0],h=l[1];o[f]=h}}if(t instanceof ri){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,y=Object.keys(p);v<y.length;v++){var m=y[v];void 0===p[m]&&delete p[m]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Cu);return pn(t,Au)}(e),"?").concat(J(p).slice(1))}var Du="webStorageSupport",Ou=function(){function e(){y(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ea,this._completeRedirectFn=eu,this._overrideRedirectResult=Bo}return g(e,[{key:"_openPopup",value:function(){var e=d(f().mark((function e(t,n,r,i){var a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return un(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Nu(t,n,r,ln(),i),e.abrupt("return",Tu(t,o,Aa()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=d(f().mark((function e(t,n,r,i){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Nu(t,n,r,ln(),i),Da().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(un(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=d(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_u(t);case 2:return n=e.sent,r=new iu(t),n.register("authEvent",(function(e){return an(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Du,{type:Du},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Du];void 0!==i&&t(!!i),Zt(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return fu.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return fr()||ir()||lr()}}]),e}(),Ru=Ou,Pu=function(){function e(t){y(this,e),this.factorId=t}return g(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return on("unexpected MultiFactorSessionType")}}}]),e}(),Lu=function(e){x(n,e);var t=I(n);function n(e){var r;return y(this,n),(r=t.call(this,"phone")).credential=e,r}return g(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return kn(e,"POST","/v2/accounts/mfaEnrollment:finalize",gn(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return kn(e,"POST","/v2/accounts/mfaSignIn:finalize",gn(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(Pu),Mu=function(){function e(){y(this,e)}return g(e,null,[{key:"assertion",value:function(e){return Lu._fromCredential(e)}}]),e}();Mu.FACTOR_ID="phone";var Fu="@firebase/auth",ju="0.21.5",Uu=function(){function e(t){y(this,e),this.auth=t,this.internalListeners=new Map}return g(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){an(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var Vu,qu=j("authIdTokenMaxAge")||300,zu=null,Bu=function(e){return function(){var t=d(f().mark((function t(n){var r,i,a;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=n,!t.t0){t.next=5;break}return t.next=4,n.getIdTokenResult();case 4:t.t0=t.sent;case 5:if(r=t.t0,!((i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3)&&i>qu)){t.next=9;break}return t.abrupt("return");case 9:if(a=null===r||void 0===r?void 0:r.token,zu!==a){t.next=12;break}return t.abrupt("return");case 12:return zu=a,t.next=15,fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:"Bearer ".concat(a)}:{}});case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};function Ku(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at(),t=Ye(e,"auth");if(t.isInitialized())return t.getImmediate();var n=function(e,t){var n=Ye(e,"auth");if(n.isInitialized()){var r=n.getImmediate();if(X(n.getOptions(),null!==t&&void 0!==t?t:{}))return r;Zt(r,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Ru,persistence:[$a,Sa,Ea]}),r=j("authTokenSyncURL");if(r){var i=Bu(r);!function(e,t,n){ie(e).beforeAuthStateChanged(t,n)}(n,i,(function(){return i(n.currentUser)})),function(e,t,n,r){ie(e).onIdTokenChanged(t,n,r)}(n,(function(e){return i(e)}))}var a=M("auth");return a&&mr(n,"http://".concat(a)),n}function Gu(){return window}Vu="Browser",Xe(new ue("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){an(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),an(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:Vu,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hr(Vu)},i=new pr(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(cn);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Xe(new ue("auth-internal",(function(e){return function(e){return new Uu(e)}(vr(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),ct(Fu,ju,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Vu)),ct(Fu,ju,"esm2017");var Wu=2e3;function Qu(e,t,n){return Hu.apply(this,arguments)}function Hu(){return Hu=d(f().mark((function e(t,n,r){var i,a,o,u,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Gu(),o=a.BuildInfo,un(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,es(n.sessionId);case 4:return u=e.sent,s={},lr()?s.ibi=o.packageName:ur()?s.apn=o.packageName:Zt(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",Nu(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),Hu.apply(this,arguments)}function $u(){return $u=d(f().mark((function e(t){var n,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Gu(),r=n.BuildInfo,i={},lr()?i.iosBundleId=r.packageName:ur()?i.androidPackageName=r.packageName:Zt(t,"operation-not-supported-in-this-environment"),e.next=5,uu(t,i);case 5:case"end":return e.stop()}}),e)}))),$u.apply(this,arguments)}function Xu(e){var t=Gu().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function Yu(e,t,n){return Ju.apply(this,arguments)}function Ju(){return Ju=d(f().mark((function e(t,n,r){var i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Gu(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(en(t,"redirect-cancelled-by-user"))}),Wu))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),ur()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Ju.apply(this,arguments)}function Zu(e){var t,n,r,i,a,o,u,s,c,l,f=Gu();an("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),an("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),an("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),an("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),an("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function es(e){return ts.apply(this,arguments)}function ts(){return(ts=d(f().mark((function e(t){var n,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ns(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ns(e){if(un(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var rs=20,is=function(e){x(n,e);var t=I(n);function n(){var e;return y(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return g(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Ft(_(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(iu);function as(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:ls(),postBody:null,tenantId:e.tenantId,error:en(e,"no-auth-event")}}function os(e,t){return fs()._set(hs(e),t)}function us(e){return ss.apply(this,arguments)}function ss(){return ss=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fs()._get(hs(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,fs()._remove(hs(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),ss.apply(this,arguments)}function cs(e,t){var n,r,i=function(e){var t=ds(e),n=t.link?decodeURIComponent(t.link):void 0,r=ds(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return ds(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=ds(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?en(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function ls(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<rs;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function fs(){return cn(Sa)}function hs(e){return er("authEvent",e.config.apiKey,e.name)}function ds(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t=Mt(e.split("?"));t[0];return Z(t.slice(1).join("?"))}var ps=function(){function e(){y(this,e),this._redirectPersistence=Ea,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=eu,this._overrideRedirectResult=Bo}return g(e,[{key:"_initialize",value:function(){var e=d(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new is(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Zt(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=d(f().mark((function e(t,n,r,i){var a,o,u,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zu(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Fo.clear(),e.next=10,this._originValidation(t);case 10:return o=as(t,r,i),e.next=13,os(t,o);case 13:return e.next=15,Qu(t,o,n);case 15:return u=e.sent,e.next=18,Xu(u);case 18:return s=e.sent,e.abrupt("return",Yu(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return $u.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Gu(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(d(f().mark((function n(){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,us(e);case 2:t.onEvent(ys());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=d(f().mark((function n(r){var i,a;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,us(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=cs(i,r.url)),t.onEvent(a||ys());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");Gu().handleOpenURL=function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),vs=ps;function ys(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:en("no-auth-event")}}var ms=1e3;function gs(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function ks(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V();return!("file:"!==gs()&&"ionic:"!==gs()&&"capacitor:"!==gs()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function bs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V();return K()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V();return/Edge\/\d+/.test(e)}(e)}function ws(){try{var e=self.localStorage,t=Aa();if(e)return e.setItem(t,"1"),e.removeItem(t),!bs()||G()}catch(n){return xs()&&G()}return!1}function xs(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function _s(){return("http:"===gs()||"https:"===gs()||z()||ks())&&!(B()||q())&&ws()&&!xs()}function Ss(){return ks()&&"undefined"!==typeof document}function Is(){return Es.apply(this,arguments)}function Es(){return(Es=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ss()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),ms);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ts={LOCAL:"local",NONE:"none",SESSION:"session"},Cs=an,As="persistence";function Ns(e,t){Cs(Object.values(Ts).includes(t),e,"invalid-persistence-type"),B()?Cs(t!==Ts.SESSION,e,"unsupported-persistence-type"):q()?Cs(t===Ts.NONE,e,"unsupported-persistence-type"):xs()?Cs(t===Ts.NONE||t===Ts.LOCAL&&G(),e,"unsupported-persistence-type"):Cs(t===Ts.NONE||ws(),e,"unsupported-persistence-type")}function Ds(e){return Os.apply(this,arguments)}function Os(){return Os=d(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=Rs(),r=er(As,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),Os.apply(this,arguments)}function Rs(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var Ps=an,Ls=function(){function e(){y(this,e),this.browserResolver=cn(Ru),this.cordovaResolver=cn(vs),this.underlyingResolver=null,this._redirectPersistence=Ea,this._completeRedirectFn=eu,this._overrideRedirectResult=Bo}return g(e,[{key:"_initialize",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=d(f().mark((function e(t,n,r,i){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=d(f().mark((function e(t,n,r,i){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return Ss()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return Ps(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=d(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Is();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ms(e){return e.unwrap()}function Fs(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new zs(e,function(e,t){var n,r=ie(e),i=t;return an(t.customData.operationType,r,"argument-error"),an(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),ya._fromError(r,i)}(e,t));else if(r){var i=js(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function js(e){var t=(e instanceof W?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof W)&&"temporaryProof"in t&&"phoneNumber"in t)return wo.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Vt.PASSWORD)return null;switch(r){case Vt.GOOGLE:n=oi;break;case Vt.FACEBOOK:n=ai;break;case Vt.GITHUB:n=ui;break;case Vt.TWITTER:n=li;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?si._create(r,u):Wr._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new ii(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof W?n.credentialFromError(e):n.credentialFromResult(e)}function Us(e,t){return t.catch((function(t){throw t instanceof W&&Fs(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,js(t)),additionalUserInfo:pa(e),user:Bs.getOrCreate(r)}}))}function Vs(e,t){return qs.apply(this,arguments)}function qs(){return qs=d(f().mark((function e(t,n){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Us(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),qs.apply(this,arguments)}var zs=function(){function e(t,n){y(this,e),this.resolver=n,this.auth=t.wrapped()}return g(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Us(Ms(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),Bs=function(){function e(t){y(this,e),this._delegate=t,this.multiFactor=function(e){var t=ie(e);return ba.has(t)||ba.set(t,ka._fromUser(t)),ba.get(t)}(t)}return g(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Us(this.auth,Di(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vs(this.auth,vo(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Us(this.auth,Ro(this._delegate,t,Ls)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ds(vr(this.auth));case 2:return e.abrupt("return",Xo(this._delegate,t,Ls));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Us(this.auth,Ri(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Vs(this.auth,function(e,t,n){return mo.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Us(this.auth,function(e,t,n){return Oo.apply(this,arguments)}(this._delegate,e,Ls))}},{key:"reauthenticateWithRedirect",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ds(vr(this.auth));case 2:return e.abrupt("return",Ho(this._delegate,t,Ls));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return ta.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ki(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return oa(ie(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return oa(ie(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return bo.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return aa.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return na.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();Bs.USER_MAP=new WeakMap;var Ks=an,Gs=function(){function e(t,n){if(y(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Ks(r,"invalid-api-key",{appName:t.name}),Ks(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?Ls:void 0;this._delegate=n.initialize({options:{persistence:Qs(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Ht),this.linkUnderlyingAuth()}return g(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Bs.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){mr(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Bi.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Ki(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return zi.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Us(this._delegate,Qi(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return ea.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=ei.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=d(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ks(_s(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Jo(this._delegate,Ls);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Us(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){vr(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Ws(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Ws(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Xi.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return qi.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=d(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ns(this._delegate,t),e.t0=t,e.next=e.t0===Ts.SESSION?4:e.t0===Ts.LOCAL?6:e.t0===Ts.NONE?11:13;break;case 4:return n=Ea,e.abrupt("break",14);case 6:return e.next=8,cn($a)._isAvailable();case 8:return r=e.sent,n=r?$a:Sa,e.abrupt("break",14);case 11:return n=Zn,e.abrupt("break",14);case 13:return e.abrupt("return",Zt("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Us(this._delegate,function(e){return vi.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Us(this._delegate,Ai(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Us(this._delegate,function(e,t){return Fi.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Us(this._delegate,$i(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Us(this._delegate,function(e,t,n){return Yi.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Vs(this._delegate,function(e,t,n){return po.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ks(_s(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Us(this._delegate,No(this._delegate,t,Ls)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ks(_s(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Ds(this._delegate);case 3:return e.abrupt("return",Wo(this._delegate,t,Ls));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Wi.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Ws(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&Bs.getOrCreate(e))},error:t,complete:n}}function Qs(e,t){var n=function(e,t){var n=Rs();if(!n)return[];var r=er(As,e,t);switch(n.getItem(r)){case Ts.NONE:return[Zn];case Ts.LOCAL:return[$a,Ea];case Ts.SESSION:return[Ea];default:return[]}}(e,t);if("undefined"===typeof self||n.includes($a)||n.push($a),"undefined"!==typeof window)for(var r=0,i=[Sa,Ea];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Zn)||n.push(Zn),n}Gs.Persistence=Ts;var Hs=function(){function e(){y(this,e),this.providerId="phone",this._delegate=new wo(Ms(Lt.auth()))}return g(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return wo.credential(e,t)}}]),e}();Hs.PHONE_SIGN_IN_METHOD=wo.PHONE_SIGN_IN_METHOD,Hs.PROVIDER_ID=wo.PROVIDER_ID;var $s,Xs=an,Ys=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Lt.app();y(this,e),Xs(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new lo(t,n,i.auth()),this.type=this._delegate.type}return g(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();($s=Lt).INTERNAL.registerComponent(new ue("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Gs(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:qt,PASSWORD_RESET:zt,RECOVER_EMAIL:Bt,REVERT_SECOND_FACTOR_ADDITION:Kt,VERIFY_AND_CHANGE_EMAIL:Gt,VERIFY_EMAIL:Wt}},EmailAuthProvider:ti,FacebookAuthProvider:ai,GithubAuthProvider:ui,GoogleAuthProvider:oi,OAuthProvider:ii,SAMLAuthProvider:ci,PhoneAuthProvider:Hs,PhoneMultiFactorGenerator:Mu,RecaptchaVerifier:Ys,TwitterAuthProvider:li,Auth:Gs,AuthCredential:br,Error:W}).setInstantiationMode("LAZY").setMultipleInstances(!1)),$s.registerVersion("@firebase/auth-compat","0.3.5");var Js,Zs="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},ec={},tc=tc||{},nc=Zs||self;function rc(){}function ic(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function ac(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var oc="closure_uid_"+(1e9*Math.random()>>>0),uc=0;function sc(e,t,n){return e.call.apply(e.bind,arguments)}function cc(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function lc(e,t,n){return(lc=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?sc:cc).apply(null,arguments)}function fc(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function hc(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function dc(){this.s=this.s,this.o=this.o}dc.prototype.s=!1,dc.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function(e){Object.prototype.hasOwnProperty.call(e,oc)&&e[oc]||(e[oc]=++uc)}(this)},dc.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var pc=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function vc(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function yc(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(ic(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function mc(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}mc.prototype.h=function(){this.defaultPrevented=!0};var gc=function(){if(!nc.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{nc.addEventListener("test",rc,t),nc.removeEventListener("test",rc,t)}catch(QE){}return e}();function kc(e){return/^[\s\xa0]*$/.test(e)}var bc=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function wc(e,t){return e<t?-1:e>t?1:0}function xc(){var e=nc.navigator;return e&&(e=e.userAgent)?e:""}function _c(e){return-1!=xc().indexOf(e)}function Sc(e){return Sc[" "](e),e}Sc[" "]=rc;var Ic,Ec=_c("Opera"),Tc=_c("Trident")||_c("MSIE"),Cc=_c("Edge"),Ac=Cc||Tc,Nc=_c("Gecko")&&!(-1!=xc().toLowerCase().indexOf("webkit")&&!_c("Edge"))&&!(_c("Trident")||_c("MSIE"))&&!_c("Edge"),Dc=-1!=xc().toLowerCase().indexOf("webkit")&&!_c("Edge");function Oc(){var e=nc.document;return e?e.documentMode:void 0}e:{var Rc="",Pc=function(){var e=xc();return Nc?/rv:([^\);]+)(\)|;)/.exec(e):Cc?/Edge\/([\d\.]+)/.exec(e):Tc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Dc?/WebKit\/(\S+)/.exec(e):Ec?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Pc&&(Rc=Pc?Pc[1]:""),Tc){var Lc=Oc();if(null!=Lc&&Lc>parseFloat(Rc)){Ic=String(Lc);break e}}Ic=Rc}var Mc,Fc={};function jc(){return function(e){var t=Fc;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=bc(String(Ic)).split("."),n=bc("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=wc(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||wc(0==a[2].length,0==o[2].length)||wc(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(nc.document&&Tc){var Uc=Oc();Mc=Uc||(parseInt(Ic,10)||void 0)}else Mc=void 0;var Vc=Mc;function qc(e,t){if(mc.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Nc){e:{try{Sc(t.nodeName);var i=!0;break e}catch(WE){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:zc[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&qc.X.h.call(this)}}hc(qc,mc);var zc={2:"touch",3:"pen",4:"mouse"};qc.prototype.h=function(){qc.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Bc="closure_listenable_"+(1e6*Math.random()|0),Kc=0;function Gc(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++Kc,this.ba=this.ea=!1}function Wc(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function Qc(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Hc(e){var t={};for(var n in e)t[n]=e[n];return t}var $c="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Xc(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<$c.length;a++)n=$c[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Yc(e){this.src=e,this.g={},this.h=0}function Jc(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=pc(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Wc(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Zc(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ba&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}Yc.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Zc(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new Gc(t,this.src,a,!!r,i)).ea=n,e.push(t)),t};var el="closure_lm_"+(1e6*Math.random()|0),tl={};function nl(e,t,n,r,i){if(r&&r.once)return il(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)nl(e,t[a],n,r,i);return null}return n=fl(n),e&&e[Bc]?e.N(t,n,ac(r)?!!r.capture:!!r,i):rl(e,t,n,!1,r,i)}function rl(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=ac(i)?!!i.capture:!!i,u=cl(e);if(u||(e[el]=u=new Yc(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=sl;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)gc||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ul(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function il(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)il(e,t[a],n,r,i);return null}return n=fl(n),e&&e[Bc]?e.O(t,n,ac(r)?!!r.capture:!!r,i):rl(e,t,n,!0,r,i)}function al(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)al(e,t[a],n,r,i);else r=ac(r)?!!r.capture:!!r,n=fl(n),e&&e[Bc]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Zc(a=e.g[t],n,r,i))&&(Wc(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=cl(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Zc(t,n,r,i)),(n=-1<e?t[e]:null)&&ol(n))}function ol(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[Bc])Jc(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ul(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=cl(t))?(Jc(n,e),0==n.h&&(n.src=null,t[el]=null)):Wc(e)}}}function ul(e){return e in tl?tl[e]:tl[e]="on"+e}function sl(e,t){if(e.ba)e=!0;else{t=new qc(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&ol(e),e=n.call(r,t)}return e}function cl(e){return(e=e[el])instanceof Yc?e:null}var ll="__closure_events_fn_"+(1e9*Math.random()>>>0);function fl(e){return"function"===typeof e?e:(e[ll]||(e[ll]=function(t){return e.handleEvent(t)}),e[ll])}function hl(){dc.call(this),this.i=new Yc(this),this.P=this,this.I=null}function dl(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new mc(t,e);else if(t instanceof mc)t.target=t.target||e;else{var i=t;Xc(t=new mc(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=pl(o,r,!0,t)&&i}if(i=pl(o=t.g=e,r,!0,t)&&i,i=pl(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=pl(o=t.g=n[a],r,!1,t)&&i}function pl(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ba&&o.capture==n){var u=o.listener,s=o.ha||o.src;o.ea&&Jc(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}hc(hl,dc),hl.prototype[Bc]=!0,hl.prototype.removeEventListener=function(e,t,n,r){al(this,e,t,n,r)},hl.prototype.M=function(){if(hl.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Wc(n[r]);delete t.g[e],t.h--}}this.I=null},hl.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},hl.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var vl=nc.JSON.stringify;function yl(){var e=Sl,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var ml,gl=function(){function e(){y(this,e),this.h=this.g=null}return g(e,[{key:"add",value:function(e,t){var n=kl.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),kl=new(function(){function e(t,n){y(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return g(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new bl}),(function(e){return e.reset()})),bl=function(){function e(){y(this,e),this.next=this.g=this.h=null}return g(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function wl(e){nc.setTimeout((function(){throw e}),0)}function xl(e,t){ml||function(){var e=nc.Promise.resolve(void 0);ml=function(){e.then(Il)}}(),_l||(ml(),_l=!0),Sl.add(e,t)}var _l=!1,Sl=new gl;function Il(){for(var e;e=yl();){try{e.h.call(e.g)}catch(QE){wl(QE)}var t=kl;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}_l=!1}function El(e,t){hl.call(this),this.h=e||1,this.g=t||nc,this.j=lc(this.lb,this),this.l=Date.now()}function Tl(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function Cl(e,t,n){if("function"===typeof e)n&&(e=lc(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=lc(e.handleEvent,e)}return 2147483647<Number(t)?-1:nc.setTimeout(e,t||0)}function Al(e){e.g=Cl((function(){e.g=null,e.i&&(e.i=!1,Al(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}hc(El,hl),(Js=El.prototype).ca=!1,Js.R=null,Js.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),dl(this,"tick"),this.ca&&(Tl(this),this.start()))}},Js.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Js.M=function(){El.X.M.call(this),Tl(this),delete this.g};var Nl=function(e){x(n,e);var t=I(n);function n(e,r){var i;return y(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return g(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Al(this)}},{key:"M",value:function(){Ft(_(n.prototype),"M",this).call(this),this.g&&(nc.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(dc);function Dl(e){dc.call(this),this.h=e,this.g={}}hc(Dl,dc);var Ol=[];function Rl(e,t,n,r){Array.isArray(n)||(n&&(Ol[0]=n.toString()),n=Ol);for(var i=0;i<n.length;i++){var a=nl(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Pl(e){Qc(e.g,(function(e,t){this.g.hasOwnProperty(t)&&ol(e)}),e),e.g={}}function Ll(){this.g=!0}function Ml(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return vl(n)}catch(UE){return t}}(e,n)+(r?" "+r:"")}))}Dl.prototype.M=function(){Dl.X.M.call(this),Pl(this)},Dl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ll.prototype.Aa=function(){this.g=!1},Ll.prototype.info=function(){};var Fl={},jl=null;function Ul(){return jl=jl||new hl}function Vl(e){mc.call(this,Fl.Pa,e)}function ql(e){var t=Ul();dl(t,new Vl(t))}function zl(e,t){mc.call(this,Fl.STAT_EVENT,e),this.stat=t}function Bl(e){var t=Ul();dl(t,new zl(t,e))}function Kl(e,t){mc.call(this,Fl.Qa,e),this.size=t}function Gl(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return nc.setTimeout((function(){e()}),t)}Fl.Pa="serverreachability",hc(Vl,mc),Fl.STAT_EVENT="statevent",hc(zl,mc),Fl.Qa="timingevent",hc(Kl,mc);var Wl={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Ql={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Hl(){}function $l(e){return e.h||(e.h=e.i())}function Xl(){}Hl.prototype.h=null;var Yl,Jl={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Zl(){mc.call(this,"d")}function ef(){mc.call(this,"c")}function tf(){}function nf(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new Dl(this),this.O=af,e=Ac?125:void 0,this.T=new El(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new rf}function rf(){this.i=null,this.g="",this.h=!1}hc(Zl,mc),hc(ef,mc),hc(tf,Hl),tf.prototype.g=function(){return new XMLHttpRequest},tf.prototype.i=function(){return{}},Yl=new tf;var af=45e3,of={},uf={};function sf(e,t,n){e.K=1,e.v=Tf(xf(t)),e.s=n,e.P=!0,cf(e,null)}function cf(e,t){e.F=Date.now(),df(e),e.A=xf(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),Vf(n.i,"t",r),e.C=0,n=e.l.H,e.h=new rf,e.g=Vh(e.l,n?t:null,!e.s),0<e.N&&(e.L=new Nl(lc(e.La,e,e.g),e.N)),Rl(e.S,e.g,"readystatechange",e.ib),t=e.H?Hc(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),ql(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function lf(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function ff(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=hf(e,n))==uf){4==t&&(e.o=4,Bl(14),i=!1),Ml(e.j,e.m,null,"[Incomplete Response]");break}if(r==of){e.o=4,Bl(15),Ml(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Ml(e.j,e.m,r,null),gf(e,r)}lf(e)&&r!=uf&&r!=of&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Bl(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Oh(t),t.K=!0,Bl(11))):(Ml(e.j,e.m,n,"[Invalid Chunked Response]"),mf(e),yf(e))}function hf(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?uf:(n=Number(t.substring(n,r)),isNaN(n)?of:(r+=1)+n>t.length?uf:(t=t.substr(r,n),e.C=r+n,t))}function df(e){e.V=Date.now()+e.O,pf(e,e.O)}function pf(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Gl(lc(e.gb,e),t)}function vf(e){e.B&&(nc.clearTimeout(e.B),e.B=null)}function yf(e){0==e.l.G||e.I||Lh(e.l,e)}function mf(e){vf(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Tl(e.T),Pl(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function gf(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Qf(n.h,e)))if(!e.J&&Qf(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Ph(n),Sh(n)}Dh(n),Bl(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=Gl(lc(n.cb,n),6e3));if(1>=Wf(n.h)&&n.ja){try{n.ja()}catch(a){}n.ja=void 0}}else Fh(n,11)}else if((e.J||n.g==e)&&Ph(n),!kc(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.I=a[1],n.ka=a[2];var o=a[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var u=a[4];null!=u&&(n.Ca=u,n.j.info("SVER="+n.Ca));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.h;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(Hf(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.za=h,Ef(r.F,r.D,h))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var d=e;if((r=n).sa=Uh(r,r.H?r.ka:null,r.V),d.J){$f(r.h,d);var p=d,v=r.J;v&&p.setTimeout(v),p.B&&(vf(p),df(p)),r.g=d}else Nh(r);0<n.i.length&&Eh(n)}else"stop"!=a[0]&&"close"!=a[0]||Fh(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Fh(n,7):_h(n):"noop"!=a[0]&&n.l&&n.l.wa(a),n.A=0)}ql()}catch(a){}}function kf(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(ic(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(ic(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(ic(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Js=nf.prototype).setTimeout=function(e){this.O=e},Js.ib=function(e){e=e.target;var t=this.L;t&&3==mh(e)?t.l():this.La(e)},Js.La=function(e){try{if(e==this.g)e:{var t=mh(this.g),n=this.g.Ea();this.g.aa();if(!(3>t)&&(3!=t||Ac||this.g&&(this.h.h||this.g.fa()||gh(this.g)))){this.I||4!=t||7==n||ql(),vf(this);var r=this.g.aa();this.Y=r;t:if(lf(this)){var i=gh(this.g);e="";var a=i.length,o=4==mh(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){mf(this),yf(this);var u="";break t}this.h.i=new nc.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.U,t,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!kc(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,Bl(12),mf(this),yf(this);break e}Ml(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,gf(this,r)}this.P?(ff(this,t,u),Ac&&this.i&&3==t&&(Rl(this.S,this.T,"tick",this.hb),this.T.start())):(Ml(this.j,this.m,u,null),gf(this,u)),4==t&&mf(this),this.i&&!this.I&&(4==t?Lh(this.l,this):(this.i=!1,df(this)))}else 400==r&&0<u.indexOf("Unknown SID")?(this.o=3,Bl(12)):(this.o=0,Bl(13)),mf(this),yf(this)}}}catch(t){}},Js.hb=function(){if(this.g){var e=mh(this.g),t=this.g.fa();this.C<t.length&&(vf(this),ff(this,e,t),this.i&&4!=e&&df(this))}},Js.cancel=function(){this.I=!0,mf(this)},Js.gb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(ql(),Bl(17)),mf(this),this.o=2,yf(this)):pf(this,this.V-e)};var bf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wf(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof wf){this.h=void 0!==t?t:e.h,_f(this,e.j),this.s=e.s,this.g=e.g,Sf(this,e.m),this.l=e.l,t=e.i;var n=new Mf;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),If(this,n),this.o=e.o}else e&&(n=String(e).match(bf))?(this.h=!!t,_f(this,n[1]||"",!0),this.s=Cf(n[2]||""),this.g=Cf(n[3]||"",!0),Sf(this,n[4]),this.l=Cf(n[5]||"",!0),If(this,n[6]||"",!0),this.o=Cf(n[7]||"")):(this.h=!!t,this.i=new Mf(null,this.h))}function xf(e){return new wf(e)}function _f(e,t,n){e.j=n?Cf(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Sf(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function If(e,t,n){t instanceof Mf?(e.i=t,function(e,t){t&&!e.j&&(Ff(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(jf(this,t),Vf(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Af(t,Pf)),e.i=new Mf(t,e.h))}function Ef(e,t,n){e.i.set(t,n)}function Tf(e){return Ef(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Cf(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Af(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Nf),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Nf(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}wf.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Af(t,Df,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Af(t,Df,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Af(n,"/"==n.charAt(0)?Rf:Of,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Af(n,Lf)),e.join("")};var Df=/[#\/\?@]/g,Of=/[#\?:]/g,Rf=/[#\?]/g,Pf=/[#\?@]/g,Lf=/#/g;function Mf(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Ff(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function jf(e,t){Ff(e),t=qf(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Uf(e,t){return Ff(e),t=qf(e,t),e.g.has(t)}function Vf(e,t,n){jf(e,t),0<n.length&&(e.i=null,e.g.set(qf(e,t),vc(n)),e.h+=n.length)}function qf(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Js=Mf.prototype).add=function(e,t){Ff(this),this.i=null,e=qf(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Js.forEach=function(e,t){Ff(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Js.oa=function(){Ff(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Js.W=function(e){Ff(this);var t=[];if("string"===typeof e)Uf(this,e)&&(t=t.concat(this.g.get(qf(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Js.set=function(e,t){return Ff(this),this.i=null,Uf(this,e=qf(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Js.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},Js.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var zf=g((function e(t,n){y(this,e),this.h=t,this.g=n}));function Bf(e){this.l=e||Kf,nc.PerformanceNavigationTiming?e=0<(e=nc.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(nc.g&&nc.g.Ga&&nc.g.Ga()&&nc.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Kf=10;function Gf(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Wf(e){return e.h?1:e.g?e.g.size:0}function Qf(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Hf(e,t){e.g?e.g.add(t):e.h=t}function $f(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Xf(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=k(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return vc(e.i)}function Yf(){}function Jf(){this.g=new Yf}function Zf(e,t,n){var r=n||"";try{kf(e,(function(e,n){var i=e;ac(e)&&(i=vl(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function eh(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(WE){}}function th(e){this.l=e.ac||null,this.j=e.jb||!1}function nh(e,t){hl.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=rh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Bf.prototype.cancel=function(){if(this.i=Xf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=k(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Yf.prototype.stringify=function(e){return nc.JSON.stringify(e,void 0)},Yf.prototype.parse=function(e){return nc.JSON.parse(e,void 0)},hc(th,Hl),th.prototype.g=function(){return new nh(this.l,this.j)},th.prototype.i=function(e){return function(){return e}}({}),hc(nh,hl);var rh=0;function ih(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function ah(e){e.readyState=4,e.l=null,e.j=null,e.A=null,oh(e)}function oh(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Js=nh.prototype).open=function(e,t){if(this.readyState!=rh)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,oh(this)},Js.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||nc).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},Js.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ah(this)),this.readyState=rh},Js.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,oh(this)),this.g&&(this.readyState=3,oh(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof nc.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ih(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},Js.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ah(this):oh(this),3==this.readyState&&ih(this)}},Js.Va=function(e){this.g&&(this.response=this.responseText=e,ah(this))},Js.Ua=function(e){this.g&&(this.response=e,ah(this))},Js.ga=function(){this.g&&ah(this)},Js.setRequestHeader=function(e,t){this.v.append(e,t)},Js.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Js.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(nh.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var uh=nc.JSON.parse;function sh(e){hl.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ch,this.K=this.L=!1}hc(sh,hl);var ch="",lh=/^https?$/i,fh=["POST","PUT"];function hh(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,dh(e),vh(e)}function dh(e){e.D||(e.D=!0,dl(e,"complete"),dl(e,"error"))}function ph(e){if(e.h&&"undefined"!=typeof tc&&(!e.C[1]||4!=mh(e)||2!=e.aa()))if(e.v&&4==mh(e))Cl(e.Ha,0,e);else if(dl(e,"readystatechange"),4==mh(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(bf)[1]||null;if(!a&&nc.self&&nc.self.location){var o=nc.self.location.protocol;a=o.substr(0,o.length-1)}i=!lh.test(a?a.toLowerCase():"")}t=i}if(t)dl(e,"complete"),dl(e,"success");else{e.m=6;try{var u=2<mh(e)?e.g.statusText:""}catch(KE){u=""}e.j=u+" ["+e.aa()+"]",dh(e)}}finally{vh(e)}}}function vh(e,t){if(e.g){yh(e);var n=e.g,r=e.C[0]?rc:null;e.g=null,e.C=null,t||dl(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function yh(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(nc.clearTimeout(e.A),e.A=null)}function mh(e){return e.g?e.g.readyState:0}function gh(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case ch:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(id){return null}}function kh(e){var t="";return Qc(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function bh(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=kh(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Ef(e,t,n))}function wh(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function xh(e){this.Ca=0,this.i=[],this.j=new Ll,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=wh("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=wh("baseRetryDelayMs",5e3,e),this.bb=wh("retryDelaySeedMs",1e4,e),this.$a=wh("forwardChannelMaxRetries",2,e),this.ta=wh("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new Bf(e&&e.concurrentRequestLimit),this.Fa=new Jf,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function _h(e){if(Ih(e),3==e.G){var t=e.U++,n=xf(e.F);Ef(n,"SID",e.I),Ef(n,"RID",t),Ef(n,"TYPE","terminate"),Ch(e,n),(t=new nf(e,e.j,t,void 0)).K=2,t.v=Tf(xf(n)),n=!1,nc.navigator&&nc.navigator.sendBeacon&&(n=nc.navigator.sendBeacon(t.v.toString(),"")),!n&&nc.Image&&((new Image).src=t.v,n=!0),n||(t.g=Vh(t.l,null),t.g.da(t.v)),t.F=Date.now(),df(t)}jh(e)}function Sh(e){e.g&&(Oh(e),e.g.cancel(),e.g=null)}function Ih(e){Sh(e),e.u&&(nc.clearTimeout(e.u),e.u=null),Ph(e),e.h.cancel(),e.m&&("number"===typeof e.m&&nc.clearTimeout(e.m),e.m=null)}function Eh(e){Gf(e.h)||e.m||(e.m=!0,xl(e.Ja,e),e.C=0)}function Th(e,t){var n;n=t?t.m:e.U++;var r=xf(e.F);Ef(r,"SID",e.I),Ef(r,"RID",n),Ef(r,"AID",e.T),Ch(e,r),e.o&&e.s&&bh(r,e.o,e.s),n=new nf(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=Ah(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),Hf(e.h,n),sf(n,r,t)}function Ch(e,t){e.ia&&Qc(e.ia,(function(e,n){Ef(t,n,e)})),e.l&&kf({},(function(e,n){Ef(t,n,e)}))}function Ah(e,t,n){n=Math.min(e.i.length,n);var r=e.l?lc(e.l.Ra,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Zf(l,o,"req"+c+"_")}catch(dd){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function Nh(e){e.g||e.u||(e.Z=1,xl(e.Ia,e),e.A=0)}function Dh(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=Gl(lc(e.Ia,e),Mh(e,e.A)),e.A++,!0)}function Oh(e){null!=e.B&&(nc.clearTimeout(e.B),e.B=null)}function Rh(e){e.g=new nf(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=xf(e.sa);Ef(t,"RID","rpc"),Ef(t,"SID",e.I),Ef(t,"CI",e.L?"0":"1"),Ef(t,"AID",e.T),Ef(t,"TYPE","xmlhttp"),Ch(e,t),e.o&&e.s&&bh(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=Tf(xf(t)),n.s=null,n.P=!0,cf(n,e)}function Ph(e){null!=e.v&&(nc.clearTimeout(e.v),e.v=null)}function Lh(e,t){var n=null;if(e.g==t){Ph(e),Oh(e),e.g=null;var r=2}else{if(!Qf(e.h,t))return;n=t.D,$f(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;dl(r=Ul(),new Kl(r,n)),Eh(e)}else Nh(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(Wf(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Za?0:e.$a))&&(e.m=Gl(lc(e.Ja,e,t),Mh(e,e.C)),e.C++,!0))}(e,t)||2==r&&Dh(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:Fh(e,5);break;case 4:Fh(e,10);break;case 3:Fh(e,6);break;default:Fh(e,2)}}function Mh(e,t){var n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function Fh(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=lc(e.kb,e);n||(n=new wf("//www.google.com/images/cleardot.gif"),nc.location&&"http"==nc.location.protocol||_f(n,"https"),Tf(n)),function(e,t){var n=new Ll;if(nc.Image){var r=new Image;r.onload=fc(eh,n,r,"TestLoadImage: loaded",!0,t),r.onerror=fc(eh,n,r,"TestLoadImage: error",!1,t),r.onabort=fc(eh,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=fc(eh,n,r,"TestLoadImage: timeout",!1,t),nc.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Bl(2);e.G=0,e.l&&e.l.va(t),jh(e),Ih(e)}function jh(e){if(e.G=0,e.la=[],e.l){var t=Xf(e.h);0==t.length&&0==e.i.length||(yc(e.la,t),yc(e.la,e.i),e.h.i.length=0,vc(e.i),e.i.length=0),e.l.ua()}}function Uh(e,t,n){var r=n instanceof wf?xf(n):new wf(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),Sf(r,r.m);else{var i=nc.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new wf(null,void 0);r&&_f(a,r),t&&(a.g=t),i&&Sf(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.za,n&&t&&Ef(r,n,t),Ef(r,"VER",e.ma),Ch(e,r),r}function Vh(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new sh(new th({jb:!0})):new sh(e.ra)).Ka(e.H),t}function qh(){}function zh(){if(Tc&&!(10<=Number(Vc)))throw Error("Environmental error: no available transport.")}function Bh(e,t){hl.call(this),this.g=new xh(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!kc(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!kc(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Wh(this)}function Kh(e){Zl.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Gh(){ef.call(this),this.status=1}function Wh(e){this.g=e}(Js=sh.prototype).Ka=function(e){this.L=e},Js.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Yl.g(),this.C=this.u?$l(this.u):$l(Yl),this.g.onreadystatechange=lc(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(u){return void hh(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=k(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(p){o.e(p)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=nc.FormData&&e instanceof nc.FormData,!(0<=pc(fh,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,l=k(n);try{for(l.s();!(s=l.n()).done;){var f=c(s.value,2),h=f[0],d=f[1];this.g.setRequestHeader(h,d)}}catch(p){l.e(p)}finally{l.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{yh(this),0<this.B&&((this.K=function(e){return Tc&&jc()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=lc(this.qa,this)):this.A=Cl(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){hh(this,u)}},Js.qa=function(){"undefined"!=typeof tc&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,dl(this,"timeout"),this.abort(8))},Js.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,dl(this,"complete"),dl(this,"abort"),vh(this))},Js.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),vh(this,!0)),sh.X.M.call(this)},Js.Ha=function(){this.s||(this.F||this.v||this.l?ph(this):this.fb())},Js.fb=function(){ph(this)},Js.aa=function(){try{return 2<mh(this)?this.g.status:-1}catch(GE){return-1}},Js.fa=function(){try{return this.g?this.g.responseText:""}catch(GE){return""}},Js.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),uh(t)}},Js.Ea=function(){return this.m},Js.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Js=xh.prototype).ma=8,Js.G=1,Js.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new nf(this,this.j,e,void 0),n=this.s;if(this.S&&(n?Xc(n=Hc(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Ah(this,t,r),Ef(i=xf(this.F),"RID",e),Ef(i,"CVER",22),this.D&&Ef(i,"X-HTTP-Session-Id",this.D),Ch(this,i),n&&(this.N?r="headers="+encodeURIComponent(String(kh(n)))+"&"+r:this.o&&bh(i,this.o,n)),Hf(this.h,t),this.Ya&&Ef(i,"TYPE","init"),this.O?(Ef(i,"$req",r),Ef(i,"SID","null"),t.Z=!0,sf(t,i,null)):sf(t,i,r),this.G=2}}else 3==this.G&&(e?Th(this,e):0==this.i.length||Gf(this.h)||Th(this))},Js.Ia=function(){if(this.u=null,Rh(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=Gl(lc(this.eb,this),e)}},Js.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Bl(10),Sh(this),Rh(this))},Js.cb=function(){null!=this.v&&(this.v=null,Sh(this),Dh(this),Bl(19))},Js.kb=function(e){e?(this.j.info("Successfully pinged google.com"),Bl(2)):(this.j.info("Failed to ping google.com"),Bl(1))},(Js=qh.prototype).xa=function(){},Js.wa=function(){},Js.va=function(){},Js.ua=function(){},Js.Ra=function(){},zh.prototype.g=function(e,t){return new Bh(e,t)},hc(Bh,hl),Bh.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;Bl(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=Uh(e,null,e.V),Eh(e)},Bh.prototype.close=function(){_h(this.g)},Bh.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=vl(e),e=n);t.i.push(new zf(t.ab++,e)),3==t.G&&Eh(t)},Bh.prototype.M=function(){this.g.l=null,delete this.j,_h(this.g),delete this.g,Bh.X.M.call(this)},hc(Kh,Zl),hc(Gh,ef),hc(Wh,qh),Wh.prototype.xa=function(){dl(this.g,"a")},Wh.prototype.wa=function(e){dl(this.g,new Kh(e))},Wh.prototype.va=function(e){dl(this.g,new Gh)},Wh.prototype.ua=function(){dl(this.g,"b")},zh.prototype.createWebChannel=zh.prototype.g,Bh.prototype.send=Bh.prototype.u,Bh.prototype.open=Bh.prototype.m,Bh.prototype.close=Bh.prototype.close,Wl.NO_ERROR=0,Wl.TIMEOUT=8,Wl.HTTP_ERROR=6,Ql.COMPLETE="complete",Xl.EventType=Jl,Jl.OPEN="a",Jl.CLOSE="b",Jl.ERROR="c",Jl.MESSAGE="d",hl.prototype.listen=hl.prototype.N,sh.prototype.listenOnce=sh.prototype.O,sh.prototype.getLastError=sh.prototype.Oa,sh.prototype.getLastErrorCode=sh.prototype.Ea,sh.prototype.getStatus=sh.prototype.aa,sh.prototype.getResponseJson=sh.prototype.Sa,sh.prototype.getResponseText=sh.prototype.fa,sh.prototype.send=sh.prototype.da,sh.prototype.setWithCredentials=sh.prototype.Ka;var Qh=ec.createWebChannelTransport=function(){return new zh},Hh=ec.getStatEventTarget=function(){return Ul()},$h=ec.ErrorCode=Wl,Xh=ec.EventType=Ql,Yh=ec.Event=Fl,Jh=ec.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Zh=ec.FetchXmlHttpFactory=th,ed=ec.WebChannel=Xl,td=ec.XhrIo=sh,nd="@firebase/firestore",rd=function(){function e(t){y(this,e),this.uid=t}return g(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();rd.UNAUTHENTICATED=new rd(null),rd.GOOGLE_CREDENTIALS=new rd("google-credentials-uid"),rd.FIRST_PARTY=new rd("first-party-uid"),rd.MOCK_USER=new rd("mock-user");var id="9.18.0",ad=new ge("@firebase/firestore");function od(){return ad.logLevel}function ud(e){if(ad.logLevel<=fe.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ld);ad.debug.apply(ad,["Firestore (".concat(id,"): ").concat(e)].concat(oe(i)))}}function sd(e){if(ad.logLevel<=fe.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ld);ad.error.apply(ad,["Firestore (".concat(id,"): ").concat(e)].concat(oe(i)))}}function cd(e){if(ad.logLevel<=fe.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ld);ad.warn.apply(ad,["Firestore (".concat(id,"): ").concat(e)].concat(oe(i)))}}function ld(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function fd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(id,") INTERNAL ASSERTION FAILED: ")+e;throw sd(t),new Error(t)}function hd(e,t){e||fd()}function dd(e,t){return e}var pd={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},vd=function(e){x(n,e);var t=I(n);function n(e,r){var i;return y(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return g(n)}(W),yd=g((function e(){var t=this;y(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),md=g((function e(t,n){y(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),gd=function(){function e(){y(this,e)}return g(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(rd.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),kd=function(){function e(t){y(this,e),this.token=t,this.changeListener=null}return g(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),bd=function(){function e(t){y(this,e),this.t=t,this.currentUser=rd.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return g(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new yd;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new yd,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){ud("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(ud("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new yd)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(ud("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(hd("string"==typeof n.accessToken),new md(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return hd(null===e||"string"==typeof e),new rd(e)}}]),e}(),wd=function(){function e(t,n,r,i){y(this,e),this.h=t,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=rd.FIRST_PARTY,this.p=new Map}return g(e,[{key:"I",value:function(){return this.g?this.g():(hd(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}},{key:"headers",get:function(){this.p.set("X-Goog-AuthUser",this.l);var e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}]),e}(),xd=function(){function e(t,n,r,i){y(this,e),this.h=t,this.l=n,this.m=r,this.g=i}return g(e,[{key:"getToken",value:function(){return Promise.resolve(new wd(this.h,this.l,this.m,this.g))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(rd.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),_d=g((function e(t){y(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Sd=function(){function e(t){y(this,e),this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}return g(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&ud("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.A;return n.A=e.token,ud("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){ud("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.T.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.T.getImmediate({optional:!0});e?i(e):ud("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(hd("string"==typeof t.token),e.A=t.token,new _d(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Id(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Ed=function(){function e(){y(this,e)}return g(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Id(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Td(e,t){return e<t?-1:e>t?1:0}function Cd(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Ad(e){return e+"\0"}var Nd=function(){function e(t,n){if(y(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new vd(pd.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new vd(pd.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new vd(pd.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new vd(pd.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return g(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Td(this.nanoseconds,e.nanoseconds):Td(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Dd=function(){function e(t){y(this,e),this.timestamp=t}return g(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Nd(0,0))}},{key:"max",value:function(){return new e(new Nd(253402300799,999999999))}}]),e}(),Od=function(){function e(t,n,r){y(this,e),void 0===n?n=0:n>t.length&&fd(),void 0===r?r=t.length-n:r>t.length-n&&fd(),this.segments=t,this.offset=n,this.len=r}return g(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Rd=function(e){x(n,e);var t=I(n);function n(){return y(this,n),t.apply(this,arguments)}return g(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new vd(pd.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,oe(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Od),Pd=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ld=function(e){x(n,e);var t=I(n);function n(){return y(this,n),t.apply(this,arguments)}return g(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Pd.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new vd(pd.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new vd(pd.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new vd(pd.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new vd(pd.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Od),Md=function(){function e(t){y(this,e),this.path=t}return g(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Rd.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Rd.fromString(t))}},{key:"fromName",value:function(t){return new e(Rd.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Rd.emptyPath())}},{key:"comparator",value:function(e,t){return Rd.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Rd(t.slice()))}}]),e}(),Fd=g((function e(t,n,r,i){y(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function jd(e){return e.fields.find((function(e){return 2===e.kind}))}function Ud(e){return e.fields.filter((function(e){return 2!==e.kind}))}Fd.UNKNOWN_ID=-1;var Vd=g((function e(t,n){y(this,e),this.fieldPath=t,this.kind=n}));var qd=function(){function e(t,n){y(this,e),this.sequenceNumber=t,this.offset=n}return g(e,null,[{key:"empty",value:function(){return new e(0,Kd.min())}}]),e}();function zd(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Dd.fromTimestamp(1e9===r?new Nd(n+1,0):new Nd(n,r));return new Kd(i,Md.empty(),t)}function Bd(e){return new Kd(e.readTime,e.key,-1)}var Kd=function(){function e(t,n,r){y(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return g(e,null,[{key:"min",value:function(){return new e(Dd.min(),Md.empty(),-1)}},{key:"max",value:function(){return new e(Dd.max(),Md.empty(),-1)}}]),e}();function Gd(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Md.comparator(e.documentKey,t.documentKey))?n:Td(e.largestBatchId,t.largestBatchId)}var Wd="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Qd=function(){function e(){y(this,e),this.onCommittedListeners=[]}return g(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Hd(e){return $d.apply(this,arguments)}function $d(){return $d=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===pd.FAILED_PRECONDITION&&t.message===Wd){e.next=2;break}throw t;case 2:ud("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),$d.apply(this,arguments)}var Xd=function(){function e(t){var n=this;y(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return g(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&fd(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=k(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Yd=function(){function e(t,n){var r=this;y(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.P=new yd,this.transaction.oncomplete=function(){r.P.resolve()},this.transaction.onabort=function(){n.error?r.P.reject(new ep(t,n.error)):r.P.resolve()},this.transaction.onerror=function(e){var n=ap(e.target.error);r.P.reject(new ep(t,n))}}return g(e,[{key:"v",get:function(){return this.P.promise}},{key:"abort",value:function(e){e&&this.P.reject(e),this.aborted||(ud("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"V",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new np(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new ep(n,t)}}}]),e}(),Jd=function(){function e(t,n,r){y(this,e),this.name=t,this.version=n,this.S=r,12.2===e.D(V())&&sd("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return g(e,[{key:"O",value:function(){var e=d(f().mark((function e(t){var n=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return ud("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new ep(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new vd(pd.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new vd(pd.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new ep(t,n))},i.onupgradeneeded=function(e){ud("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.S.F(t,i.transaction,e.oldVersion,n.version).next((function(){ud("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.B&&(this.db.onversionchange=function(e){return n.B(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"L",value:function(e){this.B=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=d(f().mark((function e(t,n,r,i){var a,o,u,s,c=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,u=f().mark((function e(){var n,u,s,l;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.O(t);case 4:return c.db=e.sent,n=Yd.open(c.db,t,a?"readonly":"readwrite",r),u=i(n).next((function(e){return n.V(),e})).catch((function(e){return n.abort(e),Xd.reject(e)})).toPromise(),u.catch((function(){})),e.next=9,n.v;case 9:return e.t0=u,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),s=e.t1,l="FirebaseError"!==s.name&&o<3,ud("SimpleDb","Transaction failed with error:",s.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(s)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(u(),"t0",4);case 4:if("object"!==typeof(s=e.t0)){e.next=7;break}return e.abrupt("return",s.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return ud("SimpleDb","Removing database:",e),rp(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"C",value:function(){if(!G())return!1;if(e.N())return!0;var t=V(),n=e.D(t),r=0<n&&n<10,i=e.k(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"N",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/react-daily-goal-tracker",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.$)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"D",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"k",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Zd=function(){function e(t){y(this,e),this.q=t,this.U=!1,this.K=null}return g(e,[{key:"isDone",get:function(){return this.U}},{key:"G",get:function(){return this.K}},{key:"cursor",set:function(e){this.q=e}},{key:"done",value:function(){this.U=!0}},{key:"j",value:function(e){this.K=e}},{key:"delete",value:function(){return rp(this.q.delete())}}]),e}(),ep=function(e){x(n,e);var t=I(n);function n(e,r){var i;return y(this,n),(i=t.call(this,pd.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return g(n)}(vd);function tp(e){return"IndexedDbTransactionError"===e.name}var np=function(){function e(t){y(this,e),this.store=t}return g(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(ud("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(ud("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),rp(n)}},{key:"add",value:function(e){return ud("SimpleDb","ADD",this.store.name,e,e),rp(this.store.add(e))}},{key:"get",value:function(e){var t=this;return rp(this.store.get(e)).next((function(n){return void 0===n&&(n=null),ud("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return ud("SimpleDb","DELETE",this.store.name,e),rp(this.store.delete(e))}},{key:"count",value:function(){return ud("SimpleDb","COUNT",this.store.name),rp(this.store.count())}},{key:"W",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.H(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Xd((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Xd((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Y",value:function(e,t){ud("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Z=!1;var r=this.cursor(n);return this.H(r,(function(e,t,n){return n.delete()}))}},{key:"X",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.H(r,t)}},{key:"tt",value:function(e){var t=this.cursor({});return new Xd((function(n,r){t.onerror=function(e){var t=ap(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"H",value:function(e,t){var n=[];return new Xd((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Zd(i),o=t(i.primaryKey,i.value,a);if(o instanceof Xd){var u=o.catch((function(e){return a.done(),Xd.reject(e)}));n.push(u)}a.isDone?r():null===a.G?i.continue():i.continue(a.G)}else r()}})).next((function(){return Xd.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Z?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function rp(e){return new Xd((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=ap(e.target.error);n(t)}}))}var ip=!1;function ap(e){var t=Jd.D(V());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new vd("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return ip||(ip=!0,setTimeout((function(){throw r}),0)),r}}return e}var op=function(){function e(t,n){y(this,e),this.asyncQueue=t,this.et=n,this.task=null}return g(e,[{key:"start",value:function(){this.nt(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"nt",value:function(e){var t=this;ud("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=ud,e.t1="Documents written: ",e.next=6,t.et.st();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!tp(e.t4)){e.next=17;break}ud("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Hd(e.t4);case 19:return e.next=21,t.nt(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),up=function(){function e(t,n){y(this,e),this.localStore=t,this.persistence=n}return g(e,[{key:"st",value:function(){var e=d(f().mark((function e(){var t,n=this,r=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.it(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"it",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return Xd.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return ud("IndexBackiller","Processing collection: ".concat(t)),n.rt(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"rt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.ot(i,n)})).next((function(n){return ud("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"ot",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=Bd(t);Gd(r,n)>0&&(n=r)})),new Kd(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),sp=function(){function e(t,n){var r=this;y(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ut(e)},this.ct=function(e){return n.writeSequenceNumber(e)})}return g(e,[{key:"ut",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ct&&this.ct(e),e}}]),e}();sp.at=-1;var cp=g((function e(t,n,r,i,a,o,u,s){y(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),lp=function(){function e(t,n){y(this,e),this.projectId=t,this.database=n||"(default)"}return g(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function fp(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function hp(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function dp(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function pp(e){return null==e}function vp(e){return 0===e&&1/e==-1/0}function yp(e){return"number"==typeof e&&Number.isInteger(e)&&!vp(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var mp=function(e){x(n,e);var t=I(n);function n(){var e;return y(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return g(n)}(T(Error));var gp=function(e){function t(e){y(this,t),this.binaryString=e}return g(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Td(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw e instanceof DOMException?new mp("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();gp.EMPTY_BYTE_STRING=new gp("");var kp=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bp(e){if(hd(!!e),"string"==typeof e){var t=0,n=kp.exec(e);if(hd(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:wp(e.seconds),nanos:wp(e.nanos)}}function wp(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function xp(e){return"string"==typeof e?gp.fromBase64String(e):gp.fromUint8Array(e)}function _p(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Sp(e){var t=e.mapValue.fields.__previous_value__;return _p(t)?Sp(t):t}function Ip(e){var t=bp(e.mapValue.fields.__local_write_time__.timestampValue);return new Nd(t.seconds,t.nanos)}var Ep={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Tp={nullValue:"NULL_VALUE"};function Cp(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?_p(e)?4:zp(e)?9007199254740991:10:fd()}function Ap(e,t){if(e===t)return!0;var n=Cp(e);if(n!==Cp(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ip(e).isEqual(Ip(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=bp(e.timestampValue),r=bp(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return xp(e.bytesValue).isEqual(xp(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return wp(e.geoPointValue.latitude)===wp(t.geoPointValue.latitude)&&wp(e.geoPointValue.longitude)===wp(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return wp(e.integerValue)===wp(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=wp(e.doubleValue),r=wp(t.doubleValue);return n===r?vp(n)===vp(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Cd(e.arrayValue.values||[],t.arrayValue.values||[],Ap);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(fp(n)!==fp(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ap(n[i],r[i])))return!1;return!0}(e,t);default:return fd()}}function Np(e,t){return void 0!==(e.values||[]).find((function(e){return Ap(e,t)}))}function Dp(e,t){if(e===t)return 0;var n=Cp(e),r=Cp(t);if(n!==r)return Td(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Td(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=wp(e.integerValue||e.doubleValue),r=wp(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Op(e.timestampValue,t.timestampValue);case 4:return Op(Ip(e),Ip(t));case 5:return Td(e.stringValue,t.stringValue);case 6:return function(e,t){var n=xp(e),r=xp(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Td(n[i],r[i]);if(0!==a)return a}return Td(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Td(wp(e.latitude),wp(t.latitude));return 0!==n?n:Td(wp(e.longitude),wp(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Dp(n[i],r[i]);if(a)return a}return Td(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Ep.mapValue&&t===Ep.mapValue)return 0;if(e===Ep.mapValue)return 1;if(t===Ep.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Td(r[o],a[o]);if(0!==u)return u;var s=Dp(n[r[o]],i[a[o]]);if(0!==s)return s}return Td(r.length,a.length)}(e.mapValue,t.mapValue);default:throw fd()}}function Op(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Td(e,t);var n=bp(e),r=bp(t),i=Td(n.seconds,r.seconds);return 0!==i?i:Td(n.nanos,r.nanos)}function Rp(e){return Pp(e)}function Pp(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=bp(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?xp(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Md.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=k(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Pp(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=k(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Pp(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):fd();var t,n}function Lp(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Mp(e){return!!e&&"integerValue"in e}function Fp(e){return!!e&&"arrayValue"in e}function jp(e){return!!e&&"nullValue"in e}function Up(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Vp(e){return!!e&&"mapValue"in e}function qp(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return hp(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=qp(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=qp(e.arrayValue.values[r]);return n}return Object.assign({},e)}function zp(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Bp(e){return"nullValue"in e?Tp:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Lp(lp.empty(),Md.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:fd()}function Kp(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Lp(lp.empty(),Md.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Ep:fd()}function Gp(e,t){var n=Dp(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Wp(e,t){var n=Dp(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Qp=g((function e(t,n){y(this,e),this.position=t,this.inclusive=n}));function Hp(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Md.comparator(Md.fromName(o.referenceValue),n.key):Dp(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function $p(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Ap(e.position[n],t.position[n]))return!1;return!0}var Xp=g((function e(){y(this,e)})),Yp=function(e){x(n,e);var t=I(n);function n(e,r,i){var a;return y(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return g(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Dp(t,this.value)):null!==t&&Cp(this.value)===Cp(t)&&this.matchesComparison(Dp(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return fd()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new uv(e,t,r):"array-contains"===t?new fv(e,r):"in"===t?new hv(e,r):"not-in"===t?new dv(e,r):"array-contains-any"===t?new pv(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new sv(e,n):new cv(e,n)}}]),n}(Xp),Jp=function(e){x(n,e);var t=I(n);function n(e,r){var i;return y(this,n),(i=t.call(this)).filters=e,i.op=r,i.ft=null,i}return g(n,[{key:"matches",value:function(e){return Zp(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ft||(this.ft=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ft}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.dt((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"dt",value:function(e){var t,n=k(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(Xp);function Zp(e){return"and"===e.op}function ev(e){return"or"===e.op}function tv(e){return nv(e)&&Zp(e)}function nv(e){var t,n=k(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof Jp)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function rv(e){if(e instanceof Yp)return e.field.canonicalString()+e.op.toString()+Rp(e.value);if(tv(e))return e.filters.map((function(e){return rv(e)})).join(",");var t=e.filters.map((function(e){return rv(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function iv(e,t){return e instanceof Yp?function(e,t){return t instanceof Yp&&e.op===t.op&&e.field.isEqual(t.field)&&Ap(e.value,t.value)}(e,t):e instanceof Jp?function(e,t){return t instanceof Jp&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&iv(n,t.filters[r])}),!0)}(e,t):void fd()}function av(e,t){var n=e.filters.concat(t);return Jp.create(n,e.op)}function ov(e){return e instanceof Yp?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Rp(e.value))}(e):e instanceof Jp?function(e){return e.op.toString()+" {"+e.getFilters().map(ov).join(" ,")+"}"}(e):"Filter"}var uv=function(e){x(n,e);var t=I(n);function n(e,r,i){var a;return y(this,n),(a=t.call(this,e,r,i)).key=Md.fromName(i.referenceValue),a}return g(n,[{key:"matches",value:function(e){var t=Md.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(Yp),sv=function(e){x(n,e);var t=I(n);function n(e,r){var i;return y(this,n),(i=t.call(this,e,"in",r)).keys=lv("in",r),i}return g(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Yp),cv=function(e){x(n,e);var t=I(n);function n(e,r){var i;return y(this,n),(i=t.call(this,e,"not-in",r)).keys=lv("not-in",r),i}return g(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Yp);function lv(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Md.fromName(e.referenceValue)}))}var fv=function(e){x(n,e);var t=I(n);function n(e,r){return y(this,n),t.call(this,e,"array-contains",r)}return g(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Fp(t)&&Np(t.arrayValue,this.value)}}]),n}(Yp),hv=function(e){x(n,e);var t=I(n);function n(e,r){return y(this,n),t.call(this,e,"in",r)}return g(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Np(this.value.arrayValue,t)}}]),n}(Yp),dv=function(e){x(n,e);var t=I(n);function n(e,r){return y(this,n),t.call(this,e,"not-in",r)}return g(n,[{key:"matches",value:function(e){if(Np(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Np(this.value.arrayValue,t)}}]),n}(Yp),pv=function(e){x(n,e);var t=I(n);function n(e,r){return y(this,n),t.call(this,e,"array-contains-any",r)}return g(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Fp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Np(t.value.arrayValue,e)}))}}]),n}(Yp),vv=g((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";y(this,e),this.field=t,this.dir=n}));function yv(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var mv=function(){function e(t,n){y(this,e),this.comparator=t,this.root=n||kv.EMPTY}return g(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,kv.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,kv.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new gv(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new gv(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new gv(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new gv(this.root,e,this.comparator,!0)}}]),e}(),gv=function(){function e(t,n,r,i){y(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return g(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),kv=function(){function e(t,n,r,i,a){y(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return g(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw fd();if(this.right.isRed())throw fd();var e=this.left.check();if(e!==this.right.check())throw fd();return e+(this.isRed()?0:1)}}]),e}();kv.EMPTY=null,kv.RED=!0,kv.BLACK=!1,kv.EMPTY=new(function(){function e(){y(this,e),this.size=0}return g(e,[{key:"key",get:function(){throw fd()}},{key:"value",get:function(){throw fd()}},{key:"color",get:function(){throw fd()}},{key:"left",get:function(){throw fd()}},{key:"right",get:function(){throw fd()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new kv(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var bv=function(){function e(t){y(this,e),this.comparator=t,this.data=new mv(this.comparator)}return g(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new wv(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new wv(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),wv=function(){function e(t){y(this,e),this.iter=t}return g(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function xv(e){return e.hasNext()?e.getNext():void 0}var _v=function(){function e(t){y(this,e),this.fields=t,t.sort(Ld.comparator)}return g(e,[{key:"unionWith",value:function(t){var n,r=new bv(Ld.comparator),i=k(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=k(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=k(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Cd(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),Sv=function(){function e(t){y(this,e),this.value=t}return g(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Vp(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=qp(t)}},{key:"setAll",value:function(e){var t=this,n=Ld.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=qp(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Vp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Ap(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Vp(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){hp(t,(function(t,n){return e[t]=n}));var r,i=k(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(qp(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Iv(e){var t=[];return hp(e.fields,(function(e,n){var r=new Ld([e]);if(Vp(n)){var i=Iv(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=k(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new _v(t)}var Ev=function(){function e(t,n,r,i,a,o,u){y(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return g(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(Dd.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Sv.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Sv.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Dd.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Dd.min(),Dd.min(),Dd.min(),Sv.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,Dd.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Dd.min(),Dd.min(),Sv.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Dd.min(),Dd.min(),Sv.empty(),2)}}]),e}(),Tv=g((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;y(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this._t=null}));function Cv(e){return new Tv(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Av(e){var t=dd(e);if(null===t._t){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return rv(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),pp(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Rp(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Rp(e)})).join(",")),t._t=n}return t._t}function Nv(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!yv(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!iv(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!$p(e.startAt,t.startAt)&&$p(e.endAt,t.endAt)}function Dv(e){return Md.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Ov(e,t){return e.filters.filter((function(e){return e instanceof Yp&&e.field.isEqual(t)}))}function Rv(e,t,n){var r,i=Tp,a=!0,o=k(Ov(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Tp,c=!0;switch(u.op){case"<":case"<=":s=Bp(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=Tp}Gp({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Gp({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function Pv(e,t,n){var r,i=Ep,a=!0,o=k(Ov(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Ep,c=!0;switch(u.op){case">=":case">":s=Kp(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=Ep}Wp({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Wp({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var Lv=g((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;y(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.wt=null,this.gt=null,this.startAt,this.endAt}));function Mv(e,t,n,r,i,a,o,u){return new Lv(e,t,n,r,i,a,o,u)}function Fv(e){return new Lv(e)}function jv(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Uv(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Vv(e){var t,n=k(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function qv(e){return null!==e.collectionGroup}function zv(e){var t=dd(e);if(null===t.wt){t.wt=[];var n=Vv(t),r=Uv(t);if(null!==n&&null===r)n.isKeyField()||t.wt.push(new vv(n)),t.wt.push(new vv(Ld.keyField(),"asc"));else{var i,a=!1,o=k(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.wt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new vv(Ld.keyField(),s))}}}return t.wt}function Bv(e){var t=dd(e);if(!t.gt)if("F"===t.limitType)t.gt=Cv(t.path,t.collectionGroup,zv(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=k(zv(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new vv(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new Qp(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Qp(t.startAt.position,t.startAt.inclusive):null;t.gt=Cv(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.gt}function Kv(e,t){t.getFirstInequalityField(),Vv(e);var n=e.filters.concat([t]);return new Lv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Gv(e,t,n){return new Lv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Wv(e,t){return Nv(Bv(e),Bv(t))&&e.limitType===t.limitType}function Qv(e){return"".concat(Av(Bv(e)),"|lt:").concat(e.limitType)}function Hv(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return ov(e)})).join(", "),"]")),pp(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Rp(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Rp(e)})).join(",")),"Target(".concat(t,")")}(Bv(e)),"; limitType=").concat(e.limitType,")")}function $v(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Md.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=k(zv(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=k(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Hp(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,zv(e),t))&&!(e.endAt&&!function(e,t,n){var r=Hp(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,zv(e),t))}(e,t)}function Xv(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Yv(e){return function(t,n){var r,i=!1,a=k(zv(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Jv(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Jv(e,t,n){var r=e.field.isKeyField()?Md.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Dp(r,i):fd()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return fd()}}function Zv(e,t){if(e.yt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vp(t)?"-0":t}}function ey(e){return{integerValue:""+e}}function ty(e,t){return yp(t)?ey(t):Zv(e,t)}var ny=g((function e(){y(this,e),this._=void 0}));function ry(e,t,n){return e instanceof oy?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof uy?sy(e,t):e instanceof cy?ly(e,t):function(e,t){var n=ay(e,t),r=hy(n)+hy(e.It);return Mp(n)&&Mp(e.It)?ey(r):Zv(e.Tt,r)}(e,t)}function iy(e,t,n){return e instanceof uy?sy(e,t):e instanceof cy?ly(e,t):n}function ay(e,t){return e instanceof fy?Mp(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var oy=function(e){x(n,e);var t=I(n);function n(){return y(this,n),t.apply(this,arguments)}return g(n)}(ny),uy=function(e){x(n,e);var t=I(n);function n(e){var r;return y(this,n),(r=t.call(this)).elements=e,r}return g(n)}(ny);function sy(e,t){var n,r=dy(t),i=k(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Ap(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var cy=function(e){x(n,e);var t=I(n);function n(e){var r;return y(this,n),(r=t.call(this)).elements=e,r}return g(n)}(ny);function ly(e,t){var n,r=dy(t),i=k(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Ap(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var fy=function(e){x(n,e);var t=I(n);function n(e,r){var i;return y(this,n),(i=t.call(this)).Tt=e,i.It=r,i}return g(n)}(ny);function hy(e){return wp(e.integerValue||e.doubleValue)}function dy(e){return Fp(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var py=g((function e(t,n){y(this,e),this.field=t,this.transform=n}));var vy=g((function e(t,n){y(this,e),this.version=t,this.transformResults=n})),yy=function(){function e(t,n){y(this,e),this.updateTime=t,this.exists=n}return g(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function my(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var gy=g((function e(){y(this,e)}));function ky(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Dy(e.key,yy.none()):new Sy(e.key,e.data,yy.none());var n,r=e.data,i=Sv.empty(),a=new bv(Ld.comparator),o=k(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new Iy(e.key,i,new _v(a.toArray()),yy.none())}function by(e,t,n){e instanceof Sy?function(e,t,n){var r=e.value.clone(),i=Ty(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Iy?function(e,t,n){if(my(e.precondition,t)){var r=Ty(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Ey(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function wy(e,t,n,r){return e instanceof Sy?function(e,t,n,r){if(!my(e.precondition,t))return n;var i=e.value.clone(),a=Cy(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Iy?function(e,t,n,r){if(!my(e.precondition,t))return n;var i=Cy(e.fieldTransforms,r,t),a=t.data;return a.setAll(Ey(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return my(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function xy(e,t){var n,r=null,i=k(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=ay(a.transform,o||null);null!=u&&(null===r&&(r=Sv.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function _y(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Cd(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof uy&&t instanceof uy||e instanceof cy&&t instanceof cy?Cd(e.elements,t.elements,Ap):e instanceof fy&&t instanceof fy?Ap(e.It,t.It):e instanceof oy&&t instanceof oy}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Sy=function(e){x(n,e);var t=I(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return y(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return g(n,[{key:"getFieldMask",value:function(){return null}}]),n}(gy),Iy=function(e){x(n,e);var t=I(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return y(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return g(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(gy);function Ey(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Ty(e,t,n){var r=new Map;hd(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,iy(o,u,n[i]))}return r}function Cy(e,t,n){var r,i=new Map,a=k(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,ry(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Ay,Ny,Dy=function(e){x(n,e);var t=I(n);function n(e,r){var i;return y(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return g(n,[{key:"getFieldMask",value:function(){return null}}]),n}(gy),Oy=function(e){x(n,e);var t=I(n);function n(e,r){var i;return y(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return g(n,[{key:"getFieldMask",value:function(){return null}}]),n}(gy),Ry=g((function e(t){y(this,e),this.count=t}));function Py(e){switch(e){default:return fd();case pd.CANCELLED:case pd.UNKNOWN:case pd.DEADLINE_EXCEEDED:case pd.RESOURCE_EXHAUSTED:case pd.INTERNAL:case pd.UNAVAILABLE:case pd.UNAUTHENTICATED:return!1;case pd.INVALID_ARGUMENT:case pd.NOT_FOUND:case pd.ALREADY_EXISTS:case pd.PERMISSION_DENIED:case pd.FAILED_PRECONDITION:case pd.ABORTED:case pd.OUT_OF_RANGE:case pd.UNIMPLEMENTED:case pd.DATA_LOSS:return!0}}function Ly(e){if(void 0===e)return sd("GRPC error has no .code"),pd.UNKNOWN;switch(e){case Ay.OK:return pd.OK;case Ay.CANCELLED:return pd.CANCELLED;case Ay.UNKNOWN:return pd.UNKNOWN;case Ay.DEADLINE_EXCEEDED:return pd.DEADLINE_EXCEEDED;case Ay.RESOURCE_EXHAUSTED:return pd.RESOURCE_EXHAUSTED;case Ay.INTERNAL:return pd.INTERNAL;case Ay.UNAVAILABLE:return pd.UNAVAILABLE;case Ay.UNAUTHENTICATED:return pd.UNAUTHENTICATED;case Ay.INVALID_ARGUMENT:return pd.INVALID_ARGUMENT;case Ay.NOT_FOUND:return pd.NOT_FOUND;case Ay.ALREADY_EXISTS:return pd.ALREADY_EXISTS;case Ay.PERMISSION_DENIED:return pd.PERMISSION_DENIED;case Ay.FAILED_PRECONDITION:return pd.FAILED_PRECONDITION;case Ay.ABORTED:return pd.ABORTED;case Ay.OUT_OF_RANGE:return pd.OUT_OF_RANGE;case Ay.UNIMPLEMENTED:return pd.UNIMPLEMENTED;case Ay.DATA_LOSS:return pd.DATA_LOSS;default:return fd()}}(Ny=Ay||(Ay={}))[Ny.OK=0]="OK",Ny[Ny.CANCELLED=1]="CANCELLED",Ny[Ny.UNKNOWN=2]="UNKNOWN",Ny[Ny.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ny[Ny.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ny[Ny.NOT_FOUND=5]="NOT_FOUND",Ny[Ny.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ny[Ny.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ny[Ny.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ny[Ny.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ny[Ny.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ny[Ny.ABORTED=10]="ABORTED",Ny[Ny.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ny[Ny.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ny[Ny.INTERNAL=13]="INTERNAL",Ny[Ny.UNAVAILABLE=14]="UNAVAILABLE",Ny[Ny.DATA_LOSS=15]="DATA_LOSS";var My=function(){function e(t,n){y(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return g(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=k(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){hp(this.inner,(function(t,n){var r,i=k(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return dp(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Fy=new mv(Md.comparator);function jy(){return Fy}var Uy=new mv(Md.comparator);function Vy(){for(var e=Uy,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function qy(e){var t=Uy;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function zy(){return Ky()}function By(){return Ky()}function Ky(){return new My((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Gy=new mv(Md.comparator),Wy=new bv(Md.comparator);function Qy(){for(var e=Wy,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Hy=new bv(Td);function $y(){return Hy}var Xy=function(){function e(t,n,r,i,a){y(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return g(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,Yy.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(Dd.min(),i,$y(),jy(),Qy())}}]),e}(),Yy=function(){function e(t,n,r,i,a){y(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return g(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,Qy(),Qy(),Qy())}}]),e}(),Jy=g((function e(t,n,r,i){y(this,e),this.Et=t,this.removedTargetIds=n,this.key=r,this.At=i})),Zy=g((function e(t,n){y(this,e),this.targetId=t,this.Rt=n})),em=g((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:gp.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;y(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),tm=function(){function e(){y(this,e),this.Pt=0,this.vt=im(),this.bt=gp.EMPTY_BYTE_STRING,this.Vt=!1,this.St=!0}return g(e,[{key:"current",get:function(){return this.Vt}},{key:"resumeToken",get:function(){return this.bt}},{key:"Dt",get:function(){return 0!==this.Pt}},{key:"Ct",get:function(){return this.St}},{key:"xt",value:function(e){e.approximateByteSize()>0&&(this.St=!0,this.bt=e)}},{key:"Nt",value:function(){var e=Qy(),t=Qy(),n=Qy();return this.vt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:fd()}})),new Yy(this.bt,this.Vt,e,t,n)}},{key:"kt",value:function(){this.St=!1,this.vt=im()}},{key:"$t",value:function(e,t){this.St=!0,this.vt=this.vt.insert(e,t)}},{key:"Mt",value:function(e){this.St=!0,this.vt=this.vt.remove(e)}},{key:"Ot",value:function(){this.Pt+=1}},{key:"Ft",value:function(){this.Pt-=1}},{key:"Bt",value:function(){this.St=!0,this.Vt=!0}}]),e}(),nm=function(){function e(t){y(this,e),this.Lt=t,this.qt=new Map,this.Ut=jy(),this.Kt=rm(),this.Gt=new bv(Td)}return g(e,[{key:"Qt",value:function(e){var t,n=k(e.Et);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.At&&e.At.isFoundDocument()?this.jt(r,e.At):this.zt(r,e.key,e.At)}}catch(u){n.e(u)}finally{n.f()}var i,a=k(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.zt(o,e.key,e.At)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Wt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Ht(n);switch(e.state){case 0:t.Jt(n)&&r.xt(e.resumeToken);break;case 1:r.Ft(),r.Dt||r.kt(),r.xt(e.resumeToken);break;case 2:r.Ft(),r.Dt||t.removeTarget(n);break;case 3:t.Jt(n)&&(r.Bt(),r.xt(e.resumeToken));break;case 4:t.Jt(n)&&(t.Yt(n),r.xt(e.resumeToken));break;default:fd()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.qt.forEach((function(e,r){n.Jt(r)&&t(r)}))}},{key:"Zt",value:function(e){var t=e.targetId,n=e.Rt.count,r=this.Xt(t);if(r){var i=r.target;if(Dv(i))if(0===n){var a=new Md(i.path);this.zt(t,a,Ev.newNoDocument(a,Dd.min()))}else hd(1===n);else this.te(t)!==n&&(this.Yt(t),this.Gt=this.Gt.add(t))}}},{key:"ee",value:function(e){var t=this,n=new Map;this.qt.forEach((function(r,i){var a=t.Xt(i);if(a){if(r.current&&Dv(a.target)){var o=new Md(a.target.path);null!==t.Ut.get(o)||t.ne(i,o)||t.zt(i,o,Ev.newNoDocument(o,e))}r.Ct&&(n.set(i,r.Nt()),r.kt())}}));var r=Qy();this.Kt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Xt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Ut.forEach((function(t,n){return n.setReadTime(e)}));var i=new Xy(e,n,this.Gt,this.Ut,r);return this.Ut=jy(),this.Kt=rm(),this.Gt=new bv(Td),i}},{key:"jt",value:function(e,t){if(this.Jt(e)){var n=this.ne(e,t.key)?2:0;this.Ht(e).$t(t.key,n),this.Ut=this.Ut.insert(t.key,t),this.Kt=this.Kt.insert(t.key,this.se(t.key).add(e))}}},{key:"zt",value:function(e,t,n){if(this.Jt(e)){var r=this.Ht(e);this.ne(e,t)?r.$t(t,1):r.Mt(t),this.Kt=this.Kt.insert(t,this.se(t).delete(e)),n&&(this.Ut=this.Ut.insert(t,n))}}},{key:"removeTarget",value:function(e){this.qt.delete(e)}},{key:"te",value:function(e){var t=this.Ht(e).Nt();return this.Lt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ot",value:function(e){this.Ht(e).Ot()}},{key:"Ht",value:function(e){var t=this.qt.get(e);return t||(t=new tm,this.qt.set(e,t)),t}},{key:"se",value:function(e){var t=this.Kt.get(e);return t||(t=new bv(Td),this.Kt=this.Kt.insert(e,t)),t}},{key:"Jt",value:function(e){var t=null!==this.Xt(e);return t||ud("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Xt",value:function(e){var t=this.qt.get(e);return t&&t.Dt?null:this.Lt.ie(e)}},{key:"Yt",value:function(e){var t=this;this.qt.set(e,new tm),this.Lt.getRemoteKeysForTarget(e).forEach((function(n){t.zt(e,n,null)}))}},{key:"ne",value:function(e,t){return this.Lt.getRemoteKeysForTarget(e).has(t)}}]),e}();function rm(){return new mv(Md.comparator)}function im(){return new mv(Md.comparator)}var am={asc:"ASCENDING",desc:"DESCENDING"},om={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},um={and:"AND",or:"OR"},sm=g((function e(t,n){y(this,e),this.databaseId=t,this.yt=n}));function cm(e,t){return e.yt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function lm(e,t){return e.yt?t.toBase64():t.toUint8Array()}function fm(e,t){return cm(e,t.toTimestamp())}function hm(e){return hd(!!e),Dd.fromTimestamp(function(e){var t=bp(e);return new Nd(t.seconds,t.nanos)}(e))}function dm(e,t){return function(e){return new Rd(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function pm(e){var t=Rd.fromString(e);return hd(Fm(t)),t}function vm(e,t){return dm(e.databaseId,t.path)}function ym(e,t){var n=pm(t);if(n.get(1)!==e.databaseId.projectId)throw new vd(pd.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new vd(pd.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Md(bm(n))}function mm(e,t){return dm(e.databaseId,t)}function gm(e){var t=pm(e);return 4===t.length?Rd.emptyPath():bm(t)}function km(e){return new Rd(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function bm(e){return hd(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function wm(e,t,n){return{name:vm(e,t),fields:n.value.mapValue.fields}}function xm(e,t,n){var r=ym(e,t.name),i=hm(t.updateTime),a=t.createTime?hm(t.createTime):Dd.min(),o=new Sv({mapValue:{fields:t.fields}}),u=Ev.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function _m(e,t){return"found"in t?function(e,t){hd(!!t.found),t.found.name,t.found.updateTime;var n=ym(e,t.found.name),r=hm(t.found.updateTime),i=t.found.createTime?hm(t.found.createTime):Dd.min(),a=new Sv({mapValue:{fields:t.found.fields}});return Ev.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){hd(!!t.missing),hd(!!t.readTime);var n=ym(e,t.missing),r=hm(t.readTime);return Ev.newNoDocument(n,r)}(e,t):fd()}function Sm(e,t){var n;if(t instanceof Sy)n={update:wm(e,t.key,t.value)};else if(t instanceof Dy)n={delete:vm(e,t.key)};else if(t instanceof Iy)n={update:wm(e,t.key,t.data),updateMask:Mm(t.fieldMask)};else{if(!(t instanceof Oy))return fd();n={verify:vm(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof oy)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof uy)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof cy)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof fy)return{fieldPath:t.field.canonicalString(),increment:n.It};throw fd()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:fm(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:fd()}(e,t.precondition)),n}function Im(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?yy.updateTime(hm(e.updateTime)):void 0!==e.exists?yy.exists(e.exists):yy.none()}(t.currentDocument):yy.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)hd("REQUEST_TIME"===t.setToServerValue),n=new oy;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new uy(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new cy(i)}else"increment"in t?n=new fy(e,t.increment):fd();var a=Ld.fromServerFormat(t.fieldPath);return new py(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=ym(e,t.update.name),a=new Sv({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new _v(t.map((function(e){return Ld.fromServerFormat(e)})))}(t.updateMask);return new Iy(i,a,o,n,r)}return new Sy(i,a,n,r)}if(t.delete){var u=ym(e,t.delete);return new Dy(u,n)}if(t.verify){var s=ym(e,t.verify);return new Oy(s,n)}return fd()}function Em(e,t){return{documents:[mm(e,t.path)]}}function Tm(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=mm(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=mm(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return Lm(Jp.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Rm(e.field),direction:Nm(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.yt||pp(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Cm(e){var t=gm(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){hd(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=Am(e);return t instanceof Jp&&tv(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new vv(Pm(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return pp(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Qp(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Qp(n,t)}(n.endAt)),Mv(t,i,u,o,s,"F",c,l)}function Am(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Pm(e.unaryFilter.field);return Yp.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Pm(e.unaryFilter.field);return Yp.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Pm(e.unaryFilter.field);return Yp.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Pm(e.unaryFilter.field);return Yp.create(i,"!=",{nullValue:"NULL_VALUE"});default:return fd()}}(e):void 0!==e.fieldFilter?function(e){return Yp.create(Pm(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return fd()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Jp.create(e.compositeFilter.filters.map((function(e){return Am(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return fd()}}(e.compositeFilter.op))}(e):fd()}function Nm(e){return am[e]}function Dm(e){return om[e]}function Om(e){return um[e]}function Rm(e){return{fieldPath:e.canonicalString()}}function Pm(e){return Ld.fromServerFormat(e.fieldPath)}function Lm(e){return e instanceof Yp?function(e){if("=="===e.op){if(Up(e.value))return{unaryFilter:{field:Rm(e.field),op:"IS_NAN"}};if(jp(e.value))return{unaryFilter:{field:Rm(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Up(e.value))return{unaryFilter:{field:Rm(e.field),op:"IS_NOT_NAN"}};if(jp(e.value))return{unaryFilter:{field:Rm(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rm(e.field),op:Dm(e.op),value:e.value}}}(e):e instanceof Jp?function(e){var t=e.getFilters().map((function(e){return Lm(e)}));return 1===t.length?t[0]:{compositeFilter:{op:Om(e.op),filters:t}}}(e):fd()}function Mm(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Fm(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function jm(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Vm(t)),t=Um(e.get(n),t);return Vm(t)}function Um(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Vm(e){return e+"\x01\x01"}function qm(e){var t=e.length;if(hd(t>=2),2===t)return hd("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Rd.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&fd(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:fd()}a=o+2}return new Rd(r)}var zm=["userId","batchId"];function Bm(e,t){return[e,jm(t)]}function Km(e,t,n){return[e,jm(t),n]}var Gm={},Wm=["prefixPath","collectionGroup","readTime","documentId"],Qm=["prefixPath","collectionGroup","documentId"],Hm=["collectionGroup","readTime","prefixPath","documentId"],$m=["canonicalId","targetId"],Xm=["targetId","path"],Ym=["path","targetId"],Jm=["collectionId","parent"],Zm=["indexId","uid"],eg=["uid","sequenceNumber"],tg=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ng=["indexId","uid","orderedDocumentKey"],rg=["userId","collectionPath","documentId"],ig=["userId","collectionPath","largestBatchId"],ag=["userId","collectionGroup","largestBatchId"],og=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),ug=[].concat(oe(og),["documentOverlays"]),sg=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],cg=sg,lg=[].concat(cg,["indexConfiguration","indexState","indexEntries"]),fg=function(e){x(n,e);var t=I(n);function n(e,r){var i;return y(this,n),(i=t.call(this)).re=e,i.currentSequenceNumber=r,i}return g(n)}(Qd);function hg(e,t){var n=dd(e);return Jd.M(n.re,t)}var dg=function(){function e(t,n,r,i){y(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return g(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&by(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=k(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=wy(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=k(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=wy(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=By();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=ky(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(Dd.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Qy())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Cd(this.mutations,e.mutations,(function(e,t){return _y(e,t)}))&&Cd(this.baseMutations,e.baseMutations,(function(e,t){return _y(e,t)}))}}]),e}(),pg=function(){function e(t,n,r,i){y(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return g(e,null,[{key:"from",value:function(t,n,r){hd(t.mutations.length===r.length);for(var i=Gy,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),vg=function(){function e(t,n){y(this,e),this.largestBatchId=t,this.mutation=n}return g(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),yg=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Dd.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Dd.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:gp.EMPTY_BYTE_STRING;y(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return g(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),mg=g((function e(t){y(this,e),this.oe=t}));function gg(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:kg(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:vm(e,t.key),fields:t.data.value.mapValue.fields,updateTime:cm(e,t.version.toTimestamp()),createTime:cm(e,t.createTime.toTimestamp())}}(e.oe,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:bg(t.version)};else{if(!t.isUnknownDocument())return fd();r.unknownDocument={path:n.path.toArray(),version:bg(t.version)}}return r}function kg(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function bg(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function wg(e){var t=new Nd(e.seconds,e.nanoseconds);return Dd.fromTimestamp(t)}function xg(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Im(e.oe,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Im(e.oe,t)})),u=Nd.fromMillis(t.localWriteTimeMs);return new dg(t.batchId,u,n,o)}function _g(e){var t,n,r=wg(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?wg(e.lastLimboFreeSnapshotVersion):Dd.min();return void 0!==e.query.documents?(hd(1===(n=e.query).documents.length),t=Bv(Fv(gm(n.documents[0])))):t=function(e){return Bv(Cm(e))}(e.query),new yg(t,e.targetId,0,e.lastListenSequenceNumber,r,i,gp.fromBase64String(e.resumeToken))}function Sg(e,t){var n,r=bg(t.snapshotVersion),i=bg(t.lastLimboFreeSnapshotVersion);n=Dv(t.target)?Em(e.oe,t.target):Tm(e.oe,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Av(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Ig(e){var t=Cm({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Gv(t,t.limit,"L"):t}function Eg(e,t){return new vg(t.largestBatchId,Im(e.oe,t.overlayMutation))}function Tg(e,t){var n=t.path.lastSegment();return[e,jm(t.path.popLast()),n]}function Cg(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:bg(r.readTime),documentKey:jm(r.documentKey.path),largestBatchId:r.largestBatchId}}var Ag=function(){function e(){y(this,e)}return g(e,[{key:"getBundleMetadata",value:function(e,t){return Ng(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:wg(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return Ng(e).put({bundleId:(n=t).id,createTime:bg(hm(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Dg(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Ig(t.bundledQuery),readTime:wg(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return Dg(e).put(function(e){return{name:e.name,readTime:bg(hm(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Ng(e){return hg(e,"bundles")}function Dg(e){return hg(e,"namedQueries")}var Og=function(){function e(t,n){y(this,e),this.Tt=t,this.userId=n}return g(e,[{key:"getOverlay",value:function(e,t){var n=this;return Rg(e).get(Tg(this.userId,t)).next((function(e){return e?Eg(n.Tt,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=zy();return Xd.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new vg(t,a);i.push(r.ce(e,o))})),Xd.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(jm(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Rg(e).Y("collectionPathOverlayIndex",i))})),Xd.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=zy(),a=jm(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Rg(e).W("collectionPathOverlayIndex",o).next((function(e){var t,n=k(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Eg(r.Tt,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=zy(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Rg(e).X({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=Eg(a.Tt,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ce",value:function(e,t){return Rg(e).put(function(e,t,n){var r=c(Tg(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Sm(e.oe,n.mutation)}}(this.Tt,this.userId,t))}}],[{key:"ue",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Rg(e){return hg(e,"documentOverlays")}var Pg=function(){function e(){y(this,e)}return g(e,[{key:"ae",value:function(e,t){this.he(e,t),t.le()}},{key:"he",value:function(e,t){if("nullValue"in e)this.fe(t,5);else if("booleanValue"in e)this.fe(t,10),t.de(e.booleanValue?1:0);else if("integerValue"in e)this.fe(t,15),t.de(wp(e.integerValue));else if("doubleValue"in e){var n=wp(e.doubleValue);isNaN(n)?this.fe(t,13):(this.fe(t,15),vp(n)?t.de(0):t.de(n))}else if("timestampValue"in e){var r=e.timestampValue;this.fe(t,20),"string"==typeof r?t._e(r):(t._e("".concat(r.seconds||"")),t.de(r.nanos||0))}else if("stringValue"in e)this.we(e.stringValue,t),this.me(t);else if("bytesValue"in e)this.fe(t,30),t.ge(xp(e.bytesValue)),this.me(t);else if("referenceValue"in e)this.ye(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.fe(t,45),t.de(i.latitude||0),t.de(i.longitude||0)}else"mapValue"in e?zp(e)?this.fe(t,Number.MAX_SAFE_INTEGER):(this.pe(e.mapValue,t),this.me(t)):"arrayValue"in e?(this.Ie(e.arrayValue,t),this.me(t)):fd()}},{key:"we",value:function(e,t){this.fe(t,25),this.Te(e,t)}},{key:"Te",value:function(e,t){t._e(e)}},{key:"pe",value:function(e,t){var n=e.fields||{};this.fe(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.we(a,t),this.he(n[a],t)}}},{key:"Ie",value:function(e,t){var n=e.values||[];this.fe(t,50);var r,i=k(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.he(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ye",value:function(e,t){var n=this;this.fe(t,37),Md.fromName(e).path.forEach((function(e){n.fe(t,60),n.Te(e,t)}))}},{key:"fe",value:function(e,t){e.de(t)}},{key:"me",value:function(e){e.de(2)}}]),e}();function Lg(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Mg(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=Lg(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Pg.Ee=new Pg;var Fg=function(){function e(){y(this,e),this.buffer=new Uint8Array(1024),this.position=0}return g(e,[{key:"Ae",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Re(n.value),n=t.next();this.Pe()}},{key:"ve",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.be(n.value),n=t.next();this.Ve()}},{key:"Se",value:function(e){var t,n=k(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Re(i);else if(i<2048)this.Re(960|i>>>6),this.Re(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Re(480|i>>>12),this.Re(128|63&i>>>6),this.Re(128|63&i);else{var a=r.codePointAt(0);this.Re(240|a>>>18),this.Re(128|63&a>>>12),this.Re(128|63&a>>>6),this.Re(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Pe()}},{key:"De",value:function(e){var t,n=k(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.be(i);else if(i<2048)this.be(960|i>>>6),this.be(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.be(480|i>>>12),this.be(128|63&i>>>6),this.be(128|63&i);else{var a=r.codePointAt(0);this.be(240|a>>>18),this.be(128|63&a>>>12),this.be(128|63&a>>>6),this.be(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ve()}},{key:"Ce",value:function(e){var t=this.xe(e),n=Mg(t);this.Ne(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"ke",value:function(e){var t=this.xe(e),n=Mg(t);this.Ne(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"$e",value:function(){this.Me(255),this.Me(255)}},{key:"Oe",value:function(){this.Fe(255),this.Fe(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ne(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Be",value:function(){return this.buffer.slice(0,this.position)}},{key:"xe",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Re",value:function(e){var t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}},{key:"be",value:function(e){var t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}},{key:"Pe",value:function(){this.Me(0),this.Me(1)}},{key:"Ve",value:function(){this.Fe(0),this.Fe(1)}},{key:"Me",value:function(e){this.Ne(1),this.buffer[this.position++]=e}},{key:"Fe",value:function(e){this.Ne(1),this.buffer[this.position++]=~e}},{key:"Ne",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),jg=function(){function e(t){y(this,e),this.Le=t}return g(e,[{key:"ge",value:function(e){this.Le.Ae(e)}},{key:"_e",value:function(e){this.Le.Se(e)}},{key:"de",value:function(e){this.Le.Ce(e)}},{key:"le",value:function(){this.Le.$e()}}]),e}(),Ug=function(){function e(t){y(this,e),this.Le=t}return g(e,[{key:"ge",value:function(e){this.Le.ve(e)}},{key:"_e",value:function(e){this.Le.De(e)}},{key:"de",value:function(e){this.Le.ke(e)}},{key:"le",value:function(){this.Le.Oe()}}]),e}(),Vg=function(){function e(){y(this,e),this.Le=new Fg,this.qe=new jg(this.Le),this.Ue=new Ug(this.Le)}return g(e,[{key:"seed",value:function(e){this.Le.seed(e)}},{key:"Ke",value:function(e){return 0===e?this.qe:this.Ue}},{key:"Be",value:function(){return this.Le.Be()}},{key:"reset",value:function(){this.Le.reset()}}]),e}(),qg=function(){function e(t,n,r,i){y(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return g(e,[{key:"Ge",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function zg(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Bg(e.arrayValue,t.arrayValue))?n:0!==(n=Bg(e.directionalValue,t.directionalValue))?n:Md.comparator(e.documentKey,t.documentKey)}function Bg(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Kg=function(){function e(t){y(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Qe=t.orderBy,this.je=[];var n,r=k(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.ze=i:this.je.push(i)}}catch(a){r.e(a)}finally{r.f()}}return g(e,[{key:"We",value:function(e){hd(e.collectionGroup===this.collectionId);var t=jd(e);if(void 0!==t&&!this.He(t))return!1;for(var n=Ud(e),r=0,i=0;r<n.length&&this.He(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.ze){var a=n[r];if(!this.Je(this.ze,a)||!this.Ye(this.Qe[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Qe.length||!this.Ye(this.Qe[i++],o))return!1}return!0}},{key:"He",value:function(e){var t,n=k(this.je);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.Je(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"Je",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Ye",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function Gg(e){var t,n;if(hd(e instanceof Yp||e instanceof Jp),e instanceof Yp){if(e instanceof hv){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return Yp.create(e.field,"==",t)})))||[];return Jp.create(r,"or")}return e}var i=e.filters.map((function(e){return Gg(e)}));return Jp.create(i,e.op)}function Wg(e){if(0===e.getFilters().length)return[];var t=Xg(Gg(e));return hd($g(t)),Qg(t)||Hg(t)?[t]:t.getFilters()}function Qg(e){return e instanceof Yp}function Hg(e){return e instanceof Jp&&tv(e)}function $g(e){return Qg(e)||Hg(e)||function(e){if(e instanceof Jp&&ev(e)){var t,n=k(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!Qg(r)&&!Hg(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function Xg(e){if(hd(e instanceof Yp||e instanceof Jp),e instanceof Yp)return e;if(1===e.filters.length)return Xg(e.filters[0]);var t=e.filters.map((function(e){return Xg(e)})),n=Jp.create(t,e.op);return $g(n=Zg(n))?n:(hd(n instanceof Jp),hd(Zp(n)),hd(n.filters.length>1),n.filters.reduce((function(e,t){return Yg(e,t)})))}function Yg(e,t){var n;return hd(e instanceof Yp||e instanceof Jp),hd(t instanceof Yp||t instanceof Jp),n=e instanceof Yp?t instanceof Yp?function(e,t){return Jp.create([e,t],"and")}(e,t):Jg(e,t):t instanceof Yp?Jg(t,e):function(e,t){if(hd(e.filters.length>0&&t.filters.length>0),Zp(e)&&Zp(t))return av(e,t.getFilters());var n=ev(e)?e:t,r=ev(e)?t:e,i=n.filters.map((function(e){return Yg(e,r)}));return Jp.create(i,"or")}(e,t),Zg(n)}function Jg(e,t){if(Zp(t))return av(t,e.getFilters());var n=t.filters.map((function(t){return Yg(e,t)}));return Jp.create(n,"or")}function Zg(e){if(hd(e instanceof Yp||e instanceof Jp),e instanceof Yp)return e;var t=e.getFilters();if(1===t.length)return Zg(t[0]);if(nv(e))return e;var n=t.map((function(e){return Zg(e)})),r=[];return n.forEach((function(t){t instanceof Yp?r.push(t):t instanceof Jp&&(t.op===e.op?r.push.apply(r,oe(t.filters)):r.push(t))})),1===r.length?r[0]:Jp.create(r,e.op)}var ek=function(){function e(){y(this,e),this.Ze=new tk}return g(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Ze.add(t),Xd.resolve()}},{key:"getCollectionParents",value:function(e,t){return Xd.resolve(this.Ze.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Xd.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Xd.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Xd.resolve(null)}},{key:"getIndexType",value:function(e,t){return Xd.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Xd.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Xd.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Xd.resolve(Kd.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Xd.resolve(Kd.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Xd.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Xd.resolve()}}]),e}(),tk=function(){function e(){y(this,e),this.index={}}return g(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new bv(Rd.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new bv(Rd.comparator)).toArray()}}]),e}(),nk=new Uint8Array(0),rk=function(){function e(t,n){y(this,e),this.user=t,this.databaseId=n,this.Xe=new tk,this.tn=new My((function(e){return Av(e)}),(function(e,t){return Nv(e,t)})),this.uid=t.uid||""}return g(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Xe.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Xe.add(t)}));var a={collectionId:r,parent:jm(i)};return ik(e).put(a)}return Xd.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Ad(t),""],!1,!0);return ik(e).W(r).next((function(e){var r,i=k(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(qm(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=ok(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=uk(e);return a.next((function(e){o.put(Cg(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=ok(e),r=uk(e),i=ak(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=ak(e),i=!0,a=new Map;return Xd.forEach(this.en(t),(function(t){return n.nn(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Qy(),o=[];return Xd.forEach(a,(function(i,a){var u;ud("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Av(t)));var s=function(e,t){var n=jd(t);if(void 0===n)return null;var r,i=k(Ov(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=k(Ud(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=k(Ov(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=k(Ud(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Rv(e,o.fieldPath,e.startAt):Pv(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Qp(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=k(Ud(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Pv(e,o.fieldPath,e.endAt):Rv(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Qp(r,i)}(a,i),h=n.sn(i,a,l),d=n.sn(i,a,f),p=n.rn(i,a,c),v=n.on(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return Xd.forEach(v,(function(n){return r.J(n,t.limit).next((function(t){t.forEach((function(t){var n=Md.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Xd.resolve(null)}))}},{key:"en",value:function(e){var t=this.tn.get(e);return t||(t=0===e.filters.length?[e]:Wg(Jp.create(e.filters,"and")).map((function(t){return Cv(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.tn.set(e,t),t)}},{key:"on",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(){var s=t?u.un(t[h/c]):nk,f=u.cn(e,s,n[h%c],r),d=u.an(e,s,i[h%c],a),p=o.map((function(t){return u.cn(e,s,t,!0)}));l.push.apply(l,oe(u.createRange(f,d,p)))},h=0;h<s;++h)f();return l}},{key:"cn",value:function(e,t,n,r){var i=new qg(e,Md.empty(),t,n);return r?i:i.Ge()}},{key:"an",value:function(e,t,n,r){var i=new qg(e,Md.empty(),t,n);return r?i.Ge():i}},{key:"nn",value:function(e,t){var n=new Kg(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=k(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.We(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.en(t);return Xd.forEach(i,(function(t){return n.nn(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new bv(Ld.comparator),r=!1,i=k(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=k(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var s,c=k(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"hn",value:function(e,t){var n,r=new Vg,i=k(Ud(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Ke(a.kind);Pg.Ee.ae(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Be()}},{key:"un",value:function(e){var t=new Vg;return Pg.Ee.ae(e,t.Ke(0)),t.Be()}},{key:"ln",value:function(e,t){var n=new Vg;return Pg.Ee.ae(Lp(this.databaseId,t),n.Ke(function(e){var t=Ud(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Be()}},{key:"rn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Vg);var i,a=0,o=k(Ud(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=k(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.fn(t,s.fieldPath)&&Fp(c))r=this.dn(r,s,c);else{var h=f.Ke(s.kind);Pg.Ee.ae(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this._n(r)}},{key:"sn",value:function(e,t,n){return this.rn(e,t,n.position)}},{key:"_n",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Be();return t}},{key:"dn",value:function(e,t,n){var r,i=oe(e),a=[],o=k(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=k(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new Vg;f.seed(l.Be()),Pg.Ee.ae(s,f.Ke(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"fn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Yp&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=ok(e),i=uk(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next((function(e){var t=[];return Xd.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new qd(t.sequenceNumber,new Kd(wg(t.readTime),new Md(qm(t.documentKey)),t.largestBatchId)):qd.empty(),r=e.fields.map((function(e){var t=c(e,2),n=t[0],r=t[1];return new Vd(Ld.fromServerFormat(n),r)}));return new Fd(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Td(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=ok(e),a=uk(e);return this.wn(e).next((function(e){return i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Xd.forEach(t,(function(t){return a.put(Cg(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Xd.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Xd.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Xd.forEach(a,(function(r){return n.mn(e,t,r).next((function(t){var a=n.gn(i,r);return t.isEqual(a)?Xd.resolve():n.yn(e,i,r,t,a)}))}))}))}))}},{key:"pn",value:function(e,t,n,r){return ak(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.ln(n,t.key),documentKey:t.key.path.toArray()})}},{key:"In",value:function(e,t,n,r){return ak(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.ln(n,t.key),t.key.path.toArray()])}},{key:"mn",value:function(e,t,n){var r=ak(e),i=new bv(zg);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.ln(n,t)])},(function(e,r){i=i.add(new qg(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"gn",value:function(e,t){var n=new bv(zg),r=this.hn(t,e);if(null==r)return n;var i=jd(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Fp(a)){var o,u=k(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new qg(t.indexId,e.key,this.un(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new qg(t.indexId,e.key,nk,r));return n}},{key:"yn",value:function(e,t,n,r,i){var a=this;ud("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=xv(a),s=xv(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=xv(o)):l?(i(u),u=xv(a)):(u=xv(a),s=xv(o))}}(r,i,zg,(function(r){o.push(a.pn(e,t,n,r))}),(function(r){o.push(a.In(e,t,n,r))})),Xd.waitFor(o)}},{key:"wn",value:function(e){var t=1;return uk(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return zg(e,t)})).filter((function(e,t,n){return!t||0!==zg(e,n[t-1])}));var r=[];r.push(e);var i,a=k(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=zg(o,e),s=zg(o,t);if(0===u)r[0]=e.Ge();else if(u>0&&s<0)r.push(o),r.push(o.Ge());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.Tn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,nk,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,nk,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"Tn",value:function(e,t){return zg(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(sk)}},{key:"getMinOffset",value:function(e,t){var n=this;return Xd.mapArray(this.en(t),(function(t){return n.nn(e,t).next((function(e){return e||fd()}))})).next(sk)}}]),e}();function ik(e){return hg(e,"collectionParents")}function ak(e){return hg(e,"indexEntries")}function ok(e){return hg(e,"indexConfiguration")}function uk(e){return hg(e,"indexState")}function sk(e){hd(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;Gd(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Kd(t.readTime,t.documentKey,n)}var ck={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},lk=function(){function e(t,n,r){y(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return g(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function fk(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.X({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){hd(1===u)})));var c,l=[],f=k(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Km(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Xd.waitFor(a).next((function(){return l}))}function hk(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw fd();t=e.noDocument}return JSON.stringify(t).length}lk.DEFAULT_COLLECTION_PERCENTILE=10,lk.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,lk.DEFAULT=new lk(41943040,lk.DEFAULT_COLLECTION_PERCENTILE,lk.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),lk.DISABLED=new lk(-1,0,0);var dk=function(){function e(t,n,r,i){y(this,e),this.userId=t,this.Tt=n,this.indexManager=r,this.referenceDelegate=i,this.En={}}return g(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return vk(e).X({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=yk(e),o=vk(e);return o.add({}).next((function(u){hd("number"==typeof u);var s,c=new dg(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Sm(e.oe,t)})),i=n.mutations.map((function(t){return Sm(e.oe,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.Tt,i.userId,c),f=[],h=new bv((function(e,t){return Td(e.canonicalString(),t.canonicalString())})),d=k(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=Km(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,Gm))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.En[u]=c.keys()})),Xd.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return vk(e).get(t).next((function(e){return e?(hd(e.userId===n.userId),xg(n.Tt,e)):null}))}},{key:"An",value:function(e,t){var n=this;return this.En[t]?Xd.resolve(this.En[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.En[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return vk(e).X({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(hd(t.batchId>=r),a=xg(n.Tt,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return vk(e).X({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return vk(e).W("userMutationsIndex",n).next((function(e){return e.map((function(e){return xg(t.Tt,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Bm(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return yk(e).X({range:i},(function(r,i,o){var u=c(r,3),s=u[0],l=u[1],f=u[2],h=qm(l);if(s===n.userId&&t.path.isEqual(h))return vk(e).get(f).next((function(e){if(!e)throw fd();hd(e.userId===n.userId),a.push(xg(n.Tt,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new bv(Td),i=[];return t.forEach((function(t){var a=Bm(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=yk(e).X({range:o},(function(e,i,a){var o=c(e,3),u=o[0],s=o[1],l=o[2],f=qm(s);u===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(u)})),Xd.waitFor(i).next((function(){return n.Rn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Bm(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new bv(Td);return yk(e).X({range:o},(function(e,t,a){var o=c(e,3),s=o[0],l=o[1],f=o[2],h=qm(l);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.Rn(e,u)}))}},{key:"Rn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(vk(e).get(t).next((function(e){if(null===e)throw fd();hd(e.userId===n.userId),r.push(xg(n.Tt,e))})))})),Xd.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return fk(e.re,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Pn(t.batchId)})),Xd.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Pn",value:function(e){delete this.En[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Xd.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return yk(e).X({range:r},(function(e,n,r){if(e[0]===t.userId){var a=qm(e[1]);i.push(a)}else r.done()})).next((function(){hd(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return pk(e,this.userId,t)}},{key:"vn",value:function(e){var t=this;return mk(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"ue",value:function(t,n,r,i){return hd(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function pk(e,t,n){var r=Bm(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return yk(e).X({range:a,Z:!0},(function(e,n,r){var a=c(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function vk(e){return hg(e,"mutations")}function yk(e){return hg(e,"documentMutations")}function mk(e){return hg(e,"mutationQueues")}var gk=function(){function e(t){y(this,e),this.bn=t}return g(e,[{key:"next",value:function(){return this.bn+=2,this.bn}}],[{key:"Vn",value:function(){return new e(0)}},{key:"Sn",value:function(){return new e(-1)}}]),e}(),kk=function(){function e(t,n){y(this,e),this.referenceDelegate=t,this.Tt=n}return g(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Dn(e).next((function(n){var r=new gk(n.highestTargetId);return n.highestTargetId=r.next(),t.Cn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Dn(e).next((function(e){return Dd.fromTimestamp(new Nd(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Dn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Dn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Cn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.xn(e,t).next((function(){return n.Dn(e).next((function(r){return r.targetCount+=1,n.Nn(t,r),n.Cn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.xn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return bk(e).delete(t.targetId)})).next((function(){return n.Dn(e)})).next((function(t){return hd(t.targetCount>0),t.targetCount-=1,n.Cn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return bk(e).X((function(o,u){var s=_g(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Xd.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return bk(e).X((function(e,n){var r=_g(n);t(r)}))}},{key:"Dn",value:function(e){return wk(e).get("targetGlobalKey").next((function(e){return hd(null!==e),e}))}},{key:"Cn",value:function(e,t){return wk(e).put("targetGlobalKey",t)}},{key:"xn",value:function(e,t){return bk(e).put(Sg(this.Tt,t))}},{key:"Nn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Dn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Av(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return bk(e).X({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=_g(n);Nv(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=xk(e);return t.forEach((function(t){var o=jm(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Xd.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=xk(e);return Xd.forEach(t,(function(t){var a=jm(t.path);return Xd.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=xk(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=xk(e),i=Qy();return r.X({range:n,Z:!0},(function(e,t,n){var r=qm(e[1]),a=new Md(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=jm(t.path),r=IDBKeyRange.bound([n],[Ad(n)],!1,!0),i=0;return xk(e).X({index:"documentTargetsIndex",Z:!0,range:r},(function(e,t,n){var r=c(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"ie",value:function(e,t){return bk(e).get(t).next((function(e){return e?_g(e):null}))}}]),e}();function bk(e){return hg(e,"targets")}function wk(e){return hg(e,"targetGlobal")}function xk(e){return hg(e,"targetDocuments")}function _k(e,t){var n=c(e,2),r=n[0],i=n[1],a=c(t,2),o=a[0],u=a[1],s=Td(r,o);return 0===s?Td(i,u):s}var Sk=function(){function e(t){y(this,e),this.kn=t,this.buffer=new bv(_k),this.$n=0}return g(e,[{key:"Mn",value:function(){return++this.$n}},{key:"On",value:function(e){var t=[e,this.Mn()];if(this.buffer.size<this.kn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();_k(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Ik=function(){function e(t,n,r){y(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Fn=null}return g(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Bn(6e4)}},{key:"stop",value:function(){this.Fn&&(this.Fn.cancel(),this.Fn=null)}},{key:"started",get:function(){return null!==this.Fn}},{key:"Bn",value:function(e){var t=this;ud("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Fn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Fn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!tp(e.t0)){e.next=12;break}ud("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Hd(e.t0);case 14:return e.next=16,t.Bn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),Ek=function(){function e(t,n){y(this,e),this.Ln=t,this.params=n}return g(e,[{key:"calculateTargetCount",value:function(e,t){return this.Ln.qn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Xd.resolve(sp.at);var r=new Sk(t);return this.Ln.forEachTarget(e,(function(e){return r.On(e.sequenceNumber)})).next((function(){return n.Ln.Un(e,(function(e){return r.On(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Ln.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Ln.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(ud("LruGarbageCollector","Garbage collection skipped; disabled"),Xd.resolve(ck)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(ud("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),ck):n.Kn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Ln.getCacheSize(e)}},{key:"Kn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(ud("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),od()<=fe.DEBUG&&ud("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Xd.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),Tk=function(){function e(t,n){y(this,e),this.db=t,this.garbageCollector=function(e,t){return new Ek(e,t)}(this,n)}return g(e,[{key:"qn",value:function(e){var t=this.Gn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Gn",value:function(e){var t=0;return this.Un(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Un",value:function(e,t){return this.Qn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Ck(e,n)}},{key:"removeReference",value:function(e,t,n){return Ck(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Ck(e,t)}},{key:"jn",value:function(e,t){return function(e,t){var n=!1;return mk(e).tt((function(r){return pk(e,r,t).next((function(e){return e&&(n=!0),Xd.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Qn(e,(function(o,u){if(u<=t){var s=n.jn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Dd.min()),xk(e).delete([0,jm(o.path)])}))}));i.push(s)}})).next((function(){return Xd.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Ck(e,t)}},{key:"Qn",value:function(e,t){var n,r=xk(e),i=sp.at;return r.X({index:"documentTargetsIndex"},(function(e,r){var a=c(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==sp.at&&t(new Md(qm(n)),i),i=s,n=u):i=sp.at})).next((function(){i!==sp.at&&t(new Md(qm(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Ck(e,t){return xk(e).put(function(e,t){return{targetId:0,path:jm(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Ak=function(){function e(){y(this,e),this.changes=new My((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return g(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Ev.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Xd.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Nk=function(){function e(t){y(this,e),this.Tt=t}return g(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Pk(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Pk(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],kg(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.zn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Ev.newInvalidDocument(t);return Pk(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Lk(t))},(function(e,i){r=n.Wn(t,i)})).next((function(){return r}))}},{key:"Hn",value:function(e,t){var n=this,r={size:0,document:Ev.newInvalidDocument(t)};return Pk(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Lk(t))},(function(e,i){r={document:n.Wn(t,i),size:hk(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=jy();return this.Jn(e,t,(function(e,t){var i=n.Wn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Yn",value:function(e,t){var n=this,r=jy(),i=new mv(Md.comparator);return this.Jn(e,t,(function(e,t){var a=n.Wn(e,t);r=r.insert(e,a),i=i.insert(e,hk(t))})).next((function(){return{documents:r,Zn:i}}))}},{key:"Jn",value:function(e,t,n){if(t.isEmpty())return Xd.resolve();var r=new bv(Fk);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Lk(r.first()),Lk(r.last())),a=r.getIterator(),o=a.getNext();return Pk(e).X({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Md.fromSegments([].concat(oe(t.prefixPath),[t.collectionGroup,t.documentId]));o&&Fk(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.j(Lk(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),kg(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Pk(e).W(IDBKeyRange.bound(o,u,!0)).next((function(e){var n,a=jy(),o=k(e);try{for(o.s();!(n=o.n()).done;){var u=n.value,s=i.Wn(Md.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s.isFoundDocument()&&($v(t,s)||r.has(s.key))&&(a=a.insert(s.key,s))}}catch(c){o.e(c)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=jy(),o=Mk(t,n),u=Mk(t,Kd.max());return Pk(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.Wn(Md.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Ok(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Rk(e).get("remoteDocumentGlobalKey").next((function(e){return hd(!!e),e}))}},{key:"zn",value:function(e,t){return Rk(e).put("remoteDocumentGlobalKey",t)}},{key:"Wn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=xm(e.oe,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Md.fromSegments(t.noDocument.path),i=wg(t.noDocument.readTime);n=Ev.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return fd();var a=Md.fromSegments(t.unknownDocument.path),o=wg(t.unknownDocument.version);n=Ev.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Nd(e[0],e[1]);return Dd.fromTimestamp(t)}(t.readTime)),n}(this.Tt,t);if(!n.isNoDocument()||!n.version.isEqual(Dd.min()))return n}return Ev.newInvalidDocument(e)}}]),e}();function Dk(e){return new Nk(e)}var Ok=function(e){x(n,e);var t=I(n);function n(e,r){var i;return y(this,n),(i=t.call(this)).Xn=e,i.trackRemovals=r,i.ts=new My((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return g(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new bv((function(e,t){return Td(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.ts.get(a);if(n.push(t.Xn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=gg(t.Xn.Tt,o);i=i.add(a.path.popLast());var c=hk(s);r+=c-u.size,n.push(t.Xn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=gg(t.Xn.Tt,o.convertToNoDocument(Dd.min()));n.push(t.Xn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Xn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Xn.updateMetadata(e,r)),Xd.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Xn.Hn(e,t).next((function(e){return n.ts.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Xn.Yn(e,t).next((function(e){var t=e.documents;return e.Zn.forEach((function(e,r){n.ts.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Ak);function Rk(e){return hg(e,"remoteDocumentGlobal")}function Pk(e){return hg(e,"remoteDocumentsV14")}function Lk(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Mk(e,t){var n=t.documentKey.path.toArray();return[e,kg(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Fk(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Td(n[a],r[a]))return i;return(i=Td(n.length,r.length))||((i=Td(n[n.length-2],r[r.length-2]))||Td(n[n.length-1],r[r.length-1]))}var jk=g((function e(t,n){y(this,e),this.overlayedDocument=t,this.mutatedFields=n})),Uk=function(){function e(t,n,r,i){y(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return g(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&wy(r.mutation,e,_v.empty(),Nd.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Qy()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qy(),i=zy();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Vy();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=zy();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Qy())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=jy(),a=Ky(),o=Ky();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Iy)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),wy(o.mutation,t,o.mutation.getFieldMask(),Nd.now())):a.set(t.key,_v.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new jk(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Ky(),i=new mv((function(e,t){return e-t})),a=Qy();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=k(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||_v.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||Qy()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=By();c.forEach((function(e){if(!a.has(e)){var n=ky(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return Xd.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Md.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):qv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Xd.resolve(zy()),u=-1,s=a;return o.next((function(t){return Xd.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?Xd.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,Qy())})).next((function(e){return{batchId:u,changes:qy(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Md(t)).next((function(e){var t=Vy();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Vy();return this.indexManager.getCollectionParents(e,i).next((function(o){return Xd.forEach(o,(function(o){var u=function(e,t){return new Lv(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,Ev.newInvalidDocument(r)))}));var n=Vy();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&wy(a.mutation,i,_v.empty(),Nd.now()),$v(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),Vk=function(){function e(t){y(this,e),this.Tt=t,this.es=new Map,this.ns=new Map}return g(e,[{key:"getBundleMetadata",value:function(e,t){return Xd.resolve(this.es.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.es.set(t.id,{id:(n=t).id,version:n.version,createTime:hm(n.createTime)}),Xd.resolve()}},{key:"getNamedQuery",value:function(e,t){return Xd.resolve(this.ns.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.ns.set(t.name,function(e){return{name:e.name,query:Ig(e.bundledQuery),readTime:hm(e.readTime)}}(t)),Xd.resolve()}}]),e}(),qk=function(){function e(){y(this,e),this.overlays=new mv(Md.comparator),this.ss=new Map}return g(e,[{key:"getOverlay",value:function(e,t){return Xd.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=zy();return Xd.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ce(e,t,i)})),Xd.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.ss.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.ss.delete(n)),Xd.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=zy(),i=t.length+1,a=new Md(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Xd.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new mv((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=zy(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=zy(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Xd.resolve(s)}},{key:"ce",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.ss.get(r.largestBatchId).delete(n.key);this.ss.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new vg(t,n));var a=this.ss.get(t);void 0===a&&(a=Qy(),this.ss.set(t,a)),this.ss.set(t,a.add(n.key))}}]),e}(),zk=function(){function e(){y(this,e),this.rs=new bv(Bk.os),this.us=new bv(Bk.cs)}return g(e,[{key:"isEmpty",value:function(){return this.rs.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Bk(e,t);this.rs=this.rs.add(n),this.us=this.us.add(n)}},{key:"hs",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.ls(new Bk(e,t))}},{key:"fs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"ds",value:function(e){var t=this,n=new Md(new Rd([])),r=new Bk(n,e),i=new Bk(n,e+1),a=[];return this.us.forEachInRange([r,i],(function(e){t.ls(e),a.push(e.key)})),a}},{key:"_s",value:function(){var e=this;this.rs.forEach((function(t){return e.ls(t)}))}},{key:"ls",value:function(e){this.rs=this.rs.delete(e),this.us=this.us.delete(e)}},{key:"ws",value:function(e){var t=new Md(new Rd([])),n=new Bk(t,e),r=new Bk(t,e+1),i=Qy();return this.us.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Bk(e,0),n=this.rs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Bk=function(){function e(t,n){y(this,e),this.key=t,this.gs=n}return g(e,null,[{key:"os",value:function(e,t){return Md.comparator(e.key,t.key)||Td(e.gs,t.gs)}},{key:"cs",value:function(e,t){return Td(e.gs,t.gs)||Md.comparator(e.key,t.key)}}]),e}(),Kk=function(){function e(t,n){y(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ys=1,this.ps=new bv(Bk.os)}return g(e,[{key:"checkEmpty",value:function(e){return Xd.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ys;this.ys++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new dg(i,t,n,r);this.mutationQueue.push(a);var o,u=k(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.ps=this.ps.add(new Bk(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Xd.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Xd.resolve(this.Is(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Ts(n),i=r<0?0:r;return Xd.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Xd.resolve(0===this.mutationQueue.length?-1:this.ys-1)}},{key:"getAllMutationBatches",value:function(e){return Xd.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Bk(t,0),i=new Bk(t,Number.POSITIVE_INFINITY),a=[];return this.ps.forEachInRange([r,i],(function(e){var t=n.Is(e.gs);a.push(t)})),Xd.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new bv(Td);return t.forEach((function(e){var t=new Bk(e,0),i=new Bk(e,Number.POSITIVE_INFINITY);n.ps.forEachInRange([t,i],(function(e){r=r.add(e.gs)}))})),Xd.resolve(this.Es(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Md.isDocumentKey(i)||(i=i.child(""));var a=new Bk(new Md(i),0),o=new bv(Td);return this.ps.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.gs)),!0)}),a),Xd.resolve(this.Es(o))}},{key:"Es",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Is(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;hd(0===this.As(t.batchId,"removed")),this.mutationQueue.shift();var r=this.ps;return Xd.forEach(t.mutations,(function(i){var a=new Bk(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ps=r}))}},{key:"Pn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Bk(t,0),r=this.ps.firstAfterOrEqual(n);return Xd.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Xd.resolve()}},{key:"As",value:function(e,t){return this.Ts(e)}},{key:"Ts",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"Is",value:function(e){var t=this.Ts(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),Gk=function(){function e(t){y(this,e),this.Rs=t,this.docs=new mv(Md.comparator),this.size=0}return g(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Rs(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Xd.resolve(n?n.document.mutableCopy():Ev.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=jy();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Ev.newInvalidDocument(e))})),Xd.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=jy(),a=t.path,o=new Md(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Gd(Bd(l),n)<=0||(r.has(l.key)||$v(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return Xd.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){fd()}},{key:"Ps",value:function(e,t){return Xd.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Wk(this)}},{key:"getSize",value:function(e){return Xd.resolve(this.size)}}]),e}(),Wk=function(e){x(n,e);var t=I(n);function n(e){var r;return y(this,n),(r=t.call(this)).Xn=e,r}return g(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Xn.addEntry(e,i)):t.Xn.removeEntry(r)})),Xd.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Xn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Xn.getEntries(e,t)}}]),n}(Ak),Qk=function(){function e(t){y(this,e),this.persistence=t,this.vs=new My((function(e){return Av(e)}),Nv),this.lastRemoteSnapshotVersion=Dd.min(),this.highestTargetId=0,this.bs=0,this.Vs=new zk,this.targetCount=0,this.Ss=gk.Vn()}return g(e,[{key:"forEachTarget",value:function(e,t){return this.vs.forEach((function(e,n){return t(n)})),Xd.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Xd.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Xd.resolve(this.bs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ss.next(),Xd.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.bs&&(this.bs=t),Xd.resolve()}},{key:"xn",value:function(e){this.vs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ss=new gk(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.xn(t),this.targetCount+=1,Xd.resolve()}},{key:"updateTargetData",value:function(e,t){return this.xn(t),Xd.resolve()}},{key:"removeTargetData",value:function(e,t){return this.vs.delete(t.target),this.Vs.ds(t.targetId),this.targetCount-=1,Xd.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.vs.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.vs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Xd.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Xd.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.vs.get(t)||null;return Xd.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Vs.hs(t,n),Xd.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Vs.fs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Xd.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Vs.ds(t),Xd.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Vs.ws(t);return Xd.resolve(n)}},{key:"containsKey",value:function(e,t){return Xd.resolve(this.Vs.containsKey(t))}}]),e}(),Hk=function(){function e(t,n){var r=this;y(this,e),this.Ds={},this.overlays={},this.Cs=new sp(0),this.xs=!1,this.xs=!0,this.referenceDelegate=t(this),this.Ns=new Qk(this),this.indexManager=new ek,this.remoteDocumentCache=new Gk((function(e){return r.referenceDelegate.ks(e)})),this.Tt=new mg(n),this.$s=new Vk(this.Tt)}return g(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.xs=!1,Promise.resolve()}},{key:"started",get:function(){return this.xs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new qk,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Ds[e.toKey()];return n||(n=new Kk(t,this.referenceDelegate),this.Ds[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Ns}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.$s}},{key:"runTransaction",value:function(e,t,n){var r=this;ud("MemoryPersistence","Starting transaction:",e);var i=new $k(this.Cs.next());return this.referenceDelegate.Ms(),n(i).next((function(e){return r.referenceDelegate.Os(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Fs",value:function(e,t){return Xd.or(Object.values(this.Ds).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),$k=function(e){x(n,e);var t=I(n);function n(e){var r;return y(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return g(n)}(Qd),Xk=function(){function e(t){y(this,e),this.persistence=t,this.Bs=new zk,this.Ls=null}return g(e,[{key:"Us",get:function(){if(this.Ls)return this.Ls;throw fd()}},{key:"addReference",value:function(e,t,n){return this.Bs.addReference(n,t),this.Us.delete(n.toString()),Xd.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Bs.removeReference(n,t),this.Us.add(n.toString()),Xd.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Us.add(t.toString()),Xd.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Bs.ds(t.targetId).forEach((function(e){return n.Us.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Us.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ms",value:function(){this.Ls=new Set}},{key:"Os",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Xd.forEach(this.Us,(function(r){var i=Md.fromPath(r);return t.Ks(e,i).next((function(e){e||n.removeEntry(i,Dd.min())}))})).next((function(){return t.Ls=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Ks(e,t).next((function(e){e?n.Us.delete(t.toString()):n.Us.add(t.toString())}))}},{key:"ks",value:function(e){return 0}},{key:"Ks",value:function(e,t){var n=this;return Xd.or([function(){return Xd.resolve(n.Bs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Fs(e,t)}])}}],[{key:"qs",value:function(t){return new e(t)}}]),e}(),Yk=function(){function e(t){y(this,e),this.Tt=t}return g(e,[{key:"F",value:function(e,t,n,r){var i=this,a=new Yd("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",zm,{unique:!0}),e.createObjectStore("documentMutations")}(e),Jk(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Xd.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Jk(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Dd.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").W().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",zm,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Xd.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Gs(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Qs(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.js(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.zs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Ws(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:rg});t.createIndex("collectionPathOverlayIndex",ig,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",ag,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Wm});t.createIndex("documentKeyIndex",Qm),t.createIndex("collectionGroupIndex",Hm)}(e)})).next((function(){return i.Hs(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.Js(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Zm}).createIndex("sequenceNumberIndex",eg,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:tg}).createIndex("documentKeyIndex",ng,{unique:!1})}(e)}))),o}},{key:"Qs",value:function(e){var t=0;return e.store("remoteDocuments").X((function(e,n){t+=hk(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Gs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next((function(n){return Xd.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",i).next((function(r){return Xd.forEach(r,(function(r){hd(r.userId===n.userId);var i=xg(t.Tt,r);return fk(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"js",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.X((function(n,i){var a=new Rd(n),o=function(e){return[0,jm(e)]}(a);r.push(t.get(o).next((function(n){return n?Xd.resolve():function(n){return t.put({targetId:0,path:jm(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Xd.waitFor(r)}))}))}},{key:"zs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Jm});var n=t.store("collectionParents"),r=new tk,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:jm(i)})}};return t.store("remoteDocuments").X({Z:!0},(function(e,t){var n=new Rd(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").X({Z:!0},(function(e,t){var n=c(e,3),r=(n[0],n[1]),a=(n[2],qm(r));return i(a.popLast())}))}))}},{key:"Ws",value:function(e){var t=this,n=e.store("targets");return n.X((function(e,r){var i=_g(r),a=Sg(t.Tt,i);return n.put(a)}))}},{key:"Hs",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.X((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Md(Rd.fromString(i.document.name).popFirst(5)):i.noDocument?Md.fromSegments(i.noDocument.path):i.unknownDocument?Md.fromSegments(i.unknownDocument.path):fd()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return Xd.waitFor(r)}))}},{key:"Js",value:function(e,t){var n=this,r=t.store("mutations"),i=Dk(this.Tt),a=new Hk(Xk.qs,this.Tt.oe);return r.W().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Qy();xg(n.Tt,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),Xd.forEach(r,(function(e,r){var o=new rd(r),u=Og.ue(n.Tt,o),s=a.getIndexManager(o),c=dk.ue(o,n.Tt,s,a.referenceDelegate);return new Uk(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new fg(t,sp.at),e).next()}))}))}}]),e}();function Jk(e){e.createObjectStore("targetDocuments",{keyPath:Xm}).createIndex("documentTargetsIndex",Ym,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",$m,{unique:!0}),e.createObjectStore("targetGlobal")}var Zk="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",eb=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(y(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Ys=a,this.window=o,this.document=u,this.Zs=c,this.Xs=l,this.ti=f,this.Cs=null,this.xs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ei=null,this.inForeground=!1,this.ni=null,this.si=null,this.ii=Number.NEGATIVE_INFINITY,this.ri=function(e){return Promise.resolve()},!e.C())throw new vd(pd.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Tk(this,i),this.oi=n+"main",this.Tt=new mg(s),this.ui=new Jd(this.oi,this.ti,new Yk(this.Tt)),this.Ns=new kk(this.referenceDelegate,this.Tt),this.remoteDocumentCache=Dk(this.Tt),this.$s=new Ag,this.window&&this.window.localStorage?this.ci=this.window.localStorage:(this.ci=null,!1===l&&sd("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return g(e,[{key:"start",value:function(){var e=this;return this.ai().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new vd(pd.FAILED_PRECONDITION,Zk);return e.hi(),e.li(),e.fi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Ns.getHighestSequenceNumber(t)}))})).then((function(t){e.Cs=new sp(t,e.Zs)})).then((function(){e.xs=!0})).catch((function(t){return e.ui&&e.ui.close(),Promise.reject(t)}))}},{key:"di",value:function(e){var t=this;return this.ri=function(){var n=d(f().mark((function n(r){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ui.L(function(){var t=d(f().mark((function t(n){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ys.enqueueAndForget(d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ai();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ai",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return nb(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e._i(t).next((function(t){t||(e.isPrimary=!1,e.Ys.enqueueRetryable((function(){return e.ri(!1)})))}))})).next((function(){return e.wi(t)})).next((function(n){return e.isPrimary&&!n?e.mi(t).next((function(){return!1})):!!n&&e.gi(t).next((function(){return!0}))}))})).catch((function(t){if(tp(t))return ud("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return ud("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Ys.enqueueRetryable((function(){return e.ri(t)})),e.isPrimary=t}))}},{key:"_i",value:function(e){var t=this;return tb(e).get("owner").next((function(e){return Xd.resolve(t.yi(e))}))}},{key:"pi",value:function(e){return nb(e).delete(this.clientId)}},{key:"Ii",value:function(){var e=d(f().mark((function e(){var t,n,r,i,a=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Ti(this.ii,18e5)){e.next=6;break}return this.ii=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=hg(e,"clientMetadata");return t.W().next((function(e){var n=a.Ei(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Xd.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.ci){n=k(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.ci.removeItem(this.Ai(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fi",value:function(){var e=this;this.si=this.Ys.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ai().then((function(){return e.Ii()})).then((function(){return e.fi()}))}))}},{key:"yi",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"wi",value:function(e){var t=this;return this.Xs?Xd.resolve(!0):tb(e).get("owner").next((function(n){if(null!==n&&t.Ti(n.leaseTimestampMs,5e3)&&!t.Ri(n.ownerId)){if(t.yi(n)&&t.networkEnabled)return!0;if(!t.yi(n)){if(!n.allowTabSynchronization)throw new vd(pd.FAILED_PRECONDITION,Zk);return!1}}return!(!t.networkEnabled||!t.inForeground)||nb(e).W().next((function(e){return void 0===t.Ei(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&ud("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=d(f().mark((function e(){var t=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.xs=!1,this.Pi(),this.si&&(this.si.cancel(),this.si=null),this.vi(),this.bi(),e.next=7,this.ui.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new fg(e,sp.at);return t.mi(n).next((function(){return t.pi(n)}))}));case 7:this.ui.close(),this.Vi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ei",value:function(e,t){var n=this;return e.filter((function(e){return n.Ti(e.updateTimeMs,t)&&!n.Ri(e.clientId)}))}},{key:"Si",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return nb(t).W().next((function(t){return e.Ei(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.xs}},{key:"getMutationQueue",value:function(e,t){return dk.ue(e,this.Tt,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Ns}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new rk(e,this.Tt.oe.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Og.ue(this.Tt,e)}},{key:"getBundleCache",value:function(){return this.$s}},{key:"runTransaction",value:function(e,t,n){var r=this;ud("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.ti)?lg:14===i?cg:13===i?sg:12===i?ug:11===i?og:void fd();return this.ui.runTransaction(e,o,u,(function(i){return a=new fg(i,r.Cs?r.Cs.next():sp.at),"readwrite-primary"===t?r._i(a).next((function(e){return!!e||r.wi(a)})).next((function(t){if(!t)throw sd("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Ys.enqueueRetryable((function(){return r.ri(!1)})),new vd(pd.FAILED_PRECONDITION,Wd);return n(a)})).next((function(e){return r.gi(a).next((function(){return e}))})):r.Di(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Di",value:function(e){var t=this;return tb(e).get("owner").next((function(e){if(null!==e&&t.Ti(e.leaseTimestampMs,5e3)&&!t.Ri(e.ownerId)&&!t.yi(e)&&!(t.Xs||t.allowTabSynchronization&&e.allowTabSynchronization))throw new vd(pd.FAILED_PRECONDITION,Zk)}))}},{key:"gi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return tb(e).put("owner",t)}},{key:"mi",value:function(e){var t=this,n=tb(e);return n.get("owner").next((function(e){return t.yi(e)?(ud("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Xd.resolve()}))}},{key:"Ti",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(sd("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"hi",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ni=function(){e.Ys.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ai()}))},this.document.addEventListener("visibilitychange",this.ni),this.inForeground="visible"===this.document.visibilityState)}},{key:"vi",value:function(){this.ni&&(this.document.removeEventListener("visibilitychange",this.ni),this.ni=null)}},{key:"li",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ei=function(){t.Pi();var e=/(?:Version|Mobile)\/1[456]/;!q()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.Ys.enterRestrictedMode(!0),t.Ys.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ei))}},{key:"bi",value:function(){this.ei&&(this.window.removeEventListener("pagehide",this.ei),this.ei=null)}},{key:"Ri",value:function(e){var t;try{var n=null!==(null===(t=this.ci)||void 0===t?void 0:t.getItem(this.Ai(e)));return ud("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return sd("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Pi",value:function(){if(this.ci)try{this.ci.setItem(this.Ai(this.clientId),String(Date.now()))}catch(hc){sd("Failed to set zombie client id.",hc)}}},{key:"Vi",value:function(){if(this.ci)try{this.ci.removeItem(this.Ai(this.clientId))}catch(hc){}}},{key:"Ai",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"C",value:function(){return Jd.C()}}]),e}();function tb(e){return hg(e,"owner")}function nb(e){return hg(e,"clientMetadata")}function rb(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var ib=function(){function e(t,n,r,i){y(this,e),this.targetId=t,this.fromCache=n,this.Ci=r,this.xi=i}return g(e,null,[{key:"Ni",value:function(t,n){var r,i=Qy(),a=Qy(),o=k(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),ab=function(){function e(){y(this,e),this.ki=!1}return g(e,[{key:"initialize",value:function(e,t){this.$i=e,this.indexManager=t,this.ki=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Mi(e,t).next((function(a){return a||i.Oi(e,t,r,n)})).next((function(n){return n||i.Fi(e,t)}))}},{key:"Mi",value:function(e,t){var n=this;if(jv(t))return Xd.resolve(null);var r=Bv(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=Gv(t,null,"F"),r=Bv(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=Qy.apply(void 0,oe(i));return n.$i.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Bi(t,i);return n.Li(t,o,a,r.readTime)?n.Mi(e,Gv(t,null,"F")):n.qi(e,o,t,r)}))}))})))}))}},{key:"Oi",value:function(e,t,n,r){var i=this;return jv(t)||r.isEqual(Dd.min())?this.Fi(e,t):this.$i.getDocuments(e,n).next((function(a){var o=i.Bi(t,a);return i.Li(t,o,n,r)?i.Fi(e,t):(od()<=fe.DEBUG&&ud("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Hv(t)),i.qi(e,o,t,zd(r,-1)))}))}},{key:"Bi",value:function(e,t){var n=new bv(Yv(e));return t.forEach((function(t,r){$v(e,r)&&(n=n.add(r))})),n}},{key:"Li",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Fi",value:function(e,t){return od()<=fe.DEBUG&&ud("QueryEngine","Using full collection scan to execute query:",Hv(t)),this.$i.getDocumentsMatchingQuery(e,t,Kd.min())}},{key:"qi",value:function(e,t,n,r){return this.$i.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),ob=function(){function e(t,n,r,i){y(this,e),this.persistence=t,this.Ui=n,this.Tt=i,this.Ki=new mv(Td),this.Gi=new My((function(e){return Av(e)}),Nv),this.Qi=new Map,this.ji=t.getRemoteDocumentCache(),this.Ns=t.getTargetCache(),this.$s=t.getBundleCache(),this.zi(r)}return g(e,[{key:"zi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Uk(this.ji,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ji.setIndexManager(this.indexManager),this.Ui.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ki)}))}}]),e}();function ub(e,t,n,r){return new ob(e,t,n,r)}function sb(e,t){return cb.apply(this,arguments)}function cb(){return cb=d(f().mark((function e(t,n){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=dd(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.zi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Qy(),s=k(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=k(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(b){f.e(b)}finally{f.f()}}}catch(b){s.e(b)}finally{s.f()}var d,p=k(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=k(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(b){m.e(b)}finally{m.f()}}}catch(b){p.e(b)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{Wi:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),cb.apply(this,arguments)}function lb(e,t){var n=dd(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.ji.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Xd.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);hd(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Qy(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function fb(e){var t=dd(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Ns.getLastRemoteSnapshotVersion(e)}))}function hb(e,t){var n=dd(e),r=t.snapshotVersion,i=n.Ki;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.ji.newChangeBuffer({trackRemovals:!0});i=n.Ki;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Ns.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Ns.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(gp.EMPTY_BYTE_STRING,Dd.min()).withLastLimboFreeSnapshotVersion(Dd.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Ns.updateTargetData(e,c))}}));var u=jy(),s=Qy();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(db(e,a,t.documentUpdates).next((function(e){u=e.Hi,s=e.Ji}))),!r.isEqual(Dd.min())){var c=n.Ns.getLastRemoteSnapshotVersion(e).next((function(t){return n.Ns.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Xd.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Ki=i,e}))}function db(e,t,n){var r=Qy(),i=Qy();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=jy();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Dd.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):ud("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Hi:r,Ji:i}}))}function pb(e,t){var n=dd(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function vb(e,t){var n=dd(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Ns.getTargetData(e,t).next((function(i){return i?(r=i,Xd.resolve(r)):n.Ns.allocateTargetId(e).next((function(i){return r=new yg(t,i,0,e.currentSequenceNumber),n.Ns.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ki.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ki=n.Ki.insert(e.targetId,e),n.Gi.set(t,e.targetId)),e}))}function yb(e,t,n){return mb.apply(this,arguments)}function mb(){return mb=d(f().mark((function e(t,n,r){var i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=dd(t),a=i.Ki.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),tp(e.t1)){e.next=12;break}throw e.t1;case 12:ud("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ki=i.Ki.remove(n),i.Gi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),mb.apply(this,arguments)}function gb(e,t,n){var r=dd(e),i=Dd.min(),a=Qy();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=dd(e),i=r.Gi.get(n);return void 0!==i?Xd.resolve(r.Ki.get(i)):r.Ns.getTargetData(t,n)}(r,e,Bv(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ns.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Ui.getDocumentsMatchingQuery(e,t,n?i:Dd.min(),n?a:Qy())})).next((function(e){return wb(r,Xv(t),e),{documents:e,Yi:a}}))}))}function kb(e,t){var n=dd(e),r=dd(n.Ns),i=n.Ki.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.ie(e,t).next((function(e){return e?e.target:null}))}))}function bb(e,t){var n=dd(e),r=n.Qi.get(t)||Dd.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.ji.getAllFromCollectionGroup(e,t,zd(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return wb(n,t,e),e}))}function wb(e,t,n){var r=e.Qi.get(t)||Dd.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Qi.set(t,r)}function xb(e,t,n,r){return _b.apply(this,arguments)}function _b(){return _b=d(f().mark((function e(t,n,r,i){var a,o,u,s,c,l,h,d,p,v;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=dd(t),o=Qy(),u=jy(),s=k(r);try{for(s.s();!(c=s.n()).done;)l=c.value,h=n.Zi(l.metadata.name),l.document&&(o=o.add(h)),(d=n.Xi(l)).setReadTime(n.tr(l.metadata.readTime)),u=u.insert(h,d)}catch(f){s.e(f)}finally{s.f()}return p=a.ji.newChangeBuffer({trackRemovals:!0}),e.next=7,vb(a,function(e){return Bv(Fv(Rd.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return v=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return db(e,p,u).next((function(t){return p.apply(e),t})).next((function(t){return a.Ns.removeMatchingKeysForTargetId(e,v.targetId).next((function(){return a.Ns.addMatchingKeys(e,o,v.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.Hi,t.Ji)})).next((function(){return t.Hi}))}))})));case 9:case"end":return e.stop()}}),e)}))),_b.apply(this,arguments)}function Sb(e,t){return Ib.apply(this,arguments)}function Ib(){return Ib=d(f().mark((function e(t,n){var r,i,a,o=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Qy(),e.next=3,vb(t,Bv(Ig(n.bundledQuery)));case 3:return i=e.sent,a=dd(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=hm(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.$s.saveNamedQuery(e,n);var o=i.withResumeToken(gp.EMPTY_BYTE_STRING,t);return a.Ki=a.Ki.insert(o.targetId,o),a.Ns.updateTargetData(e,o).next((function(){return a.Ns.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Ns.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.$s.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Ib.apply(this,arguments)}function Eb(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Tb(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Cb(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Ab=function(){function e(t,n,r,i){y(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return g(e,[{key:"nr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"er",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new vd(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(sd("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Nb=function(){function e(t,n,r){y(this,e),this.targetId=t,this.state=n,this.error=r}return g(e,[{key:"nr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"er",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new vd(i.error.code,i.error.message))),a?new e(t,i.state,r):(sd("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Db=function(){function e(t,n){y(this,e),this.clientId=t,this.activeTargetIds=n}return g(e,null,[{key:"er",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=$y(),o=0;i&&o<r.activeTargetIds.length;++o)i=yp(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(sd("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Ob=function(){function e(t,n){y(this,e),this.clientId=t,this.onlineState=n}return g(e,null,[{key:"er",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(sd("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Rb=function(){function e(){y(this,e),this.activeTargetIds=$y()}return g(e,[{key:"sr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"ir",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"nr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Pb=function(){function e(t,n,r,i,a){y(this,e),this.window=t,this.Ys=n,this.persistenceKey=r,this.rr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ur=this.cr.bind(this),this.ar=new mv(Td),this.started=!1,this.hr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.lr=Eb(this.persistenceKey,this.rr),this.dr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ar=this.ar.insert(this.rr,new Rb),this._r=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.wr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.mr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.gr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.yr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.ur)}return g(e,[{key:"start",value:function(){var e=d(f().mark((function e(){var t,n,r,i,a,o,u,s,c,l,h,d=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Si();case 2:t=e.sent,n=k(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.rr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Eb(this.persistenceKey,i)))&&(o=Db.er(i,a))&&(this.ar=this.ar.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.pr(),(u=this.storage.getItem(this.gr))&&(s=this.Ir(u))&&this.Tr(s),c=k(this.hr);try{for(c.s();!(l=c.n()).done;)h=l.value,this.cr(h)}catch(f){c.e(f)}finally{c.f()}this.hr=[],this.window.addEventListener("pagehide",(function(){return d.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.dr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Er(this.ar)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ar.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Ar(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Ar(e,t,n),this.Rr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Cb(this.persistenceKey,e));if(n){var r=Nb.er(e,n);r&&(t=r.state)}}return this.Pr.sr(e),this.pr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Pr.ir(e),this.pr()}},{key:"isLocalQueryTarget",value:function(e){return this.Pr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Cb(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.vr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Rr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.br(e)}},{key:"notifyBundleLoaded",value:function(e){this.Vr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.ur),this.removeItem(this.lr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return ud("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){ud("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){ud("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"cr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(ud("SharedClientState","EVENT",n.key,n.newValue),n.key===this.lr)return void sd("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ys.enqueueRetryable(d(f().mark((function e(){var r,i,a,o,u,s,c;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t._r.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Sr(n.key),e.abrupt("return",t.Dr(r,null));case 6:if(!(i=t.Cr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Dr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.wr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Nr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.kr(a));case 16:e.next=41;break;case 18:if(!t.mr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.$r(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Mr(o));case 23:e.next=41;break;case 25:if(n.key!==t.gr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.Ir(n.newValue))){e.next=30;break}return e.abrupt("return",t.Tr(u));case 30:e.next=41;break;case 32:if(n.key!==t.dr){e.next=37;break}s=function(e){var t=sp.at;if(null!=e)try{var n=JSON.parse(e);hd("number"==typeof n),t=n}catch(e){sd("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==sp.at&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.yr){e.next=41;break}return c=t.Or(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Fr(e)})));case 41:e.next=44;break;case 43:t.hr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Pr",get:function(){return this.ar.get(this.rr)}},{key:"pr",value:function(){this.setItem(this.lr,this.Pr.nr())}},{key:"Ar",value:function(e,t,n){var r=new Ab(this.currentUser,e,t,n),i=Tb(this.persistenceKey,this.currentUser,e);this.setItem(i,r.nr())}},{key:"Rr",value:function(e){var t=Tb(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"br",value:function(e){var t={clientId:this.rr,onlineState:e};this.storage.setItem(this.gr,JSON.stringify(t))}},{key:"vr",value:function(e,t,n){var r=Cb(this.persistenceKey,e),i=new Nb(e,t,n);this.setItem(r,i.nr())}},{key:"Vr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.yr,t)}},{key:"Sr",value:function(e){var t=this._r.exec(e);return t?t[1]:null}},{key:"Cr",value:function(e,t){var n=this.Sr(e);return Db.er(n,t)}},{key:"Nr",value:function(e,t){var n=this.wr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Ab.er(new rd(i),r,t)}},{key:"$r",value:function(e,t){var n=this.mr.exec(e),r=Number(n[1]);return Nb.er(r,t)}},{key:"Ir",value:function(e){return Ob.er(e)}},{key:"Or",value:function(e){return JSON.parse(e)}},{key:"kr",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Br(t.batchId,t.state,t.error));case 2:ud("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Mr",value:function(e){return this.syncEngine.Lr(e.targetId,e.state,e.error)}},{key:"Dr",value:function(e,t){var n=this,r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Er(this.ar),a=this.Er(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.qr(o,u).then((function(){n.ar=r}))}},{key:"Tr",value:function(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Er",value:function(e){var t=$y();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"C",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Lb=function(){function e(){y(this,e),this.Ur=new Rb,this.Kr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return g(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Ur.sr(e),this.Kr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Kr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Ur.ir(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Kr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Ur.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Ur=new Rb,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Mb=function(){function e(){y(this,e)}return g(e,[{key:"Gr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Fb=function(){function e(){var t=this;y(this,e),this.Qr=function(){return t.jr()},this.zr=function(){return t.Wr()},this.Hr=[],this.Jr()}return g(e,[{key:"Gr",value:function(e){this.Hr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Qr),window.removeEventListener("offline",this.zr)}},{key:"Jr",value:function(){window.addEventListener("online",this.Qr),window.addEventListener("offline",this.zr)}},{key:"jr",value:function(){ud("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=k(this.Hr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Wr",value:function(){ud("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=k(this.Hr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),jb=null;function Ub(){return null===jb?jb=268435456+Math.round(2147483648*Math.random()):jb++,"0x"+jb.toString(16)}var Vb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},qb=function(){function e(t){y(this,e),this.Yr=t.Yr,this.Zr=t.Zr}return g(e,[{key:"Xr",value:function(e){this.eo=e}},{key:"no",value:function(e){this.so=e}},{key:"onMessage",value:function(e){this.io=e}},{key:"close",value:function(){this.Zr()}},{key:"send",value:function(e){this.Yr(e)}},{key:"ro",value:function(){this.eo()}},{key:"oo",value:function(e){this.so(e)}},{key:"uo",value:function(e){this.io(e)}}]),e}(),zb="WebChannelConnection",Bb=function(e){x(n,e);var t=I(n);function n(e){var r;return y(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return g(n,[{key:"wo",value:function(e,t,n,r){var i=Ub();return new Promise((function(a,o){var u=new td;u.setWithCredentials(!0),u.listenOnce(Xh.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case $h.NO_ERROR:var t=u.getResponseJson();ud(zb,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case $h.TIMEOUT:ud(zb,"RPC '".concat(e,"' ").concat(i," timed out")),o(new vd(pd.DEADLINE_EXCEEDED,"Request time out"));break;case $h.HTTP_ERROR:var n=u.getStatus();if(ud(zb,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(pd).indexOf(t)>=0?t:pd.UNKNOWN}(s.status);o(new vd(c,s.message))}else o(new vd(pd.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new vd(pd.UNAVAILABLE,"Connection failed."));break;default:fd()}}finally{ud(zb,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);ud(zb,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"yo",value:function(e,t,n){var r=Ub(),i=[this.co,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Qh(),o=Hh(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(u.xmlHttpFactory=new Zh({})),this._o(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var s=i.join("");ud(zb,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(s),u);var c=a.createWebChannel(s,u),l=!1,f=!1,h=new qb({Yr:function(t){f?ud(zb,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(l||(ud(zb,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),l=!0),ud(zb,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},Zr:function(){return c.close()}}),d=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return d(c,ed.EventType.OPEN,(function(){f||ud(zb,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),d(c,ed.EventType.CLOSE,(function(){f||(f=!0,ud(zb,"RPC '".concat(e,"' stream ").concat(r," transport closed")),h.oo())})),d(c,ed.EventType.ERROR,(function(t){f||(f=!0,cd(zb,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),h.oo(new vd(pd.UNAVAILABLE,"The operation could not be completed")))})),d(c,ed.EventType.MESSAGE,(function(t){var n;if(!f){var i=t.data[0];hd(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){ud(zb,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=Ay[e];if(void 0!==t)return Ly(t)}(u),l=o.message;void 0===s&&(s=pd.INTERNAL,l="Unknown error status: "+u+" with message "+o.message),f=!0,h.oo(new vd(s,l)),c.close()}else ud(zb,"RPC '".concat(e,"' stream ").concat(r," received:"),i),h.uo(i)}})),d(o,Yh.STAT_EVENT,(function(t){t.stat===Jh.PROXY?ud(zb,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Jh.NOPROXY&&ud(zb,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){h.ro()}),0),h}}]),n}(function(){function e(t){y(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.co=n+"://"+t.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return g(e,[{key:"ho",get:function(){return!1}},{key:"lo",value:function(e,t,n,r,i){var a=Ub(),o=this.fo(e,t);ud("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={};return this._o(u,r,i),this.wo(e,o,u,n).then((function(t){return ud("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw cd("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"mo",value:function(e,t,n,r,i,a){return this.lo(e,t,n,r,i)}},{key:"_o",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+id,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"fo",value:function(e,t){var n=Vb[e];return"".concat(this.co,"/v1/").concat(t,":").concat(n)}}]),e}());function Kb(){return"undefined"!=typeof window?window:null}function Gb(){return"undefined"!=typeof document?document:null}function Wb(e){return new sm(e,!0)}var Qb=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;y(this,e),this.Ys=t,this.timerId=n,this.po=r,this.Io=i,this.To=a,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}return g(e,[{key:"reset",value:function(){this.Eo=0}},{key:"Po",value:function(){this.Eo=this.To}},{key:"vo",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Eo+this.bo()),r=Math.max(0,Date.now()-this.Ro),i=Math.max(0,n-r);i>0&&ud("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Eo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,i,(function(){return t.Ro=Date.now(),e()})),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}},{key:"Vo",value:function(){null!==this.Ao&&(this.Ao.skipDelay(),this.Ao=null)}},{key:"cancel",value:function(){null!==this.Ao&&(this.Ao.cancel(),this.Ao=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Eo}}]),e}(),Hb=function(){function e(t,n,r,i,a,o,u,s){y(this,e),this.Ys=t,this.So=r,this.Do=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Co=0,this.xo=null,this.No=null,this.stream=null,this.ko=new Qb(t,n)}return g(e,[{key:"$o",value:function(){return 1===this.state||5===this.state||this.Mo()}},{key:"Mo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.$o(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.state=0,this.ko.reset()}},{key:"Bo",value:function(){var e=this;this.Mo()&&null===this.xo&&(this.xo=this.Ys.enqueueAfterDelay(this.So,6e4,(function(){return e.Lo()})))}},{key:"qo",value:function(e){this.Uo(),this.stream.send(e)}},{key:"Lo",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Mo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Uo",value:function(){this.xo&&(this.xo.cancel(),this.xo=null)}},{key:"Ko",value:function(){this.No&&(this.No.cancel(),this.No=null)}},{key:"close",value:function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Uo(),this.Ko(),this.ko.cancel(),this.Co++,4!==t?this.ko.reset():n&&n.code===pd.RESOURCE_EXHAUSTED?(sd(n.toString()),sd("Using maximum backoff delay to prevent overloading the backend."),this.ko.Po()):n&&n.code===pd.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Go(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.no(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Go",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Qo(this.Co),n=this.Co;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=c(t,2),i=r[0],a=r[1];e.Co===n&&e.jo(i,a)}),(function(n){t((function(){var t=new vd(pd.UNKNOWN,"Fetching auth token failed: "+n.message);return e.zo(t)}))}))}},{key:"jo",value:function(e,t){var n=this,r=this.Qo(this.Co);this.stream=this.Wo(e,t),this.stream.Xr((function(){r((function(){return n.state=2,n.No=n.Ys.enqueueAfterDelay(n.Do,1e4,(function(){return n.Mo()&&(n.state=3),Promise.resolve()})),n.listener.Xr()}))})),this.stream.no((function(e){r((function(){return n.zo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Oo",value:function(){var e=this;this.state=5,this.ko.vo(d(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"zo",value:function(e){return ud("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Qo",value:function(e){var t=this;return function(n){t.Ys.enqueueAndForget((function(){return t.Co===e?n():(ud("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),$b=function(e){x(n,e);var t=I(n);function n(e,r,i,a,o,u){var s;return y(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).Tt=o,s}return g(n,[{key:"Wo",value:function(e,t){return this.connection.yo("Listen",e,t)}},{key:"onMessage",value:function(e){this.ko.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:fd()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.yt?(hd(void 0===t||"string"==typeof t),gp.fromBase64String(t||"")):(hd(void 0===t||t instanceof Uint8Array),gp.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?pd.UNKNOWN:Ly(e.code);return new vd(t,e.message||"")}(o);n=new em(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=ym(e,s.document.name),l=hm(s.document.updateTime),f=s.document.createTime?hm(s.document.createTime):Dd.min(),h=new Sv({mapValue:{fields:s.document.fields}}),d=Ev.newFoundDocument(c,l,f,h),p=s.targetIds||[],v=s.removedTargetIds||[];n=new Jy(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var y=t.documentDelete;y.document;var m=ym(e,y.document),g=y.readTime?hm(y.readTime):Dd.min(),k=Ev.newNoDocument(m,g),b=y.removedTargetIds||[];n=new Jy([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var x=ym(e,w.document),_=w.removedTargetIds||[];n=new Jy([],_,x,null)}else{if(!("filter"in t))return fd();t.filter;var S=t.filter;S.targetId;var I=S.count||0,E=new Ry(I),T=S.targetId;n=new Zy(T,E)}return n}(this.Tt,e),n=function(e){if(!("targetChange"in e))return Dd.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Dd.min():t.readTime?hm(t.readTime):Dd.min()}(e);return this.listener.Ho(t,n)}},{key:"Jo",value:function(e){var t={};t.database=km(this.Tt),t.addTarget=function(e,t){var n,r=t.target;return(n=Dv(r)?{documents:Em(e,r)}:{query:Tm(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=lm(e,t.resumeToken):t.snapshotVersion.compareTo(Dd.min())>0&&(n.readTime=cm(e,t.snapshotVersion.toTimestamp())),n}(this.Tt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return fd()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.Tt,e);n&&(t.labels=n),this.qo(t)}},{key:"Yo",value:function(e){var t={};t.database=km(this.Tt),t.removeTarget=e,this.qo(t)}}]),n}(Hb),Xb=function(e){x(n,e);var t=I(n);function n(e,r,i,a,o,u){var s;return y(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).Tt=o,s.Zo=!1,s}return g(n,[{key:"Xo",get:function(){return this.Zo}},{key:"start",value:function(){this.Zo=!1,this.lastStreamToken=void 0,Ft(_(n.prototype),"start",this).call(this)}},{key:"Go",value:function(){this.Zo&&this.tu([])}},{key:"Wo",value:function(e,t){return this.connection.yo("Write",e,t)}},{key:"onMessage",value:function(e){if(hd(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Zo){this.ko.reset();var t=function(e,t){return e&&e.length>0?(hd(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?hm(e.updateTime):hm(t);return n.isEqual(Dd.min())&&(n=hm(t)),new vy(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=hm(e.commitTime);return this.listener.eu(n,t)}return hd(!e.writeResults||0===e.writeResults.length),this.Zo=!0,this.listener.nu()}},{key:"su",value:function(){var e={};e.database=km(this.Tt),this.qo(e)}},{key:"tu",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Sm(t.Tt,e)}))};this.qo(n)}}]),n}(Hb),Yb=function(e){x(n,e);var t=I(n);function n(e,r,i,a){var o;return y(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.Tt=a,o.iu=!1,o}return g(n,[{key:"ru",value:function(){if(this.iu)throw new vd(pd.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"lo",value:function(e,t,n){var r=this;return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=c(i,2),o=a[0],u=a[1];return r.connection.lo(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===pd.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new vd(pd.UNKNOWN,e.toString())}))}},{key:"mo",value:function(e,t,n,r){var i=this;return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=c(a,2),u=o[0],s=o[1];return i.connection.mo(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===pd.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new vd(pd.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.iu=!0}}]),n}(function(){return g((function e(){y(this,e)}))}());var Jb=function(){function e(t,n){y(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.ou=0,this.uu=null,this.cu=!0}return g(e,[{key:"au",value:function(){var e=this;0===this.ou&&(this.hu("Unknown"),this.uu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.uu=null,e.lu("Backend didn't respond within 10 seconds."),e.hu("Offline"),Promise.resolve()})))}},{key:"fu",value:function(e){"Online"===this.state?this.hu("Unknown"):(this.ou++,this.ou>=1&&(this.du(),this.lu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.hu("Offline")))}},{key:"set",value:function(e){this.du(),this.ou=0,"Online"===e&&(this.cu=!1),this.hu(e)}},{key:"hu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"lu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.cu?(sd(t),this.cu=!1):ud("OnlineStateTracker",t)}},{key:"du",value:function(){null!==this.uu&&(this.uu.cancel(),this.uu=null)}}]),e}(),Zb=g((function e(t,n,r,i,a){var o=this;y(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this._u=[],this.wu=new Map,this.mu=new Set,this.gu=[],this.yu=a,this.yu.Gr((function(e){r.enqueueAndForget(d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=lw(o),!e.t0){e.next=5;break}return ud("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=dd(t)).mu.add(4),e.next=4,nw(n);case 4:return n.pu.set("Unknown"),n.mu.delete(4),e.next=8,ew(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.pu=new Jb(r,i)}));function ew(e){return tw.apply(this,arguments)}function tw(){return tw=d(f().mark((function e(t){var n,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!lw(t)){e.next=18;break}n=k(t.gu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),tw.apply(this,arguments)}function nw(e){return rw.apply(this,arguments)}function rw(){return rw=d(f().mark((function e(t){var n,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=k(t.gu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),rw.apply(this,arguments)}function iw(e,t){var n=dd(e);n.wu.has(t.targetId)||(n.wu.set(t.targetId,t),cw(n)?sw(n):Uw(n).Mo()&&ow(n,t))}function aw(e,t){var n=dd(e),r=Uw(n);n.wu.delete(t),r.Mo()&&uw(n,t),0===n.wu.size&&(r.Mo()?r.Bo():lw(n)&&n.pu.set("Unknown"))}function ow(e,t){e.Iu.Ot(t.targetId),Uw(e).Jo(t)}function uw(e,t){e.Iu.Ot(t),Uw(e).Yo(t)}function sw(e){e.Iu=new nm({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ie:function(t){return e.wu.get(t)||null}}),Uw(e).start(),e.pu.au()}function cw(e){return lw(e)&&!Uw(e).$o()&&e.wu.size>0}function lw(e){return 0===dd(e).mu.size}function fw(e){e.Iu=void 0}function hw(e){return dw.apply(this,arguments)}function dw(){return dw=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.wu.forEach((function(e,n){ow(t,e)}));case 1:case"end":return e.stop()}}),e)}))),dw.apply(this,arguments)}function pw(e,t){return vw.apply(this,arguments)}function vw(){return vw=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fw(t),cw(t)?(t.pu.fu(n),sw(t)):t.pu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),vw.apply(this,arguments)}function yw(e,t,n){return mw.apply(this,arguments)}function mw(){return mw=d(f().mark((function e(t,n,r){var i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.pu.set("Online"),!(n instanceof em&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=d(f().mark((function e(t,n){var r,i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=k(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.wu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.wu.delete(o),t.Iu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),ud("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,gw(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Jy?t.Iu.Qt(n):n instanceof Zy?t.Iu.Zt(n):t.Iu.Wt(n),r.isEqual(Dd.min())){e.next=29;break}return e.prev=14,e.next=17,fb(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Iu.ee(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.wu.get(r);i&&e.wu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.wu.get(t);if(n){e.wu.set(t,n.withResumeToken(gp.EMPTY_BYTE_STRING,n.snapshotVersion)),uw(e,t);var r=new yg(n.target,t,1,n.sequenceNumber);ow(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),ud("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,gw(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),mw.apply(this,arguments)}function gw(e,t,n){return kw.apply(this,arguments)}function kw(){return kw=d(f().mark((function e(t,n,r){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(tp(n)){e.next=2;break}throw n;case 2:return t.mu.add(1),e.next=5,nw(t);case 5:t.pu.set("Offline"),r||(r=function(){return fb(t.localStore)}),t.asyncQueue.enqueueRetryable(d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ud("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.mu.delete(1),e.next=6,ew(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),kw.apply(this,arguments)}function bw(e,t){return t().catch((function(n){return gw(e,n,t)}))}function ww(e){return xw.apply(this,arguments)}function xw(){return xw=d(f().mark((function e(t){var n,r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=dd(t),r=Vw(n),i=n._u.length>0?n._u[n._u.length-1].batchId:-1;case 2:if(!_w(n)){e.next=19;break}return e.prev=3,e.next=6,pb(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n._u.length&&r.Bo(),e.abrupt("break",19);case 10:i=a.batchId,Sw(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,gw(n,e.t0);case 17:e.next=2;break;case 19:Iw(n)&&Ew(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),xw.apply(this,arguments)}function _w(e){return lw(e)&&e._u.length<10}function Sw(e,t){e._u.push(t);var n=Vw(e);n.Mo()&&n.Xo&&n.tu(t.mutations)}function Iw(e){return lw(e)&&!Vw(e).$o()&&e._u.length>0}function Ew(e){Vw(e).start()}function Tw(e){return Cw.apply(this,arguments)}function Cw(){return Cw=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Vw(t).su();case 1:case"end":return e.stop()}}),e)}))),Cw.apply(this,arguments)}function Aw(e){return Nw.apply(this,arguments)}function Nw(){return Nw=d(f().mark((function e(t){var n,r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Vw(t),r=k(t._u);try{for(r.s();!(i=r.n()).done;)a=i.value,n.tu(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Nw.apply(this,arguments)}function Dw(e,t,n){return Ow.apply(this,arguments)}function Ow(){return Ow=d(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t._u.shift(),a=pg.from(i,n,r),e.next=3,bw(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,ww(t);case 5:case"end":return e.stop()}}),e)}))),Ow.apply(this,arguments)}function Rw(e,t){return Pw.apply(this,arguments)}function Pw(){return Pw=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Vw(t).Xo,!e.t0){e.next=4;break}return e.next=4,function(){var e=d(f().mark((function e(t,n){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Py(i=n.code)||i===pd.ABORTED){e.next=7;break}return r=t._u.shift(),Vw(t).Fo(),e.next=5,bw(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,ww(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Iw(t)&&Ew(t);case 5:case"end":return e.stop()}}),e)}))),Pw.apply(this,arguments)}function Lw(e,t){return Mw.apply(this,arguments)}function Mw(){return Mw=d(f().mark((function e(t,n){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=dd(t)).asyncQueue.verifyOperationInProgress(),ud("RemoteStore","RemoteStore received new credentials"),i=lw(r),r.mu.add(3),e.next=6,nw(r);case 6:return i&&r.pu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.mu.delete(3),e.next=12,ew(r);case 12:case"end":return e.stop()}}),e)}))),Mw.apply(this,arguments)}function Fw(e,t){return jw.apply(this,arguments)}function jw(){return jw=d(f().mark((function e(t,n){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=dd(t),!n){e.next=7;break}return r.mu.delete(2),e.next=5,ew(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.mu.add(2),e.next=12,nw(r);case 12:r.pu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),jw.apply(this,arguments)}function Uw(e){return e.Tu||(e.Tu=function(e,t,n){var r=dd(e);return r.ru(),new $b(t,r.connection,r.authCredentials,r.appCheckCredentials,r.Tt,n)}(e.datastore,e.asyncQueue,{Xr:hw.bind(null,e),no:pw.bind(null,e),Ho:yw.bind(null,e)}),e.gu.push(function(){var t=d(f().mark((function t(n){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Tu.Fo(),cw(e)?sw(e):e.pu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Tu.stop();case 6:fw(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Tu}function Vw(e){return e.Eu||(e.Eu=function(e,t,n){var r=dd(e);return r.ru(),new Xb(t,r.connection,r.authCredentials,r.appCheckCredentials,r.Tt,n)}(e.datastore,e.asyncQueue,{Xr:Tw.bind(null,e),no:Rw.bind(null,e),nu:Aw.bind(null,e),eu:Dw.bind(null,e)}),e.gu.push(function(){var t=d(f().mark((function t(n){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Eu.Fo(),t.next=4,ww(e);case 4:t.next=9;break;case 6:return t.next=8,e.Eu.stop();case 8:e._u.length>0&&(ud("RemoteStore","Stopping write stream with ".concat(e._u.length," pending writes")),e._u=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Eu}var qw=function(){function e(t,n,r,i,a){y(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new yd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return g(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new vd(pd.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function zw(e,t){if(sd("AsyncQueue","".concat(t,": ").concat(e)),tp(e))return new vd(pd.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Bw=function(){function e(t){y(this,e),this.comparator=t?function(e,n){return t(e,n)||Md.comparator(e.key,n.key)}:function(e,t){return Md.comparator(e.key,t.key)},this.keyedMap=Vy(),this.sortedSet=new mv(this.comparator)}return g(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Kw=function(){function e(){y(this,e),this.Au=new mv(Md.comparator)}return g(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Au.get(t);n?0!==e.type&&3===n.type?this.Au=this.Au.insert(t,e):3===e.type&&1!==n.type?this.Au=this.Au.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Au=this.Au.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Au=this.Au.remove(t):1===e.type&&2===n.type?this.Au=this.Au.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):fd():this.Au=this.Au.insert(t,e)}},{key:"Ru",value:function(){var e=[];return this.Au.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Gw=function(){function e(t,n,r,i,a,o,u,s,c){y(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return g(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,Bw.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),Ww=g((function e(){y(this,e),this.Pu=void 0,this.listeners=[]})),Qw=g((function e(){y(this,e),this.queries=new My((function(e){return Qv(e)}),Wv),this.onlineState="Unknown",this.vu=new Set}));function Hw(e,t){return $w.apply(this,arguments)}function $w(){return $w=d(f().mark((function e(t,n){var r,i,a,o,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=dd(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new Ww),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Pu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=zw(e.t0,"Initialization of query '".concat(Hv(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.bu(r.onlineState),o.Pu&&n.Vu(o.Pu)&&ex(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),$w.apply(this,arguments)}function Xw(e,t){return Yw.apply(this,arguments)}function Yw(){return Yw=d(f().mark((function e(t,n){var r,i,a,o,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=dd(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),Yw.apply(this,arguments)}function Jw(e,t){var n,r=dd(e),i=!1,a=k(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=k(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Vu(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Pu=o}}}catch(f){a.e(f)}finally{a.f()}i&&ex(r)}function Zw(e,t,n){var r=dd(e),i=r.queries.get(t);if(i){var a,o=k(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function ex(e){e.vu.forEach((function(e){e.next()}))}var tx=function(){function e(t,n,r){y(this,e),this.query=t,this.Su=n,this.Du=!1,this.Cu=null,this.onlineState="Unknown",this.options=r||{}}return g(e,[{key:"Vu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=k(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new Gw(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Du?this.xu(e)&&(this.Su.next(e),a=!0):this.Nu(e,this.onlineState)&&(this.ku(e),a=!0),this.Cu=e,a}},{key:"onError",value:function(e){this.Su.error(e)}},{key:"bu",value:function(e){this.onlineState=e;var t=!1;return this.Cu&&!this.Du&&this.Nu(this.Cu,e)&&(this.ku(this.Cu),t=!0),t}},{key:"Nu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.$u||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"xu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Cu&&this.Cu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"ku",value:function(e){e=Gw.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Du=!0,this.Su.next(e)}}]),e}(),nx=function(){function e(t,n){y(this,e),this.Mu=t,this.byteLength=n}return g(e,[{key:"Ou",value:function(){return"metadata"in this.Mu}}]),e}(),rx=function(){function e(t){y(this,e),this.Tt=t}return g(e,[{key:"Zi",value:function(e){return ym(this.Tt,e)}},{key:"Xi",value:function(e){return e.metadata.exists?xm(this.Tt,e.document,!1):Ev.newNoDocument(this.Zi(e.metadata.name),this.tr(e.metadata.readTime))}},{key:"tr",value:function(e){return hm(e)}}]),e}(),ix=function(){function e(t,n,r){y(this,e),this.Fu=t,this.localStore=n,this.Tt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=ax(t)}return g(e,[{key:"Bu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.Mu.namedQuery)this.queries.push(e.Mu.namedQuery);else if(e.Mu.documentMetadata){this.documents.push({metadata:e.Mu.documentMetadata}),e.Mu.documentMetadata.exists||++t;var n=Rd.fromString(e.Mu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Mu.document&&(this.documents[this.documents.length-1].document=e.Mu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Lu",value:function(e){var t,n=new Map,r=new rx(this.Tt),i=k(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Zi(a.metadata.name),s=k(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Qy()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=d(f().mark((function e(){var t,n,r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xb(this.localStore,new rx(this.Tt),this.documents,this.Fu.id);case 2:t=e.sent,n=this.Lu(this.documents),r=k(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Sb(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,qu:this.collectionGroups,Uu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function ax(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var ox=g((function e(t){y(this,e),this.key=t})),ux=g((function e(t){y(this,e),this.key=t})),sx=function(){function e(t,n){y(this,e),this.query=t,this.Ku=n,this.Gu=null,this.hasCachedResults=!1,this.current=!1,this.Qu=Qy(),this.mutatedKeys=Qy(),this.ju=Yv(t),this.zu=new Bw(this.ju)}return g(e,[{key:"Wu",get:function(){return this.Ku}},{key:"Hu",value:function(e,t){var n=this,r=t?t.Ju:new Kw,i=t?t.zu:this.zu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=$v(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Yu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.ju(f,s)>0||c&&n.ju(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{zu:o,Ju:r,Li:u,mutatedKeys:a}}},{key:"Yu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.zu;this.zu=e.zu,this.mutatedKeys=e.mutatedKeys;var a=e.Ju.Ru();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fd()}};return n(e)-n(t)}(e.type,t.type)||r.ju(e.doc,t.doc)})),this.Zu(n);var o=t?this.Xu():[],u=0===this.Qu.size&&this.current?1:0,s=u!==this.Gu;return this.Gu=u,0!==a.length||s?{snapshot:new Gw(this.query,e.zu,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),tc:o}:{tc:o}}},{key:"bu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({zu:this.zu,Ju:new Kw,mutatedKeys:this.mutatedKeys,Li:!1},!1)):{tc:[]}}},{key:"ec",value:function(e){return!this.Ku.has(e)&&!!this.zu.has(e)&&!this.zu.get(e).hasLocalMutations}},{key:"Zu",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Ku=t.Ku.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Ku=t.Ku.delete(e)})),this.current=e.current)}},{key:"Xu",value:function(){var e=this;if(!this.current)return[];var t=this.Qu;this.Qu=Qy(),this.zu.forEach((function(t){e.ec(t.key)&&(e.Qu=e.Qu.add(t.key))}));var n=[];return t.forEach((function(t){e.Qu.has(t)||n.push(new ux(t))})),this.Qu.forEach((function(e){t.has(e)||n.push(new ox(e))})),n}},{key:"nc",value:function(e){this.Ku=e.Yi,this.Qu=Qy();var t=this.Hu(e.documents);return this.applyChanges(t,!0)}},{key:"sc",value:function(){return Gw.fromInitialDocuments(this.query,this.zu,this.mutatedKeys,0===this.Gu,this.hasCachedResults)}}]),e}(),cx=g((function e(t,n,r){y(this,e),this.query=t,this.targetId=n,this.view=r})),lx=g((function e(t){y(this,e),this.key=t,this.ic=!1})),fx=function(){function e(t,n,r,i,a,o){y(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.rc={},this.oc=new My((function(e){return Qv(e)}),Wv),this.uc=new Map,this.cc=new Set,this.ac=new mv(Md.comparator),this.hc=new Map,this.lc=new zk,this.fc={},this.dc=new Map,this._c=gk.Sn(),this.onlineState="Unknown",this.wc=void 0}return g(e,[{key:"isPrimaryClient",get:function(){return!0===this.wc}}]),e}();function hx(e,t){return dx.apply(this,arguments)}function dx(){return dx=d(f().mark((function e(t,n){var r,i,a,o,u,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a_(t),!(o=r.oc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.sc(),e.next=15;break;case 6:return e.next=8,vb(r.localStore,Bv(n));case 8:return u=e.sent,r.isPrimaryClient&&iw(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,px(r,n,i,"current"===s,u.resumeToken);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),dx.apply(this,arguments)}function px(e,t,n,r,i){return vx.apply(this,arguments)}function vx(){return vx=d(f().mark((function e(t,n,r,i,a){var o,u,s,c,l,h;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.mc=function(e,n,r){return function(){var e=d(f().mark((function e(t,n,r,i){var a,o,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Hu(r),e.t0=a.Li,!e.t0){e.next=6;break}return e.next=5,gb(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Hu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Lx(t,n.targetId,u.tc),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,gb(t.localStore,n,!0);case 3:return o=e.sent,u=new sx(n,o.Yi),s=u.Hu(o.documents),c=Yy.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),Lx(t,r,l.tc),h=new cx(n,r,u),e.abrupt("return",(t.oc.set(n,h),t.uc.has(r)?t.uc.get(r).push(n):t.uc.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),vx.apply(this,arguments)}function yx(e,t){return mx.apply(this,arguments)}function mx(){return mx=d(f().mark((function e(t,n){var r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=dd(t),i=r.oc.get(n),!((a=r.uc.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.uc.set(i.targetId,a.filter((function(e){return!Wv(e,n)}))),void r.oc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,yb(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),aw(r.remoteStore,i.targetId),Rx(r,i.targetId)})).catch(Hd);case 9:e.next=14;break;case 11:return Rx(r,i.targetId),e.next=14,yb(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),mx.apply(this,arguments)}function gx(e,t,n){return kx.apply(this,arguments)}function kx(){return kx=d(f().mark((function e(t,n,r){var i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=o_(t),e.prev=1,e.next=4,function(e,t){var n,r,i=dd(e),a=Nd.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Qy());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=jy(),s=Qy();return i.ji.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=k(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=xy(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new Iy(c.key,l,Iv(l.value.mapValue),yy.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:qy(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.fc[e.currentUser.toKey()];r||(r=new mv(Td)),r=r.insert(t,n),e.fc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,jx(i,a.changes);case 9:return e.next=11,ww(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=zw(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),kx.apply(this,arguments)}function bx(e,t){return wx.apply(this,arguments)}function wx(){return wx=d(f().mark((function e(t,n){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=dd(t),e.prev=1,e.next=4,hb(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.hc.get(t);n&&(hd(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.ic=!0:e.modifiedDocuments.size>0?hd(n.ic):e.removedDocuments.size>0&&(hd(n.ic),n.ic=!1))})),e.next=8,jx(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Hd(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),wx.apply(this,arguments)}function xx(e,t,n){var r=dd(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.oc.forEach((function(e,n){var r=n.view.bu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=dd(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=k(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.bu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&ex(n)}(r.eventManager,t),i.length&&r.rc.Ho(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function _x(e,t,n){return Sx.apply(this,arguments)}function Sx(){return Sx=d(f().mark((function e(t,n,r){var i,a,o,u,s,c;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=dd(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.hc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new mv(Md.comparator)).insert(o,Ev.newNoDocument(o,Dd.min())),s=Qy().add(o),c=new Xy(Dd.min(),new Map,new bv(Td),u,s),e.next=9,bx(i,c);case 9:i.ac=i.ac.remove(o),i.hc.delete(n),Fx(i),e.next=16;break;case 14:return e.next=16,yb(i.localStore,n,!1).then((function(){return Rx(i,n,r)})).catch(Hd);case 16:case"end":return e.stop()}}),e)}))),Sx.apply(this,arguments)}function Ix(e,t){return Ex.apply(this,arguments)}function Ex(){return Ex=d(f().mark((function e(t,n){var r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=dd(t),i=n.batch.batchId,e.prev=1,e.next=4,lb(r.localStore,n);case 4:return a=e.sent,Ox(r,i,null),Dx(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,jx(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Hd(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Ex.apply(this,arguments)}function Tx(e,t,n){return Cx.apply(this,arguments)}function Cx(){return Cx=d(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=dd(t),e.prev=1,e.next=4,function(e,t){var n=dd(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return hd(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Ox(i,n,r),Dx(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,jx(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Hd(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Cx.apply(this,arguments)}function Ax(e,t){return Nx.apply(this,arguments)}function Nx(){return Nx=d(f().mark((function e(t,n){var r,i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return lw((r=dd(t)).remoteStore)||ud("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=dd(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.dc.get(i)||[]).push(n),r.dc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=zw(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),Nx.apply(this,arguments)}function Dx(e,t){(e.dc.get(t)||[]).forEach((function(e){e.resolve()})),e.dc.delete(t)}function Ox(e,t,n){var r=dd(e),i=r.fc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.fc[r.currentUser.toKey()]=i}}function Rx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=k(e.uc.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.oc.delete(a),n&&e.rc.gc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.uc.delete(t),e.isPrimaryClient&&e.lc.ds(t).forEach((function(t){e.lc.containsKey(t)||Px(e,t)}))}function Px(e,t){e.cc.delete(t.path.canonicalString());var n=e.ac.get(t);null!==n&&(aw(e.remoteStore,n),e.ac=e.ac.remove(t),e.hc.delete(n),Fx(e))}function Lx(e,t,n){var r,i=k(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof ox?(e.lc.addReference(a.key,t),Mx(e,a)):a instanceof ux?(ud("SyncEngine","Document no longer in limbo: "+a.key),e.lc.removeReference(a.key,t),e.lc.containsKey(a.key)||Px(e,a.key)):fd()}}catch(o){i.e(o)}finally{i.f()}}function Mx(e,t){var n=t.key,r=n.path.canonicalString();e.ac.get(n)||e.cc.has(r)||(ud("SyncEngine","New document in limbo: "+n),e.cc.add(r),Fx(e))}function Fx(e){for(;e.cc.size>0&&e.ac.size<e.maxConcurrentLimboResolutions;){var t=e.cc.values().next().value;e.cc.delete(t);var n=new Md(Rd.fromString(t)),r=e._c.next();e.hc.set(r,new lx(n)),e.ac=e.ac.insert(n,r),iw(e.remoteStore,new yg(Bv(Fv(n.path)),r,2,sp.at))}}function jx(e,t,n){return Ux.apply(this,arguments)}function Ux(){return Ux=d(f().mark((function e(t,n,r){var i,a,o,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=dd(t),a=[],o=[],u=[],e.t0=i.oc.isEmpty(),e.t0){e.next=9;break}return i.oc.forEach((function(e,t){u.push(i.mc(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=ib.Ni(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.rc.Ho(a),e.next=9,function(){var e=d(f().mark((function e(t,n){var r,i,a,o,u,s,c,l;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=dd(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Xd.forEach(n,(function(t){return Xd.forEach(t.Ci,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Xd.forEach(t.xi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),tp(e.t0)){e.next=10;break}throw e.t0;case 10:ud("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=k(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.Ki.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.Ki=r.Ki.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),Ux.apply(this,arguments)}function Vx(e,t){return qx.apply(this,arguments)}function qx(){return qx=d(f().mark((function e(t,n){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=dd(t)).currentUser.isEqual(n)){e.next=11;break}return ud("SyncEngine","User change. New user:",n.toKey()),e.next=5,sb(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.dc.forEach((function(e){e.forEach((function(e){e.reject(new vd(pd.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.dc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,jx(r,i.Wi);case 11:case"end":return e.stop()}}),e)}))),qx.apply(this,arguments)}function zx(e,t){var n=dd(e),r=n.hc.get(t);if(r&&r.ic)return Qy().add(r.key);var i=Qy(),a=n.uc.get(t);if(!a)return i;var o,u=k(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.oc.get(s);i=i.unionWith(c.view.Wu)}}catch(l){u.e(l)}finally{u.f()}return i}function Bx(e,t){return Kx.apply(this,arguments)}function Kx(){return Kx=d(f().mark((function e(t,n){var r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=dd(t),e.next=3,gb(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.nc(i),e.abrupt("return",(r.isPrimaryClient&&Lx(r,n.targetId,a.tc),a));case 6:case"end":return e.stop()}}),e)}))),Kx.apply(this,arguments)}function Gx(e,t){return Wx.apply(this,arguments)}function Wx(){return Wx=d(f().mark((function e(t,n){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=dd(t),e.abrupt("return",bb(r.localStore,n).then((function(e){return jx(r,e)})));case 2:case"end":return e.stop()}}),e)}))),Wx.apply(this,arguments)}function Qx(e,t,n,r){return Hx.apply(this,arguments)}function Hx(){return Hx=d(f().mark((function e(t,n,r,i){var a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=dd(t),e.next=3,function(e,t){var n=dd(e),r=dd(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.An(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):Xd.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,ww(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Ox(a,n,i||null),Dx(a,n),function(e,t){dd(dd(e).mutationQueue).Pn(t)}(a.localStore,n)):fd();case 11:return e.next=13,jx(a,o);case 13:e.next=16;break;case 15:ud("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),Hx.apply(this,arguments)}function $x(e,t){return Xx.apply(this,arguments)}function Xx(){return Xx=d(f().mark((function e(t,n){var r,i,a,o,u,s,c,l;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a_(r=dd(t)),o_(r),!0!==n||!0===r.wc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,Yx(r,i.toArray());case 5:return a=e.sent,r.wc=!0,e.next=9,Fw(r.remoteStore,!0);case 9:o=k(a);try{for(o.s();!(u=o.n()).done;)s=u.value,iw(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.wc){e.next=25;break}return c=[],l=Promise.resolve(),r.uc.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return Rx(r,t),yb(r.localStore,t,!0)})),aw(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,Yx(r,c);case 21:return function(e){var t=dd(e);t.hc.forEach((function(e,n){aw(t.remoteStore,n)})),t.lc._s(),t.hc=new Map,t.ac=new mv(Md.comparator)}(r),r.wc=!1,e.next=25,Fw(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),Xx.apply(this,arguments)}function Yx(e,t,n){return Jx.apply(this,arguments)}function Jx(){return Jx=d(f().mark((function e(t,n,r){var i,a,o,u,s,c,l,h,d,p,v,y,m,g;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=dd(t),a=[],o=[],u=k(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(h=i.uc.get(c))||0===h.length){e.next=34;break}return e.next=11,vb(i.localStore,Bv(h[0]));case 11:l=e.sent,d=k(h),e.prev=13,d.s();case 15:if((p=d.n()).done){e.next=24;break}return v=p.value,y=i.oc.get(v),e.next=20,Bx(i,y);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),d.e(e.t0);case 29:return e.prev=29,d.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,kb(i.localStore,c);case 36:return g=e.sent,e.next=39,vb(i.localStore,g);case 39:return l=e.sent,e.next=42,px(i,Zx(g),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.rc.Ho(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),Jx.apply(this,arguments)}function Zx(e){return Mv(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function e_(e){var t=dd(e);return dd(dd(t.localStore).persistence).Si()}function t_(e,t,n,r){return n_.apply(this,arguments)}function n_(){return n_=d(f().mark((function e(t,n,r,i){var a,o,u,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=dd(t)).wc){e.next=3;break}return e.abrupt("return",void ud("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.uc.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,bb(a.localStore,Xv(o[0]));case 10:return u=e.sent,s=Xy.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,gp.EMPTY_BYTE_STRING),e.next=14,jx(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,yb(a.localStore,n,!0);case 17:return Rx(a,n,i),e.abrupt("break",20);case 19:fd();case 20:case"end":return e.stop()}}),e)}))),n_.apply(this,arguments)}function r_(e,t,n){return i_.apply(this,arguments)}function i_(){return i_=d(f().mark((function e(t,n,r){var i,a,o,u,s,c,l,h,d;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=a_(t)).wc){e.next=45;break}a=k(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.uc.has(u)){e.next=10;break}return ud("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,kb(i.localStore,u);case 12:return s=e.sent,e.next=15,vb(i.localStore,s);case 15:return c=e.sent,e.next=18,px(i,Zx(s),c.targetId,!1,c.resumeToken);case 18:iw(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=k(r),e.prev=30,d=f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=i.uc.has(t),!e.t0){e.next=5;break}return e.next=5,yb(i.localStore,t,!1).then((function(){aw(i.remoteStore,t),Rx(i,t)})).catch(Hd);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((h=l.n()).done){e.next=37;break}return e.delegateYield(d(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),i_.apply(this,arguments)}function a_(e){var t=dd(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=bx.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=zx.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=_x.bind(null,t),t.rc.Ho=Jw.bind(null,t.eventManager),t.rc.gc=Zw.bind(null,t.eventManager),t}function o_(e){var t=dd(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Ix.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Tx.bind(null,t),t}function u_(e,t,n){var r=dd(e);(function(){var e=d(f().mark((function e(t,n,r){var i,a,o,u,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=dd(e),r=hm(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.$s.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(ax(i)),a=new ix(i,t.localStore,n.Tt),e.next=15,n.yc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Bu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.yc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,jx(t,s.Uu,void 0);case 31:return e.next=33,function(e,t){var n=dd(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.$s.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.qu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(cd("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var s_=function(){function e(){y(this,e),this.synchronizeTabs=!1}return g(e,[{key:"initialize",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Tt=Wb(t.databaseInfo.databaseId),this.sharedClientState=this.Ic(t),this.persistence=this.Tc(t),e.next=5,this.persistence.start();case 5:this.localStore=this.Ec(t),this.gcScheduler=this.Ac(t,this.localStore),this.indexBackfillerScheduler=this.Rc(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ac",value:function(e,t){return null}},{key:"Rc",value:function(e,t){return null}},{key:"Ec",value:function(e){return ub(this.persistence,new ab,e.initialUser,this.Tt)}},{key:"Tc",value:function(e){return new Hk(Xk.qs,this.Tt)}},{key:"Ic",value:function(e){return new Lb}},{key:"terminate",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),c_=function(e){x(n,e);var t=I(n);function n(e,r,i){var a;return y(this,n),(a=t.call(this)).Pc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return g(n,[{key:"initialize",value:function(){var e=d(f().mark((function e(t){var r=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft(_(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Pc.initialize(this,t);case 4:return e.next=6,o_(this.Pc.syncEngine);case 6:return e.next=8,ww(this.Pc.remoteStore);case 8:return e.next=10,this.persistence.di((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ec",value:function(e){return ub(this.persistence,new ab,e.initialUser,this.Tt)}},{key:"Ac",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new Ik(n,e.asyncQueue,t)}},{key:"Rc",value:function(e,t){var n=new up(t,this.persistence);return new op(e.asyncQueue,n)}},{key:"Tc",value:function(e){var t=rb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?lk.withCacheSize(this.cacheSizeBytes):lk.DEFAULT;return new eb(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Kb(),Gb(),this.Tt,this.sharedClientState,!!this.forceOwnership)}},{key:"Ic",value:function(e){return new Lb}}]),n}(s_),l_=function(e){x(n,e);var t=I(n);function n(e,r){var i;return y(this,n),(i=t.call(this,e,r,!1)).Pc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return g(n,[{key:"initialize",value:function(){var e=d(f().mark((function e(t){var r,i=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft(_(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Pc.syncEngine,e.t0=this.sharedClientState instanceof Pb,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Br:Qx.bind(null,r),Lr:t_.bind(null,r),qr:r_.bind(null,r),Si:e_.bind(null,r),Fr:Gx.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.di(function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$x(i.Pc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ic",value:function(e){var t=Kb();if(!Pb.C(t))throw new vd(pd.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=rb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Pb(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(c_),f_=function(){function e(){y(this,e)}return g(e,[{key:"initialize",value:function(){var e=d(f().mark((function e(t,n){var r=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return xx(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Vx.bind(null,this.syncEngine),e.next=12,Fw(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Qw}},{key:"createDatastore",value:function(e){var t,n=Wb(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Bb(t));return function(e,t,n,r){return new Yb(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return xx(o.syncEngine,e,0)},a=Fb.C()?new Fb:new Mb,new Zb(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new fx(e,t,n,r,i,a);return o&&(u.wc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=dd(t),ud("RemoteStore","RemoteStore shutting down."),n.mu.add(5),e.next=5,nw(n);case 5:n.yu.shutdown(),n.pu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function h_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return d(f().mark((function r(){var i;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var d_=function(){function e(t){y(this,e),this.observer=t,this.muted=!1}return g(e,[{key:"next",value:function(e){this.observer.next&&this.vc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.vc(this.observer.error,e):sd("Uncaught Error in snapshot listener:",e.toString())}},{key:"bc",value:function(){this.muted=!0}},{key:"vc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),p_=function(){function e(t,n){var r=this;y(this,e),this.Vc=t,this.Tt=n,this.metadata=new yd,this.buffer=new Uint8Array,this.Sc=new TextDecoder("utf-8"),this.Dc().then((function(e){e&&e.Ou()?r.metadata.resolve(e.Mu.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Mu))))}),(function(e){return r.metadata.reject(e)}))}return g(e,[{key:"close",value:function(){return this.Vc.cancel()}},{key:"getMetadata",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"yc",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Dc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Dc",value:function(){var e=d(f().mark((function e(){var t,n,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Cc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Sc.decode(t),r=Number(n),isNaN(r)&&this.xc("length string (".concat(n,") is not valid number")),e.next=9,this.Nc(r);case 9:return i=e.sent,e.abrupt("return",new nx(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"kc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Cc",value:function(){var e=d(f().mark((function e(){var t,n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.kc()<0)){e.next=7;break}return e.next=3,this.$c();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.kc())<0&&this.xc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Nc",value:function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.$c();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.xc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Sc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"xc",value:function(e){throw this.Vc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"$c",value:function(){var e=d(f().mark((function e(){var t,n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Vc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),v_=function(){function e(t){y(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return g(e,[{key:"lookup",value:function(){var e=d(f().mark((function e(t){var n,r=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new vd(pd.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=d(f().mark((function e(t,n){var r,i,a,o,u,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=dd(t),i=km(r.Tt)+"/documents",a={documents:n.map((function(e){return vm(r.Tt,e)}))},e.next=5,r.mo("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=_m(r.Tt,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());hd(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Dy(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=d(f().mark((function e(){var t,n=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Md.fromPath(t);n.mutations.push(new Oy(r,n.precondition(r)))})),e.next=7,function(){var e=d(f().mark((function e(t,n){var r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=dd(t),i=km(r.Tt)+"/documents",a={writes:n.map((function(e){return Sm(r.Tt,e)}))},e.next=3,r.lo("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw fd();t=Dd.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new vd(pd.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Dd.min())?yy.exists(!1):yy.updateTime(t):yy.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Dd.min()))throw new vd(pd.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return yy.updateTime(t)}return yy.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),y_=function(){function e(t,n,r,i,a){y(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Mc=r.maxAttempts,this.ko=new Qb(this.asyncQueue,"transaction_retry")}return g(e,[{key:"run",value:function(){this.Mc-=1,this.Oc()}},{key:"Oc",value:function(){var e=this;this.ko.vo(d(f().mark((function t(){var n,r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new v_(e.datastore),(r=e.Fc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Bc(t)}))}))})).catch((function(t){e.Bc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Fc",value:function(e){try{var t=this.updateFunction(e);return!pp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Bc",value:function(e){var t=this;this.Mc>0&&this.Lc(e)?(this.Mc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Oc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Lc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Py(t)}return!1}}]),e}(),m_=function(){function e(t,n,r,i){var a=this;y(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=rd.UNAUTHENTICATED,this.clientId=Ed.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ud("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return ud("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return g(e,[{key:"getConfiguration",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new vd(pd.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new yd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(d(f().mark((function n(){var r;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=zw(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function g_(e,t){return k_.apply(this,arguments)}function k_(){return k_=d(f().mark((function e(t,n){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),ud("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,sb(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),k_.apply(this,arguments)}function b_(e,t){return w_.apply(this,arguments)}function w_(){return w_=d(f().mark((function e(t,n){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,x_(t);case 3:return r=e.sent,ud("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Lw(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Lw(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),w_.apply(this,arguments)}function x_(e){return __.apply(this,arguments)}function __(){return __=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return ud("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,g_(t,new s_);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),__.apply(this,arguments)}function S_(e){return I_.apply(this,arguments)}function I_(){return I_=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return ud("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,b_(t,new f_);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),I_.apply(this,arguments)}function E_(e){return x_(e).then((function(e){return e.persistence}))}function T_(e){return x_(e).then((function(e){return e.localStore}))}function C_(e){return S_(e).then((function(e){return e.remoteStore}))}function A_(e){return S_(e).then((function(e){return e.syncEngine}))}function N_(e){return S_(e).then((function(e){return e.datastore}))}function D_(e){return O_.apply(this,arguments)}function O_(){return O_=d(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S_(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=hx.bind(null,n.syncEngine),r.onUnlisten=yx.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),O_.apply(this,arguments)}function R_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new yd;return e.asyncQueue.enqueueAndForget(d(f().mark((function i(){return f().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new d_({next:function(a){t.enqueueAndForget((function(){return Xw(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new vd(pd.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new vd(pd.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new tx(Fv(n.path),a,{includeMetadataChanges:!0,$u:!0});return Hw(e,o)},i.next=3,D_(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function P_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new yd;return e.asyncQueue.enqueueAndForget(d(f().mark((function i(){return f().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new d_({next:function(n){t.enqueueAndForget((function(){return Xw(e,o)})),n.fromCache&&"server"===r.source?i.reject(new vd(pd.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new tx(n,a,{includeMetadataChanges:!0,$u:!0});return Hw(e,o)},i.next=3,D_(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var L_=new Map;function M_(e,t,n){if(!n)throw new vd(pd.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function F_(e,t,n,r){if(!0===t&&!0===r)throw new vd(pd.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function j_(e){if(!Md.isDocumentKey(e))throw new vd(pd.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function U_(e){if(Md.isDocumentKey(e))throw new vd(pd.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function V_(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":fd()}function q_(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new vd(pd.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=V_(e);throw new vd(pd.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function z_(e,t){if(t<=0)throw new vd(pd.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var B_=function(){function e(t){var n;if(y(this,e),void 0===t.host){if(void 0!==t.ssl)throw new vd(pd.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new vd(pd.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,F_("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return g(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),K_=function(){function e(t,n,r,i){y(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new B_({}),this._settingsFrozen=!1}return g(e,[{key:"app",get:function(){if(!this._app)throw new vd(pd.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new vd(pd.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new B_(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new gd;switch(e.type){case"gapi":var t=e.client;return new xd(t,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new vd(pd.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=L_.get(e);t&&(ud("ComponentProvider","Removing Datastore"),L_.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function G_(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=q_(e,K_))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&cd("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=rd.MOCK_USER;else{o=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[D(JSON.stringify({alg:"none",type:"JWT"})),D(JSON.stringify(a)),""].join(".")}(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new vd(pd.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new rd(s)}e._authCredentials=new kd(new md(o,u))}}var W_=function(){function e(t,n,r){y(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return g(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new H_(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),Q_=function(){function e(t,n,r){y(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return g(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),H_=function(e){x(n,e);var t=I(n);function n(e,r,i){var a;return y(this,n),(a=t.call(this,e,r,Fv(i)))._path=i,a.type="collection",a}return g(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new W_(this.firestore,null,new Md(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(Q_);function $_(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ie(e),M_("collection","path",t),e instanceof K_){var a=Rd.fromString.apply(Rd,[t].concat(r));return U_(a),new H_(e,null,a)}if(!(e instanceof W_||e instanceof H_))throw new vd(pd.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Rd.fromString.apply(Rd,[t].concat(r)));return U_(o),new H_(e.firestore,null,o)}function X_(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ie(e),1===arguments.length&&(t=Ed.R()),M_("doc","path",t),e instanceof K_){var a=Rd.fromString.apply(Rd,[t].concat(r));return j_(a),new W_(e,null,new Md(a))}if(!(e instanceof W_||e instanceof H_))throw new vd(pd.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Rd.fromString.apply(Rd,[t].concat(r)));return j_(o),new W_(e.firestore,e instanceof H_?e.converter:null,new Md(o))}function Y_(e,t){return e=ie(e),t=ie(t),(e instanceof W_||e instanceof H_)&&(t instanceof W_||t instanceof H_)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function J_(e,t){return e=ie(e),t=ie(t),e instanceof Q_&&t instanceof Q_&&e.firestore===t.firestore&&Wv(e._query,t._query)&&e.converter===t.converter}var Z_=function(){function e(){var t=this;y(this,e),this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new Qb(this,"async_queue_retry"),this.Hc=function(){var e=Gb();e&&ud("AsyncQueue","Visibility state changed to "+e.visibilityState),t.ko.Vo()};var n=Gb();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Hc)}return g(e,[{key:"isShuttingDown",get:function(){return this.Kc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Jc(),this.Yc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Kc){this.Kc=!0,this.zc=e||!1;var t=Gb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Hc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Jc(),this.Kc)return new Promise((function(){}));var n=new yd;return this.Yc((function(){return t.Kc&&t.zc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Uc.push(e),t.Zc()}))}},{key:"Zc",value:function(){var e=d(f().mark((function e(){var t=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Uc.length){e.next=14;break}return e.prev=1,e.next=4,this.Uc[0]();case 4:this.Uc.shift(),this.ko.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),tp(e.t0)){e.next=12;break}throw e.t0;case 12:ud("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Uc.length>0&&this.ko.vo((function(){return t.Zc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Yc",value:function(e){var t=this,n=this.qc.then((function(){return t.jc=!0,e().catch((function(e){t.Qc=e,t.jc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw sd("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.jc=!1,e}))}));return this.qc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Jc(),this.Wc.indexOf(e)>-1&&(t=0);var i=qw.createAndSchedule(this,e,t,n,(function(e){return r.Xc(e)}));return this.Gc.push(i),i}},{key:"Jc",value:function(){this.Qc&&fd()}},{key:"verifyOperationInProgress",value:function(){}},{key:"ta",value:function(){var e=d(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.qc,e.next=3,t;case 3:if(t!==this.qc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ea",value:function(e){var t,n=k(this.Gc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"na",value:function(e){var t=this;return this.ta().then((function(){t.Gc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=k(t.Gc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.ta()}))}},{key:"sa",value:function(e){this.Wc.push(e)}},{key:"Xc",value:function(e){var t=this.Gc.indexOf(e);this.Gc.splice(t,1)}}]),e}();function eS(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=k(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var tS=function(){function e(){y(this,e),this._progressObserver={},this._taskCompletionResolver=new yd,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return g(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),nS=function(e){x(n,e);var t=I(n);function n(e,r,i,a){var o;return y(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new Z_,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return g(n,[{key:"_terminate",value:function(){return this._firestoreClient||iS(this),this._firestoreClient.terminate()}}]),n}(K_);function rS(e){return e._firestoreClient||iS(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function iS(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new cp(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new m_(e._authCredentials,e._appCheckCredentials,e._queue,r)}function aS(e,t,n){var r=new yd;return e.asyncQueue.enqueue(d(f().mark((function i(){var a;return f().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,g_(e,n);case 3:return i.next=5,b_(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===pd.FAILED_PRECONDITION||e.code===pd.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(a=i.t0)){i.next=13;break}throw a;case 13:cd("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function oS(e){return function(e){return e.asyncQueue.enqueue(d(f().mark((function t(){var n,r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E_(e);case 2:return n=t.sent,t.next=5,C_(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=dd(e);return t.mu.delete(0),ew(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(rS(e=q_(e,nS)))}function uS(e){return function(e){return e.asyncQueue.enqueue(d(f().mark((function t(){var n,r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E_(e);case 2:return n=t.sent,t.next=5,C_(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=dd(t)).mu.add(0),e.next=4,nw(n);case 4:n.pu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(rS(e=q_(e,nS)))}function sS(e,t){var n=rS(e=q_(e,nS)),r=new tS;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new p_(e,t)}(function(e,t){if(e instanceof Uint8Array)return h_(e,t);if(e instanceof ArrayBuffer)return h_(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,Wb(t));e.asyncQueue.enqueueAndForget(d(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=u_,t.next=3,A_(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function cS(e,t){return function(e,t){return e.asyncQueue.enqueue(d(f().mark((function n(){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=dd(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.$s.getNamedQuery(e,t)}))},n.next=3,T_(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(rS(e=q_(e,nS)),t).then((function(t){return t?new Q_(e,null,t.query):null}))}function lS(e){if(e._initialized||e._terminated)throw new vd(pd.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var fS=function(){function e(t){y(this,e),this._byteString=t}return g(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(gp.fromBase64String(t))}catch(t){throw new vd(pd.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(gp.fromUint8Array(t))}}]),e}(),hS=function(){function e(){y(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new vd(pd.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ld(n)}return g(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var dS=g((function e(t){y(this,e),this._methodName=t})),pS=function(){function e(t,n){if(y(this,e),!isFinite(t)||t<-90||t>90)throw new vd(pd.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new vd(pd.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return g(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Td(this._lat,e._lat)||Td(this._long,e._long)}}]),e}(),vS=/^__.*__$/,yS=function(){function e(t,n,r){y(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return g(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Iy(e,this.data,this.fieldMask,t,this.fieldTransforms):new Sy(e,this.data,t,this.fieldTransforms)}}]),e}(),mS=function(){function e(t,n,r){y(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return g(e,[{key:"toMutation",value:function(e,t){return new Iy(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function gS(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fd()}}var kS=function(){function e(t,n,r,i,a,o){y(this,e),this.settings=t,this.databaseId=n,this.Tt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ia(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return g(e,[{key:"path",get:function(){return this.settings.path}},{key:"ra",get:function(){return this.settings.ra}},{key:"oa",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.Tt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ua",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.oa({path:n,ca:!1});return r.aa(e),r}},{key:"ha",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.oa({path:n,ca:!1});return r.ia(),r}},{key:"la",value:function(e){return this.oa({path:void 0,ca:!0})}},{key:"fa",value:function(e){return US(e,this.settings.methodName,this.settings.da||!1,this.path,this.settings._a)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"ia",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.aa(this.path.get(e))}},{key:"aa",value:function(e){if(0===e.length)throw this.fa("Document fields must not be empty");if(gS(this.ra)&&vS.test(e))throw this.fa('Document fields cannot begin and end with "__"')}}]),e}(),bS=function(){function e(t,n,r){y(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.Tt=r||Wb(t)}return g(e,[{key:"wa",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new kS({ra:e,methodName:t,_a:n,path:Ld.emptyPath(),ca:!1,da:r},this.databaseId,this.Tt,this.ignoreUndefinedProperties)}}]),e}();function wS(e){var t=e._freezeSettings(),n=Wb(e._databaseId);return new bS(e._databaseId,!!t.ignoreUndefinedProperties,n)}function xS(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.wa(a.merge||a.mergeFields?2:0,t,n,i);LS("Data must be an object, but it was:",o,r);var u,s,c=RS(r,o);if(a.merge)u=new _v(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=k(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=MS(t,l.value,n);if(!o.contains(d))throw new vd(pd.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));VS(f,d)||f.push(d)}}catch(p){h.e(p)}finally{h.f()}u=new _v(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new yS(new Sv(c),u,s)}var _S=function(e){x(n,e);var t=I(n);function n(){return y(this,n),t.apply(this,arguments)}return g(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ra)throw 1===e.ra?e.fa("".concat(this._methodName,"() can only appear at the top level of your update data")):e.fa("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(dS);function SS(e,t,n){return new kS({ra:3,_a:t.settings._a,methodName:e._methodName,ca:n},t.databaseId,t.Tt,t.ignoreUndefinedProperties)}var IS=function(e){x(n,e);var t=I(n);function n(){return y(this,n),t.apply(this,arguments)}return g(n,[{key:"_toFieldTransform",value:function(e){return new py(e.path,new oy)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(dS),ES=function(e){x(n,e);var t=I(n);function n(e,r){var i;return y(this,n),(i=t.call(this,e)).ma=r,i}return g(n,[{key:"_toFieldTransform",value:function(e){var t=SS(this,e,!0),n=this.ma.map((function(e){return OS(e,t)})),r=new uy(n);return new py(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(dS),TS=function(e){x(n,e);var t=I(n);function n(e,r){var i;return y(this,n),(i=t.call(this,e)).ma=r,i}return g(n,[{key:"_toFieldTransform",value:function(e){var t=SS(this,e,!0),n=this.ma.map((function(e){return OS(e,t)})),r=new cy(n);return new py(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(dS),CS=function(e){x(n,e);var t=I(n);function n(e,r){var i;return y(this,n),(i=t.call(this,e)).ga=r,i}return g(n,[{key:"_toFieldTransform",value:function(e){var t=new fy(e.Tt,ty(e.Tt,this.ga));return new py(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(dS);function AS(e,t,n,r){var i=e.wa(1,t,n);LS("Data must be an object, but it was:",i,r);var a=[],o=Sv.empty();hp(r,(function(e,r){var u=jS(t,e,n);r=ie(r);var s=i.ha(u);if(r instanceof _S)a.push(u);else{var c=OS(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new _v(a);return new mS(o,u,i.fieldTransforms)}function NS(e,t,n,r,i,a){var o=e.wa(1,t,n),u=[MS(t,r,n)],s=[i];if(a.length%2!=0)throw new vd(pd.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(MS(t,a[c])),s.push(a[c+1]);for(var l=[],f=Sv.empty(),h=u.length-1;h>=0;--h)if(!VS(l,u[h])){var d=u[h],p=s[h];p=ie(p);var v=o.ha(d);if(p instanceof _S)l.push(d);else{var y=OS(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new _v(l);return new mS(f,m,o.fieldTransforms)}function DS(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return OS(n,e.wa(r?4:3,t))}function OS(e,t){if(PS(e=ie(e)))return LS("Unsupported field value:",t,e),RS(e,t);if(e instanceof dS)return function(e,t){if(!gS(t.ra))throw t.fa("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.fa("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ca&&4!==t.ra)throw t.fa("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=k(e);try{for(a.s();!(n=a.n()).done;){var o=OS(n.value,t.la(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=ie(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ty(t.Tt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Nd.fromDate(e);return{timestampValue:cm(t.Tt,n)}}if(e instanceof Nd){var r=new Nd(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:cm(t.Tt,r)}}if(e instanceof pS)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof fS)return{bytesValue:lm(t.Tt,e._byteString)};if(e instanceof W_){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.fa("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:dm(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.fa("Unsupported field value: ".concat(V_(e)))}(e,t)}function RS(e,t){var n={};return dp(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):hp(e,(function(e,r){var i=OS(r,t.ua(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function PS(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Nd||e instanceof pS||e instanceof fS||e instanceof W_||e instanceof dS)}function LS(e,t,n){if(!PS(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=V_(n);throw"an object"===r?t.fa(e+" a custom object"):t.fa(e+" "+r)}}function MS(e,t,n){if((t=ie(t))instanceof hS)return t._internalPath;if("string"==typeof t)return jS(e,t);throw US("Field path arguments must be of type string or ",e,!1,void 0,n)}var FS=new RegExp("[~\\*/\\[\\]]");function jS(e,t,n){if(t.search(FS)>=0)throw US("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return E(hS,oe(t.split(".")))._internalPath}catch(HE){throw US("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function US(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new vd(pd.INVALID_ARGUMENT,u+e+s)}function VS(e,t){return e.some((function(e){return e.isEqual(t)}))}var qS=function(){function e(t,n,r,i,a){y(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return g(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new W_(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new zS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(BS("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),zS=function(e){x(n,e);var t=I(n);function n(){return y(this,n),t.apply(this,arguments)}return g(n,[{key:"data",value:function(){return Ft(_(n.prototype),"data",this).call(this)}}]),n}(qS);function BS(e,t){return"string"==typeof t?jS(e,t):t instanceof hS?t._internalPath:t._delegate._internalPath}function KS(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new vd(pd.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var GS=g((function e(){y(this,e)})),WS=function(e){x(n,e);var t=I(n);function n(){return y(this,n),t.apply(this,arguments)}return g(n)}(GS);function QS(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof GS&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof $S})).length,n=e.filter((function(e){return e instanceof HS})).length;if(t>1||t>0&&n>0)throw new vd(pd.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=k(n);try{for(u.s();!(o=u.n()).done;){e=o.value._apply(e)}}catch(s){u.e(s)}finally{u.f()}return e}var HS=function(e){x(n,e);var t=I(n);function n(e,r,i){var a;return y(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return g(n,[{key:"_apply",value:function(e){var t=this._parse(e);return sI(e._query,t),new Q_(e.firestore,e.converter,Kv(e._query,t))}},{key:"_parse",value:function(e){var t=wS(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new vd(pd.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){uI(o,a);var s,c=[],l=k(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(oI(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=oI(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||uI(o,a),u=DS(n,"where",o,"in"===a||"not-in"===a);return Yp.create(i,a,u)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(WS);var $S=function(e){x(n,e);var t=I(n);function n(e,r){var i;return y(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return g(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:Jp.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=k(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;sI(r,a),r=Kv(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new Q_(e.firestore,e.converter,Kv(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(GS);var XS=function(e){x(n,e);var t=I(n);function n(e,r){var i;return y(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return g(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new vd(pd.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new vd(pd.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new vv(t,n);return function(e,t){if(null===Uv(e)){var n=Vv(e);null!==n&&cI(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new Q_(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Lv(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(WS);function YS(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=BS("orderBy",e);return XS._create(n,t)}var JS=function(e){x(n,e);var t=I(n);function n(e,r,i){var a;return y(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return g(n,[{key:"_apply",value:function(e){return new Q_(e.firestore,e.converter,Gv(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(WS);var ZS=function(e){x(n,e);var t=I(n);function n(e,r,i){var a;return y(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return g(n,[{key:"_apply",value:function(e){var t=aI(e,this.type,this._docOrFields,this._inclusive);return new Q_(e.firestore,e.converter,function(e,t){return new Lv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(WS);function eI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ZS._create("startAt",t,!0)}function tI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ZS._create("startAfter",t,!1)}var nI=function(e){x(n,e);var t=I(n);function n(e,r,i){var a;return y(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return g(n,[{key:"_apply",value:function(e){var t=aI(e,this.type,this._docOrFields,this._inclusive);return new Q_(e.firestore,e.converter,function(e,t){return new Lv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(WS);function rI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return nI._create("endBefore",t,!1)}function iI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return nI._create("endAt",t,!0)}function aI(e,t,n,r){if(n[0]=ie(n[0]),n[0]instanceof qS)return function(e,t,n,r,i){if(!r)throw new vd(pd.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=k(zv(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(Lp(t,r.key));else{var c=r.data.field(s.field);if(_p(c))throw new vd(pd.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new vd(pd.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new Qp(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=wS(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new vd(pd.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new vd(pd.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!qv(e)&&-1!==c.indexOf("/"))throw new vd(pd.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Rd.fromString(c));if(!Md.isDocumentKey(l))throw new vd(pd.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Md(l);u.push(Lp(t,f))}else{var h=DS(n,r,c);u.push(h)}}return new Qp(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function oI(e,t,n){if("string"==typeof(n=ie(n))){if(""===n)throw new vd(pd.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qv(t)&&-1!==n.indexOf("/"))throw new vd(pd.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Rd.fromString(n));if(!Md.isDocumentKey(r))throw new vd(pd.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Lp(e,new Md(r))}if(n instanceof W_)return Lp(e,n._key);throw new vd(pd.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(V_(n),"."))}function uI(e,t){if(!Array.isArray(e)||0===e.length)throw new vd(pd.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function sI(e,t){if(t.isInequality()){var n=Vv(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new vd(pd.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=Uv(e);null!==i&&cI(e,r,i)}var a=function(e,t){var n,r=k(e);try{for(r.s();!(n=r.n()).done;){var i,a=k(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new vd(pd.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new vd(pd.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function cI(e,t,n){if(!n.isEqual(t))throw new vd(pd.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var lI=function(){function e(){y(this,e)}return g(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Cp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wp(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw fd()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return hp(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new pS(wp(e.latitude),wp(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Sp(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Ip(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=bp(e);return new Nd(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Rd.fromString(e);hd(Fm(n));var r=new lp(n.get(1),n.get(3)),i=new Md(n.popFirst(5));return r.isEqual(t)||sd("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function fI(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var hI=function(e){x(n,e);var t=I(n);function n(e){var r;return y(this,n),(r=t.call(this)).firestore=e,r}return g(n,[{key:"convertBytes",value:function(e){return new fS(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new W_(this.firestore,null,t)}}]),n}(lI);var dI=function(){function e(t,n){y(this,e),this.hasPendingWrites=t,this.fromCache=n}return g(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),pI=function(e){x(n,e);var t=I(n);function n(e,r,i,a,o,u){var s;return y(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return g(n,[{key:"exists",value:function(){return Ft(_(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new vI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(BS("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(qS),vI=function(e){x(n,e);var t=I(n);function n(){return y(this,n),t.apply(this,arguments)}return g(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ft(_(n.prototype),"data",this).call(this,e)}}]),n}(pI),yI=function(){function e(t,n,r,i){y(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new dI(i.hasPendingWrites,i.fromCache),this.query=r}return g(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new vI(n._firestore,n._userDataWriter,r.key,r,new dI(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new vd(pd.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new vI(e._firestore,e._userDataWriter,t.doc.key,t.doc,new dI(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new vI(e._firestore,e._userDataWriter,t.doc.key,t.doc,new dI(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:mI(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function mI(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fd()}}function gI(e,t){return e instanceof pI&&t instanceof pI?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof yI&&t instanceof yI&&e._firestore===t._firestore&&J_(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var kI=function(e){x(n,e);var t=I(n);function n(e){var r;return y(this,n),(r=t.call(this)).firestore=e,r}return g(n,[{key:"convertBytes",value:function(e){return new fS(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new W_(this.firestore,null,t)}}]),n}(lI);function bI(e){e=q_(e,W_);var t=q_(e.firestore,nS),n=rS(t),r=new kI(t);return function(e,t){var n=new yd;return e.asyncQueue.enqueueAndForget(d(f().mark((function r(){return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=d(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=dd(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new vd(pd.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=zw(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,T_(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new pI(t,r,e._key,n,new dI(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function wI(e){e=q_(e,Q_);var t=q_(e.firestore,nS),n=rS(t),r=new kI(t);return KS(e._query),P_(n,e._query).then((function(n){return new yI(t,r,e,n)}))}function xI(e){e=q_(e,Q_);var t=q_(e.firestore,nS),n=rS(t),r=new kI(t);return function(e,t){var n=new yd;return e.asyncQueue.enqueueAndForget(d(f().mark((function r(){return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=d(f().mark((function e(t,n,r){var i,a,o,u,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,gb(t,n,!0);case 3:i=e.sent,a=new sx(n,i.Yi),o=a.Hu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=zw(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,T_(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new yI(t,r,e,n)}))}function _I(e,t,n){e=q_(e,W_);var r=q_(e.firestore,nS),i=fI(e.converter,t,n);return CI(r,[xS(wS(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,yy.none())])}function SI(e,t,n){e=q_(e,W_);for(var r=q_(e.firestore,nS),i=wS(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return CI(r,[("string"==typeof(t=ie(t))||t instanceof hS?NS(i,"updateDoc",e._key,t,n,o):AS(i,"updateDoc",e._key,t)).toMutation(e._key,yy.exists(!0))])}function II(e){return CI(q_(e.firestore,nS),[new Dy(e._key,yy.none())])}function EI(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=ie(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||eS(n[s])||(u=n[s],s++);var c,l,h,p={includeMetadataChanges:u.includeMetadataChanges};if(eS(n[s])){var v=n[s];n[s]=null===(i=v.next)||void 0===i?void 0:i.bind(v),n[s+1]=null===(a=v.error)||void 0===a?void 0:a.bind(v),n[s+2]=null===(o=v.complete)||void 0===o?void 0:o.bind(v)}if(e instanceof W_)l=q_(e.firestore,nS),h=Fv(e._key.path),c={next:function(t){n[s]&&n[s](AI(l,e,t))},error:n[s+1],complete:n[s+2]};else{var y=q_(e,Q_);l=q_(y.firestore,nS),h=y._query;var m=new kI(l);c={next:function(e){n[s]&&n[s](new yI(l,m,y,e))},error:n[s+1],complete:n[s+2]},KS(e._query)}return function(e,t,n,r){var i=new d_(r),a=new tx(t,i,n);return e.asyncQueue.enqueueAndForget(d(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Hw,t.next=3,D_(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.bc(),e.asyncQueue.enqueueAndForget(d(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Xw,t.next=3,D_(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(rS(l),h,p,c)}function TI(e,t){return function(e,t){var n=new d_(t);return e.asyncQueue.enqueueAndForget(d(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){dd(e).vu.add(t),t.next()},t.next=3,D_(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.bc(),e.asyncQueue.enqueueAndForget(d(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){dd(e).vu.delete(t)},t.next=3,D_(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(rS(e=q_(e,nS)),eS(t)?t:{next:t})}function CI(e,t){return function(e,t){var n=new yd;return e.asyncQueue.enqueueAndForget(d(f().mark((function r(){return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=gx,r.next=3,A_(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(rS(e),t)}function AI(e,t,n){var r=n.docs.get(t._key),i=new kI(e);return new pI(e,i,t._key,r,new dI(n.hasPendingWrites,n.fromCache),t.converter)}var NI={maxAttempts:5},DI=function(){function e(t,n){y(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=wS(t)}return g(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=OI(e,this._firestore),i=fI(r.converter,t,n),a=xS(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,yy.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=OI(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=ie(t))||t instanceof hS?NS(this._dataReader,"WriteBatch.update",i._key,t,n,o):AS(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,yy.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=OI(e,this._firestore);return this._mutations=this._mutations.concat(new Dy(t._key,yy.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new vd(pd.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function OI(e,t){if((e=ie(e)).firestore!==t)throw new vd(pd.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var RI=function(e){x(n,e);var t=I(n);function n(e,r){var i;return y(this,n),(i=t.call(this,e,r))._firestore=e,i}return g(n,[{key:"get",value:function(e){var t=this,r=OI(e,this._firestore),i=new kI(this._firestore);return Ft(_(n.prototype),"get",this).call(this,e).then((function(e){return new pI(t._firestore,i,r._key,e._document,new dI(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){y(this,e),this._firestore=t,this._transaction=n,this._dataReader=wS(t)}return g(e,[{key:"get",value:function(e){var t=this,n=OI(e,this._firestore),r=new hI(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return fd();var i=e[0];if(i.isFoundDocument())return new qS(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new qS(t._firestore,r,n._key,null,n.converter);throw fd()}))}},{key:"set",value:function(e,t,n){var r=OI(e,this._firestore),i=fI(r.converter,t,n),a=xS(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=OI(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=ie(t))||t instanceof hS?NS(this._dataReader,"Transaction.update",i._key,t,n,o):AS(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=OI(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function PI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ES("arrayUnion",t)}function LI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new TS("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){id=e}(rt),Xe(new ue("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new nS(new bd(e.getProvider("auth-internal")),new Sd(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new vd(pd.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lp(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),ct(nd,"3.9.0",e),ct(nd,"3.9.0","esm2017")}();function MI(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new vd("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function FI(){if("undefined"===typeof Uint8Array)throw new vd("unimplemented","Uint8Arrays are not available in this environment.")}function jI(){if("undefined"==typeof atob)throw new vd("unimplemented","Blobs are unavailable in Firestore in this environment.")}var UI=function(){function e(t){y(this,e),this._delegate=t}return g(e,[{key:"toBase64",value:function(){return jI(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return FI(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return jI(),new e(fS.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return FI(),new e(fS.fromUint8Array(t))}}]),e}();function VI(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=k(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var qI=function(){function e(){y(this,e)}return g(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){lS(e=q_(e,nS));var n=rS(e),r=e._freezeSettings(),i=new f_;return aS(n,i,new c_(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){lS(e=q_(e,nS));var t=rS(e),n=e._freezeSettings(),r=new f_;return aS(t,r,new l_(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new vd(pd.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new yd;return e._queue.enqueueAndForgetEvenWhileRestricted(d(f().mark((function n(){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Jd.C()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Jd.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(rb(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),zI=function(){function e(t,n,r){var i=this;y(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof lp||(this._appCompat=t)}return g(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||cd("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};G_(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return oS(this._delegate)}},{key:"disableNetwork",value:function(){return uS(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&F_("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new yd;return e.asyncQueue.enqueueAndForget(d(f().mark((function n(){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Ax,n.next=3,A_(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(rS(e=q_(e,nS)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return TI(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new vd("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new nE(this,$_(this._delegate,e))}catch(t){throw HI(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new QI(this,X_(this._delegate,e))}catch(t){throw HI(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new ZI(this,function(e,t){if(e=q_(e,K_),M_("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new vd(pd.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Q_(e,null,function(e){return new Lv(Rd.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw HI(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=q_(e,nS);var r=Object.assign(Object.assign({},NI),n);return function(e){if(e.maxAttempts<1)throw new vd(pd.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new yd;return e.asyncQueue.enqueueAndForget(d(f().mark((function i(){var a;return f().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,N_(e);case 2:a=i.sent,new y_(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(rS(e),(function(n){return t(new RI(e,n))}),r)}(this._delegate,(function(n){return e(new KI(t,n))}))}},{key:"batch",value:function(){var e=this;return rS(this._delegate),new GI(new DI(this._delegate,(function(t){return CI(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return sS(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return cS(this._delegate,e).then((function(e){return e?new ZI(t,e):null}))}}]),e}(),BI=function(e){x(n,e);var t=I(n);function n(e){var r;return y(this,n),(r=t.call(this)).firestore=e,r}return g(n,[{key:"convertBytes",value:function(e){return new UI(new fS(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return QI.forKey(t,this.firestore,null)}}]),n}(lI);var KI=function(){function e(t,n){y(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new BI(t)}return g(e,[{key:"get",value:function(e){var t=this,n=rE(e);return this._delegate.get(n).then((function(e){return new YI(t._firestore,new pI(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=rE(e);return n?(MI("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=rE(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=rE(e);return this._delegate.delete(t),this}}]),e}(),GI=function(){function e(t){y(this,e),this._delegate=t}return g(e,[{key:"set",value:function(e,t,n){var r=rE(e);return n?(MI("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=rE(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=rE(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),WI=function(){function e(t,n,r){y(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return g(e,[{key:"fromFirestore",value:function(e,t){var n=new vI(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new JI(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new BI(t),n),i.set(n,a)),a}}]),e}();WI.INSTANCES=new WeakMap;var QI=function(){function e(t,n){y(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new BI(t)}return g(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new nE(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new nE(this.firestore,$_(this._delegate,e))}catch(t){throw HI(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=ie(e))instanceof W_&&Y_(this._delegate,e)}},{key:"set",value:function(e,t){t=MI("DocumentReference.set",t);try{return t?_I(this._delegate,e,t):_I(this._delegate,e)}catch(n){throw HI(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?SI(this._delegate,e):SI.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw HI(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return II(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=$I(n),a=XI(n,(function(t){return new YI(e.firestore,new pI(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return EI(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?bI(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=q_(e,W_);var t=q_(e.firestore,nS);return R_(rS(t),e._key,{source:"server"}).then((function(n){return AI(t,e,n)}))}(this._delegate):function(e){e=q_(e,W_);var t=q_(e.firestore,nS);return R_(rS(t),e._key).then((function(n){return AI(t,e,n)}))}(this._delegate),t.then((function(e){return new YI(n.firestore,new pI(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(WI.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new vd("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new W_(n._delegate,r,new Md(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new W_(n._delegate,r,t))}}]),e}();function HI(e,t,n){return e.message=e.message.replace(t,n),e}function $I(e){var t,n=k(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!VI(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function XI(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=VI(e[0])?e[0]:VI(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var YI=function(){function e(t,n){y(this,e),this._firestore=t,this._delegate=n}return g(e,[{key:"ref",get:function(){return new QI(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return gI(this._delegate,e._delegate)}}]),e}(),JI=function(e){x(n,e);var t=I(n);function n(){return y(this,n),t.apply(this,arguments)}return g(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||fd()}(void 0!==t),t}}]),n}(YI),ZI=function(){function e(t,n){y(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new BI(t)}return g(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,QS(this._delegate,function(e,t,n){var r=t,i=BS("where",e);return HS._create(i,r,n)}(t,n,r)))}catch(i){throw HI(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,QS(this._delegate,YS(t,n)))}catch(r){throw HI(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,QS(this._delegate,function(e){return z_("limit",e),JS._create("limit",e,"F")}(t)))}catch(n){throw HI(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,QS(this._delegate,function(e){return z_("limitToLast",e),JS._create("limitToLast",e,"L")}(t)))}catch(n){throw HI(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,QS(this._delegate,eI.apply(void 0,arguments)))}catch(t){throw HI(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,QS(this._delegate,tI.apply(void 0,arguments)))}catch(t){throw HI(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,QS(this._delegate,rI.apply(void 0,arguments)))}catch(t){throw HI(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,QS(this._delegate,iI.apply(void 0,arguments)))}catch(t){throw HI(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return J_(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?xI(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=q_(e,Q_);var t=q_(e.firestore,nS),n=rS(t),r=new kI(t);return P_(n,e._query,{source:"server"}).then((function(n){return new yI(t,r,e,n)}))}(this._delegate):wI(this._delegate),t.then((function(e){return new tE(n.firestore,new yI(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=$I(n),a=XI(n,(function(t){return new tE(e.firestore,new yI(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return EI(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(WI.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),eE=function(){function e(t,n){y(this,e),this._firestore=t,this._delegate=n}return g(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new JI(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),tE=function(){function e(t,n){y(this,e),this._firestore=t,this._delegate=n}return g(e,[{key:"query",get:function(){return new ZI(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new JI(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new eE(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new JI(n._firestore,r))}))}},{key:"isEqual",value:function(e){return gI(this._delegate,e._delegate)}}]),e}(),nE=function(e){x(n,e);var t=I(n);function n(e,r){var i;return y(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return g(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new QI(this.firestore,e):null}},{key:"doc",value:function(e){try{return new QI(this.firestore,void 0===e?X_(this._delegate):X_(this._delegate,e))}catch(t){throw HI(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=q_(e.firestore,nS),r=X_(e),i=fI(e.converter,t);return CI(n,[xS(wS(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,yy.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new QI(t.firestore,e)}))}},{key:"isEqual",value:function(e){return Y_(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(WI.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(ZI);function rE(e){return q_(e,W_)}var iE=function(){function e(){y(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=E(hS,n)}return g(e,[{key:"isEqual",value:function(e){return(e=ie(e))instanceof hS&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Ld.keyField().canonicalString())}}]),e}(),aE=function(){function e(t){y(this,e),this._delegate=t}return g(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new IS("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new _S("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=PI.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=LI.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new CS("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),oE={Firestore:zI,GeoPoint:pS,Timestamp:Nd,Blob:UI,Transaction:KI,WriteBatch:GI,DocumentReference:QI,DocumentSnapshot:YI,Query:ZI,QueryDocumentSnapshot:JI,QuerySnapshot:tE,CollectionReference:nE,FieldPath:iE,FieldValue:aE,setLogLevel:function(e){!function(e){ad.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new ue("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},oE)))}(e,(function(e,t){return new zI(e,t,new qI)})),e.registerVersion("@firebase/firestore-compat","0.3.5")}(Lt);Lt.initializeApp({apiKey:"AIzaSyDWuRUVtL5iesMW5-6Ugqv7pmitY_f-aoU",authDomain:"react-daily-goal-tracker.firebaseapp.com",projectId:"react-daily-goal-tracker",storageBucket:"react-daily-goal-tracker.appspot.com",messagingSenderId:"127766768496",appId:"1:127766768496:web:6580c3395f8f939587fdb5"});var uE=new Lt.auth.GoogleAuthProvider,sE=Lt.firestore(),cE=Ku();uE.setCustomParameters({prompt:"select_account"});var lE=function(){var e=d(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Qi(cE,n,r);case 3:return i=e.sent,a=i.user,e.next=7,_I(X_(sE,"users","".concat(a.email,"-").concat(a.uid)),{name:t,email:n,uid:a.uid,authProvider:"local",refreshToken:a.refreshToken});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),alert("There is an issue with the inserted email or password. Please try again");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n,r){return e.apply(this,arguments)}}(),fE=function(){var e=d(f().mark((function e(t,n){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$i(cE,t,n);case 3:r=e.sent,r.user&&console.log("user logged successfully"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert("There is an issue with your credentials. Please try again");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),hE=n(834);var dE=function(){var e=c((0,t.useState)(""),2),n=e[0],r=e[1],i=c((0,t.useState)(""),2),a=i[0],o=i[1],u=c((0,t.useState)(""),2),s=u[0],l=u[1];return(0,hE.jsxs)("div",{"data-testid":"registerComponentTestElement",className:"myAccount__form myAccount__form--register formWrapper",children:[(0,hE.jsx)("h2",{children:"Register an account to start setting goals "}),(0,hE.jsx)("br",{}),(0,hE.jsxs)("form",{onSubmit:function(e){e.preventDefault(),lE(n,a,s)},children:[(0,hE.jsxs)("div",{className:"form-control",children:[(0,hE.jsx)("label",{htmlFor:"registrationFormNameInput",children:"Name"}),(0,hE.jsx)("input",{type:"text",name:"name",id:"registrationFormNameInput",placeholder:"Enter name",value:n,onChange:function(e){return r(e.target.value)}}),(0,hE.jsx)("span",{className:"separator",children:" "})]}),(0,hE.jsxs)("div",{className:"form-control",children:[(0,hE.jsx)("label",{htmlFor:"registrationFormEmailInput",children:"Email"}),(0,hE.jsx)("input",{type:"email",name:"email",id:"registrationFormEmailInput",placeholder:"Enter email",value:a,onChange:function(e){return o(e.target.value)}}),(0,hE.jsx)("span",{className:"separator",children:" "})]}),(0,hE.jsxs)("div",{className:"form-control",children:[(0,hE.jsx)("label",{htmlFor:"registrationFormPasswordInput",children:"Password"}),(0,hE.jsx)("input",{type:"password",name:"password",id:"registrationFormPasswordInput",placeholder:"Enter password",value:s,onChange:function(e){return l(e.target.value)}}),(0,hE.jsx)("span",{className:"separator",children:" "})]}),(0,hE.jsx)("div",{className:"form-control",children:(0,hE.jsx)("button",{type:"submit",children:"Register"})})]})]})};var pE=function(){var e=c((0,t.useState)(""),2),n=e[0],r=e[1],i=c((0,t.useState)(""),2),a=i[0],o=i[1];return(0,hE.jsxs)("div",{"data-testid":"loginComponentTest",className:"hi myAccount__form myAccount__form--login formWrapper",children:[(0,hE.jsx)("h2",{children:"Login if you have already an account"}),(0,hE.jsx)("br",{}),(0,hE.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fE(n,a)},children:[(0,hE.jsxs)("div",{className:"form-control",children:[(0,hE.jsx)("label",{htmlFor:"loginFormEmailInput",children:"Email"}),(0,hE.jsx)("input",{type:"email",name:"email",id:"loginFormEmailInput",value:n,onChange:function(e){return function(e){r(e.target.value)}(e)}}),(0,hE.jsx)("span",{className:"separator",children:" "})]}),(0,hE.jsxs)("div",{className:"form-control",children:[(0,hE.jsx)("label",{htmlFor:"loginFormPassword",children:"Password"}),(0,hE.jsx)("input",{type:"password",name:"password",id:"loginFormPassword",value:a,onChange:function(e){return function(e){o(e.target.value)}(e)}}),(0,hE.jsx)("span",{className:"separator",children:" "})]}),(0,hE.jsx)("div",{className:"form-control",children:(0,hE.jsx)("button",{type:"submit",children:"Login"})})]})]})};var vE=function(){return(0,hE.jsxs)("div",{className:"myAccount",children:[(0,hE.jsx)(dE,{}),(0,hE.jsx)("div",{className:"myAccount__separatorH2",children:(0,hE.jsx)("h2",{children:"OR"})}),(0,hE.jsx)(pE,{})]})},yE=n(853),mE=n(599),gE=n(544);var kE=function(e){e()},bE=function(){return kE},wE=(0,t.createContext)(null);function xE(){return(0,t.useContext)(wE)}var _E=function(){throw new Error("uSES not initialized!")},SE=_E,IE=function(e,t){return e===t};function EE(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wE,n=e===wE?xE:function(){return(0,t.useContext)(e)};return function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:IE;var i=n(),a=i.store,o=i.subscription,u=i.getServerState,s=SE(o.addNestedSub,a.getState,u||a.getState,e,r);return(0,t.useDebugValue)(s),s}}var TE=EE();n(53),n(686);var CE={notify:function(){},get:function(){return[]}};function AE(e,t){var n,r=CE;function i(){o.onStateChange&&o.onStateChange()}function a(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=bE(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var o={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=CE)},getListeners:function(){return r}};return o}var NE=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?t.useLayoutEffect:t.useEffect;var DE=function(e){var n=e.store,r=e.context,i=e.children,a=e.serverState,o=(0,t.useMemo)((function(){var e=AE(n);return{store:n,subscription:e,getServerState:a?function(){return a}:void 0}}),[n,a]),u=(0,t.useMemo)((function(){return n.getState()}),[n]);NE((function(){var e=o.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),u!==n.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=void 0}}),[o,u]);var s=r||wE;return t.createElement(s.Provider,{value:o},i)};function OE(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wE,n=e===wE?xE:function(){return(0,t.useContext)(e)};return function(){return n().store}}var RE=OE();function PE(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wE,t=e===wE?RE:OE(e);return function(){return t().dispatch}}var LE,ME=PE();function FE(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function jE(e,t){if(FE(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!FE(e[n[i]],t[n[i]]))return!1;return!0}function UE(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function VE(e){return!!e&&!!e[NT]}function qE(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===DT}(e)||Array.isArray(e)||!!e[AT]||!!(null===(t=e.constructor)||void 0===t?void 0:t[AT])||HE(e)||$E(e))}function zE(e,t,n){void 0===n&&(n=!1),0===BE(e)?(n?Object.keys:OT)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function BE(e){var t=e[NT];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:HE(e)?2:$E(e)?3:0}function KE(e,t){return 2===BE(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function GE(e,t){return 2===BE(e)?e.get(t):e[t]}function WE(e,t,n){var r=BE(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function QE(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function HE(e){return IT&&e instanceof Map}function $E(e){return ET&&e instanceof Set}function XE(e){return e.o||e.t}function YE(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=RT(e);delete t[NT];for(var n=OT(t),r=0;r<n.length;r++){var i=n[r],a=t[i];!1===a.writable&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function JE(e,t){return void 0===t&&(t=!1),eT(e)||VE(e)||!qE(e)||(BE(e)>1&&(e.set=e.add=e.clear=e.delete=ZE),Object.freeze(e),t&&zE(e,(function(e,t){return JE(t,!0)}),!0)),e}function ZE(){UE(2)}function eT(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function tT(e){var t=PT[e];return t||UE(18,e),t}function nT(e,t){PT[e]||(PT[e]=t)}function rT(){return _T}function iT(e,t){t&&(tT("Patches"),e.u=[],e.s=[],e.v=t)}function aT(e){oT(e),e.p.forEach(sT),e.p=null}function oT(e){e===_T&&(_T=e.l)}function uT(e){return _T={p:[],l:_T,h:e,m:!0,_:0}}function sT(e){var t=e[NT];0===t.i||1===t.i?t.j():t.g=!0}function cT(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.O||tT("ES5").S(t,e,r),r?(n[NT].P&&(aT(t),UE(4)),qE(e)&&(e=lT(t,e),t.l||hT(t,e)),t.u&&tT("Patches").M(n[NT].t,e,t.u,t.s)):e=lT(t,n,[]),aT(t),t.u&&t.v(t.u,t.s),e!==CT?e:void 0}function lT(e,t,n){if(eT(t))return t;var r=t[NT];if(!r)return zE(t,(function(i,a){return fT(e,r,t,i,a,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return hT(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=YE(r.k):r.o,a=i,o=!1;3===r.i&&(a=new Set(i),i.clear(),o=!0),zE(a,(function(t,a){return fT(e,r,i,t,a,n,o)})),hT(e,i,!1),n&&e.u&&tT("Patches").N(r,n,e.u,e.s)}return r.o}function fT(e,t,n,r,i,a,o){if(VE(i)){var u=lT(e,i,a&&t&&3!==t.i&&!KE(t.R,r)?a.concat(r):void 0);if(WE(n,r,u),!VE(u))return;e.m=!1}else o&&n.add(i);if(qE(i)&&!eT(i)){if(!e.h.D&&e._<1)return;lT(e,i),t&&t.A.l||hT(e,i)}}function hT(e,t,n){void 0===n&&(n=!1),!e.l&&e.h.D&&e.m&&JE(t,n)}function dT(e,t){var n=e[NT];return(n?XE(n):e)[t]}function pT(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function vT(e){e.P||(e.P=!0,e.l&&vT(e.l))}function yT(e){e.o||(e.o=YE(e.t))}function mT(e,t,n){var r=HE(t)?tT("MapSet").F(t,n):$E(t)?tT("MapSet").T(t,n):e.O?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:rT(),P:!1,I:!1,R:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,a=LT;n&&(i=[r],a=MT);var o=Proxy.revocable(i,a),u=o.revoke,s=o.proxy;return r.k=s,r.j=u,s}(t,n):tT("ES5").J(t,n);return(n?n.A:rT()).p.push(r),r}function gT(e){return VE(e)||UE(22,e),function e(t){if(!qE(t))return t;var n,r=t[NT],i=BE(t);if(r){if(!r.P&&(r.i<4||!tT("ES5").K(r)))return r.t;r.I=!0,n=kT(t,i),r.I=!1}else n=kT(t,i);return zE(n,(function(t,i){r&&GE(r.t,t)===i||WE(n,t,e(i))})),3===i?new Set(n):n}(e)}function kT(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return YE(e)}function bT(){function e(e,t){var n=i[e];return n?n.enumerable=t:i[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[NT];return LT.get(t,e)},set:function(t){var n=this[NT];LT.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][NT];if(!i.P)switch(i.i){case 5:r(i)&&vT(i);break;case 4:n(i)&&vT(i)}}}function n(e){for(var t=e.t,n=e.k,r=OT(n),i=r.length-1;i>=0;i--){var a=r[i];if(a!==NT){var o=t[a];if(void 0===o&&!KE(t,a))return!0;var u=n[a],s=u&&u[NT];if(s?s.t!==o:!QE(u,o))return!0}}var c=!!t[NT];return r.length!==OT(t).length+(c?0:1)}function r(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}var i={};nT("ES5",{J:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var a=RT(n);delete a[NT];for(var o=OT(a),u=0;u<o.length;u++){var s=o[u];a[s]=e(s,t||!!a[s].enumerable)}return Object.create(Object.getPrototypeOf(n),a)}(r,t),a={i:r?5:4,A:n?n.A:rT(),P:!1,I:!1,R:{},l:n,t:t,k:i,o:null,g:!1,C:!1};return Object.defineProperty(i,NT,{value:a,writable:!0}),i},S:function(e,n,i){i?VE(n)&&n[NT].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[NT];if(n){var i=n.t,a=n.k,o=n.R,u=n.i;if(4===u)zE(a,(function(t){t!==NT&&(void 0!==i[t]||KE(i,t)?o[t]||e(a[t]):(o[t]=!0,vT(n)))})),zE(i,(function(e){void 0!==a[e]||KE(a,e)||(o[e]=!1,vT(n))}));else if(5===u){if(r(n)&&(vT(n),o.length=!0),a.length<i.length)for(var s=a.length;s<i.length;s++)o[s]=!1;else for(var c=i.length;c<a.length;c++)o[c]=!0;for(var l=Math.min(a.length,i.length),f=0;f<l;f++)a.hasOwnProperty(f)||(o[f]=!0),void 0===o[f]&&e(a[f])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):r(e)}})}function wT(){function e(t){if(!qE(t))return t;if(Array.isArray(t))return t.map(e);if(HE(t))return new Map(Array.from(t.entries()).map((function(t){return[t[0],e(t[1])]})));if($E(t))return new Set(Array.from(t).map(e));var n=Object.create(Object.getPrototypeOf(t));for(var r in t)n[r]=e(t[r]);return KE(t,AT)&&(n[AT]=t[AT]),n}function t(t){return VE(t)?e(t):t}var n="add";nT("Patches",{$:function(t,r){return r.forEach((function(r){for(var i=r.path,a=r.op,o=t,u=0;u<i.length-1;u++){var s=BE(o),c=i[u];"string"!=typeof c&&"number"!=typeof c&&(c=""+c),0!==s&&1!==s||"__proto__"!==c&&"constructor"!==c||UE(24),"function"==typeof o&&"prototype"===c&&UE(24),"object"!=typeof(o=GE(o,c))&&UE(15,i.join("/"))}var l=BE(o),f=e(r.value),h=i[i.length-1];switch(a){case"replace":switch(l){case 2:return o.set(h,f);case 3:UE(16);default:return o[h]=f}case n:switch(l){case 1:return"-"===h?o.push(f):o.splice(h,0,f);case 2:return o.set(h,f);case 3:return o.add(f);default:return o[h]=f}case"remove":switch(l){case 1:return o.splice(h,1);case 2:return o.delete(h);case 3:return o.delete(r.value);default:return delete o[h]}default:UE(17,a)}})),t},N:function(e,r,i,a){switch(e.i){case 0:case 4:case 2:return function(e,r,i,a){var o=e.t,u=e.o;zE(e.R,(function(e,s){var c=GE(o,e),l=GE(u,e),f=s?KE(o,e)?"replace":n:"remove";if(c!==l||"replace"!==f){var h=r.concat(e);i.push("remove"===f?{op:f,path:h}:{op:f,path:h,value:l}),a.push(f===n?{op:"remove",path:h}:"remove"===f?{op:n,path:h,value:t(c)}:{op:"replace",path:h,value:t(c)})}}))}(e,r,i,a);case 5:case 1:return function(e,r,i,a){var o=e.t,u=e.R,s=e.o;if(s.length<o.length){var c=[s,o];o=c[0],s=c[1];var l=[a,i];i=l[0],a=l[1]}for(var f=0;f<o.length;f++)if(u[f]&&s[f]!==o[f]){var h=r.concat([f]);i.push({op:"replace",path:h,value:t(s[f])}),a.push({op:"replace",path:h,value:t(o[f])})}for(var d=o.length;d<s.length;d++){var p=r.concat([d]);i.push({op:n,path:p,value:t(s[d])})}o.length<s.length&&a.push({op:"replace",path:r.concat(["length"]),value:o.length})}(e,r,i,a);case 3:return function(e,t,r,i){var a=e.t,o=e.o,u=0;a.forEach((function(e){if(!o.has(e)){var a=t.concat([u]);r.push({op:"remove",path:a,value:e}),i.unshift({op:n,path:a,value:e})}u++})),u=0,o.forEach((function(e){if(!a.has(e)){var o=t.concat([u]);r.push({op:n,path:o,value:e}),i.unshift({op:"remove",path:o,value:e})}u++}))}(e,r,i,a)}},M:function(e,t,n,r){n.push({op:"replace",path:[],value:t===CT?void 0:t}),r.push({op:"replace",path:[],value:e})}})}!function(e){SE=e}(mE.useSyncExternalStoreWithSelector),function(e){e}(yE.useSyncExternalStore),LE=gE.unstable_batchedUpdates,kE=LE;var xT,_T,ST="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),IT="undefined"!=typeof Map,ET="undefined"!=typeof Set,TT="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,CT=ST?Symbol.for("immer-nothing"):((xT={})["immer-nothing"]=!0,xT),AT=ST?Symbol.for("immer-draftable"):"__$immer_draftable",NT=ST?Symbol.for("immer-state"):"__$immer_state",DT=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),OT="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,RT=Object.getOwnPropertyDescriptors||function(e){var t={};return OT(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},PT={},LT={get:function(e,t){if(t===NT)return e;var n=XE(e);if(!KE(n,t))return function(e,t,n){var r,i=pT(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!qE(r)?r:r===dT(e.t,t)?(yT(e),e.o[t]=mT(e.A.h,r,e)):r},has:function(e,t){return t in XE(e)},ownKeys:function(e){return Reflect.ownKeys(XE(e))},set:function(e,t,n){var r=pT(XE(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=dT(XE(e),t),a=null==i?void 0:i[NT];if(a&&a.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(QE(n,i)&&(void 0!==n||KE(e.t,t)))return!0;yT(e),vT(e)}return e.o[t]===n&&(void 0!==n||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return void 0!==dT(e.t,t)||t in e.t?(e.R[t]=!1,yT(e),vT(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=XE(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){UE(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){UE(12)}},MT={};zE(LT,(function(e,t){MT[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),MT.deleteProperty=function(e,t){return MT.set.call(this,e,t,void 0)},MT.set=function(e,t,n){return LT.set.call(this,e[0],t,n,e[0])};var FT=function(){function e(e){var t=this;this.O=TT,this.D=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var i=n;n=e;var a=t;return function(e){var t=this;void 0===e&&(e=i);for(var r=arguments.length,o=Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=arguments[u];return a.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(o))}))}}var o;if("function"!=typeof n&&UE(6),void 0!==r&&"function"!=typeof r&&UE(7),qE(e)){var u=uT(t),s=mT(t,e,void 0),c=!0;try{o=n(s),c=!1}finally{c?aT(u):oT(u)}return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return iT(u,r),cT(e,u)}),(function(e){throw aT(u),e})):(iT(u,r),cT(o,u))}if(!e||"object"!=typeof e){if(void 0===(o=n(e))&&(o=e),o===CT&&(o=void 0),t.D&&JE(o,!0),r){var l=[],f=[];tT("Patches").M(e,o,l,f),r(l,f)}return o}UE(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(i))}))};var r,i,a=t.produce(e,n,(function(e,t){r=e,i=t}));return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(e){return[e,r,i]})):[a,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){qE(e)||UE(8),VE(e)&&(e=gT(e));var t=uT(this),n=mT(this,e,void 0);return n[NT].C=!0,oT(t),n},t.finishDraft=function(e,t){var n=(e&&e[NT]).A;return iT(n,t),cT(void 0,n)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!TT&&UE(20),this.O=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var i=tT("Patches").$;return VE(e)?i(e,t):this.produce(e,(function(e){return i(e,t)}))},e}(),jT=new FT,UT=jT.produce,VT=jT.produceWithPatches.bind(jT),qT=(jT.setAutoFreeze.bind(jT),jT.setUseProxies.bind(jT),jT.applyPatches.bind(jT)),zT=(jT.createDraft.bind(jT),jT.finishDraft.bind(jT),UT);function BT(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var KT="function"===typeof Symbol&&Symbol.observable||"@@observable",GT=function(){return Math.random().toString(36).substring(7).split("").join(".")},WT={INIT:"@@redux/INIT"+GT(),REPLACE:"@@redux/REPLACE"+GT(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+GT()}};function QT(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function HT(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(BT(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(BT(1));return n(HT)(e,t)}if("function"!==typeof e)throw new Error(BT(2));var i=e,a=t,o=[],u=o,s=!1;function c(){u===o&&(u=o.slice())}function l(){if(s)throw new Error(BT(3));return a}function f(e){if("function"!==typeof e)throw new Error(BT(4));if(s)throw new Error(BT(5));var t=!0;return c(),u.push(e),function(){if(t){if(s)throw new Error(BT(6));t=!1,c();var n=u.indexOf(e);u.splice(n,1),o=null}}}function h(e){if(!QT(e))throw new Error(BT(7));if("undefined"===typeof e.type)throw new Error(BT(8));if(s)throw new Error(BT(9));try{s=!0,a=i(a,e)}finally{s=!1}for(var t=o=u,n=0;n<t.length;n++){(0,t[n])()}return e}return h({type:WT.INIT}),(r={dispatch:h,subscribe:f,getState:l,replaceReducer:function(e){if("function"!==typeof e)throw new Error(BT(10));i=e,h({type:WT.REPLACE})}})[KT]=function(){var e,t=f;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(BT(11));function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[KT]=function(){return this},e},r}function $T(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var a,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:WT.INIT}))throw new Error(BT(12));if("undefined"===typeof n(void 0,{type:WT.PROBE_UNKNOWN_ACTION()}))throw new Error(BT(13))}))}(n)}catch(u){a=u}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},u=0;u<o.length;u++){var s=o[u],c=n[s],l=e[s],f=c(l,t);if("undefined"===typeof f){t&&t.type;throw new Error(BT(14))}i[s]=f,r=r||f!==l}return(r=r||o.length!==Object.keys(e).length)?i:e}}function XT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function YT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(BT(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return r=XT.apply(void 0,a)(n.dispatch),be(be({},n),{},{dispatch:r})}}}function JT(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"===typeof i?i(n,r,e):t(i)}}}}var ZT=JT();ZT.withExtraArgument=JT;var eC=ZT,tC=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),nC=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(u){a=[6,u],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},rC=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},iC=Object.defineProperty,aC=Object.defineProperties,oC=Object.getOwnPropertyDescriptors,uC=Object.getOwnPropertySymbols,sC=Object.prototype.hasOwnProperty,cC=Object.prototype.propertyIsEnumerable,lC=function(e,t,n){return t in e?iC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},fC=function(e,t){for(var n in t||(t={}))sC.call(t,n)&&lC(e,n,t[n]);if(uC)for(var r=0,i=uC(t);r<i.length;r++){n=i[r];cC.call(t,n)&&lC(e,n,t[n])}return e},hC=function(e,t){return aC(e,oC(t))},dC=function(e,t,n){return new Promise((function(r,i){var a=function(e){try{u(n.next(e))}catch(t){i(t)}},o=function(e){try{u(n.throw(e))}catch(t){i(t)}},u=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(a,o)};u((n=n.apply(e,t)).next())}))},pC="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?XT:XT.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function vC(e){if("object"!==typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}var yC=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return tC(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,rC([void 0],e[0].concat(this)))):new(t.bind.apply(t,rC([void 0],e.concat(this))))},t}(Array);function mC(e){return qE(e)?zT(e,(function(){})):e}function gC(){return function(e){return function(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t,r=(e.immutableCheck,e.serializableCheck,new yC);n&&(!function(e){return"boolean"===typeof e}(n)?r.push(eC.withExtraArgument(n.extraArgument)):r.push(eC));0;return r}(e)}}function kC(e,t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return fC(fC({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}function bC(e){var t,n={},r=[],i={addCase:function(e,t){var r="string"===typeof e?e:e.type;if(r in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[r]=t,i},addMatcher:function(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[n,r,t]}function wC(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n,r="function"==typeof e.initialState?e.initialState:mC(e.initialState),i=e.reducers||{},a=Object.keys(i),o={},u={},s={};function c(){var t="function"===typeof e.extraReducers?bC(e.extraReducers):[e.extraReducers],n=t[0],i=void 0===n?{}:n,a=t[1],o=void 0===a?[]:a,s=t[2],c=void 0===s?void 0:s,l=fC(fC({},i),u);return function(e,t,n,r){void 0===n&&(n=[]);var i,a="function"===typeof t?bC(t):[t,n,r],o=a[0],u=a[1],s=a[2];if(function(e){return"function"===typeof e}(e))i=function(){return mC(e())};else{var c=mC(e);i=function(){return c}}function l(e,t){void 0===e&&(e=i());var n=rC([o[t.type]],u.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===n.filter((function(e){return!!e})).length&&(n=[s]),n.reduce((function(e,n){if(n){var r;if(VE(e))return void 0===(r=n(e,t))?e:r;if(qE(e))return zT(e,(function(e){return n(e,t)}));if(void 0===(r=n(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e}),e)}return l.getInitialState=i,l}(r,(function(e){for(var t in l)e.addCase(t,l[t]);for(var n=0,r=o;n<r.length;n++){var i=r[n];e.addMatcher(i.matcher,i.reducer)}c&&e.addDefaultCase(c)}))}return a.forEach((function(e){var n,r,a=i[e],c=t+"/"+e;"reducer"in a?(n=a.reducer,r=a.prepare):n=a,o[e]=n,u[c]=n,s[e]=r?kC(c,r):kC(c)})),{name:t,reducer:function(e,t){return n||(n=c()),n(e,t)},actions:s,caseReducers:o,getInitialState:function(){return n||(n=c()),n.getInitialState()}}}var xC=function(e){void 0===e&&(e=21);for(var t="",n=e;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},_C=["name","message","stack","code"],SC=function(e,t){this.payload=e,this.meta=t},IC=function(e,t){this.payload=e,this.meta=t},EC=function(e){if("object"===typeof e&&null!==e){for(var t={},n=0,r=_C;n<r.length;n++){var i=r[n];"string"===typeof e[i]&&(t[i]=e[i])}return t}return{message:String(e)}},TC=function(){function e(e,t,n){var r=kC(e+"/fulfilled",(function(e,t,n,r){return{payload:e,meta:hC(fC({},r||{}),{arg:n,requestId:t,requestStatus:"fulfilled"})}})),i=kC(e+"/pending",(function(e,t,n){return{payload:void 0,meta:hC(fC({},n||{}),{arg:t,requestId:e,requestStatus:"pending"})}})),a=kC(e+"/rejected",(function(e,t,r,i,a){return{payload:i,error:(n&&n.serializeError||EC)(e||"Rejected"),meta:hC(fC({},a||{}),{arg:r,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}})),o="undefined"!==typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){0},e}();return Object.assign((function(e){return function(u,s,c){var l,f=(null==n?void 0:n.idGenerator)?n.idGenerator(e):xC(),h=new o;function d(e){l=e,h.abort()}var p=function(){return dC(this,null,(function(){var o,p,v,y,m,g;return nC(this,(function(k){switch(k.label){case 0:return k.trys.push([0,4,,5]),y=null==(o=null==n?void 0:n.condition)?void 0:o.call(n,e,{getState:s,extra:c}),null===(b=y)||"object"!==typeof b||"function"!==typeof b.then?[3,2]:[4,y];case 1:y=k.sent(),k.label=2;case 2:if(!1===y||h.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return!0,m=new Promise((function(e,t){return h.signal.addEventListener("abort",(function(){return t({name:"AbortError",message:l||"Aborted"})}))})),u(i(f,e,null==(p=null==n?void 0:n.getPendingMeta)?void 0:p.call(n,{requestId:f,arg:e},{getState:s,extra:c}))),[4,Promise.race([m,Promise.resolve(t(e,{dispatch:u,getState:s,extra:c,requestId:f,signal:h.signal,abort:d,rejectWithValue:function(e,t){return new SC(e,t)},fulfillWithValue:function(e,t){return new IC(e,t)}})).then((function(t){if(t instanceof SC)throw t;return t instanceof IC?r(t.payload,f,e,t.meta):r(t,f,e)}))])];case 3:return v=k.sent(),[3,5];case 4:return g=k.sent(),v=g instanceof SC?a(null,f,e,g.payload,g.meta):a(g,f,e),[3,5];case 5:return n&&!n.dispatchConditionRejection&&a.match(v)&&v.meta.condition||u(v),[2,v]}var b}))}))}();return Object.assign(p,{abort:d,requestId:f,arg:e,unwrap:function(){return p.then(CC)}})}}),{pending:i,rejected:a,fulfilled:r,typePrefix:e})}return e.withTypes=function(){return e},e}();function CC(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}var AC=function(e,t){return function(e){return e&&"function"===typeof e.match}(e)?e.match(t):e(t)};function NC(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.some((function(e){return AC(e,t)}))}}function DC(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.every((function(e){return AC(e,t)}))}}function OC(e,t){if(!e||!e.meta)return!1;var n="string"===typeof e.meta.requestId,r=t.indexOf(e.meta.requestStatus)>-1;return n&&r}function RC(e){return"function"===typeof e[0]&&"pending"in e[0]&&"fulfilled"in e[0]&&"rejected"in e[0]}function PC(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?function(e){return OC(e,["pending"])}:RC(e)?function(t){var n=e.map((function(e){return e.pending}));return NC.apply(void 0,n)(t)}:PC()(e[0])}function LC(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?function(e){return OC(e,["rejected"])}:RC(e)?function(t){var n=e.map((function(e){return e.rejected}));return NC.apply(void 0,n)(t)}:LC()(e[0])}function MC(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=function(e){return e&&e.meta&&e.meta.rejectedWithValue};return 0===e.length||RC(e)?function(t){return DC(LC.apply(void 0,e),n)(t)}:MC()(e[0])}function FC(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?function(e){return OC(e,["fulfilled"])}:RC(e)?function(t){var n=e.map((function(e){return e.fulfilled}));return NC.apply(void 0,n)(t)}:FC()(e[0])}function jC(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?function(e){return OC(e,["pending","fulfilled","rejected"])}:RC(e)?function(t){for(var n=[],r=0,i=e;r<i.length;r++){var a=i[r];n.push(a.pending,a.rejected,a.fulfilled)}return NC.apply(void 0,n)(t)}:jC()(e[0])}Object.assign;var UC="listenerMiddleware";kC(UC+"/add"),kC(UC+"/removeAll"),kC(UC+"/remove");var VC,qC="RTK_autoBatch",zC=function(){return function(e){var t;return{payload:e,meta:(t={},t[qC]=!0,t)}}},BC=("function"===typeof queueMicrotask&&queueMicrotask.bind("undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:globalThis),function(e){return function(t){setTimeout(t,e)}});"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:BC(10);bT();var KC=wC({name:"user",initialState:{user:{email:"",uid:"",userDocId:""}},reducers:{login:function(e,t){e.user=t.payload},logout:function(e){e.user={email:"",uid:"",userDocId:""}}}}),GC=KC.actions,WC=GC.login,QC=(GC.logout,KC.reducer);var HC,$C=function(e){var n=e.mode,r=e.onClose;return(0,t.useEffect)((function(){function e(e){"Escape"===e.code&&(r(),console.log("escape pressed"))}return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[r]),(0,hE.jsxs)("div",{className:"goalForm editGoalForm modal modalOverlay",onClick:function(t){return function(t){t.stopPropagation(),t.preventDefault(),t.currentTarget.classList.contains("modalOverlay")&&e.onClose()}(t)},children:[(0,hE.jsx)("button",{className:"editGoalForm__close modalOverlay__closeButton",onClick:function(){e.onClose()},children:(0,hE.jsx)("span",{className:"modalOverlay__closeIcon"})}),(0,hE.jsx)("div",{className:"modalOverlay__main",onClick:function(e){e.stopPropagation()},children:(0,hE.jsxs)("div",{className:"modalOverlay__content form",children:[(0,hE.jsx)("h2",{className:"modalOverlay__h2",children:"add"===n?"Add Goal":"Edit Goal"}),e.children]})})]})},XC=wC({name:"goalsSlice",initialState:{goals:[{title:"my first goal",score:{max:5,min:0,actual:0},id:"first"},{title:"my second goal",score:{max:3,min:0,actual:1},id:"second"}]},reducers:{addGoal:function(e,t){e.goals.push(t.payload)},updateGoal:function(e,t){var n=e.goals.find((function(e){return e.id===t.payload.id}));n&&(n.title=t.payload.title,n.score.max=t.payload.score.max)},incrementScore:function(e,t){var n=e.goals.find((function(e){return e.id===t.payload.id}));n&&(n.score.actual+=1)},decrementScore:function(e,t){var n=e.goals.find((function(e){return e.id===t.payload.id}));n&&(n.score.actual-=1)},deleteGoal:function(e,t){var n=e.goals.find((function(e){return e.id===t.payload.id}));n&&(e.goals=e.goals.filter((function(e){return e.id!==n.id})))},resetGoal:function(e,t){var n=e.goals.find((function(e){return e.id===t.payload.id}));n&&(n.score.actual=0)},syncWithBackend:function(e,t){e.goals=t.payload}}}),YC=XC.actions,JC=YC.addGoal,ZC=YC.updateGoal,eA=YC.deleteGoal,tA=YC.resetGoal,nA=YC.incrementScore,rA=YC.decrementScore,iA=YC.syncWithBackend,aA=XC.reducer,oA={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},uA=new Uint8Array(16);function sA(){if(!HC&&!(HC="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return HC(uA)}for(var cA=[],lA=0;lA<256;++lA)cA.push((lA+256).toString(16).slice(1));function fA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(cA[e[t+0]]+cA[e[t+1]]+cA[e[t+2]]+cA[e[t+3]]+"-"+cA[e[t+4]]+cA[e[t+5]]+"-"+cA[e[t+6]]+cA[e[t+7]]+"-"+cA[e[t+8]]+cA[e[t+9]]+"-"+cA[e[t+10]]+cA[e[t+11]]+cA[e[t+12]]+cA[e[t+13]]+cA[e[t+14]]+cA[e[t+15]]).toLowerCase()}var hA=function(e,t,n){if(oA.randomUUID&&!t&&!e)return oA.randomUUID();var r=(e=e||{}).random||(e.rng||sA)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return fA(r)};var dA=function(e){var n=c((0,t.useState)(e.titleToEdit?e.titleToEdit:""),2),r=n[0],i=n[1],a=c((0,t.useState)(e.maxScoreToEdit?e.maxScoreToEdit:""),2),o=a[0],u=a[1],s=ME();return(0,hE.jsxs)("form",{onSubmit:function(t){return function(t){t.preventDefault();var n={title:r,score:{max:parseInt(o),min:0,actual:0},id:e.goalToEditId?e.goalToEditId:hA()};e.mode&&("add"===e.mode?s(JC(n)):"edit"===e.mode&&s(ZC(n))),e.onGoalFormSubmit&&e.onGoalFormSubmit()}(t)},children:[(0,hE.jsx)("div",{className:"goalForm__name",children:(0,hE.jsxs)("label",{htmlFor:"nameInput",className:"goalForm__nameLabel",children:["Goal title:",(0,hE.jsx)("input",{type:"text",name:"name",required:!0,id:"nameInput",value:r,onChange:function(e){i(e.target.value)}})]})}),(0,hE.jsx)("div",{className:"goalForm__score",children:(0,hE.jsxs)("label",{htmlFor:"scoreInput",children:["times to meet per week",(0,hE.jsx)("input",{type:"number",required:!0,name:"score",min:"0",id:"scoreInput",value:o,onChange:function(e){u(e.target.value)}})]})}),(0,hE.jsx)("button",{type:"submit",value:"Submit",children:"Submit"})]})};var pA=function(e){var n=e.goal,r=(e.currentUser,c((0,t.useState)(!1),2)),i=r[0],a=r[1],o=n.score.actual===n.score.max,u="goal ".concat(n&&o?"goal--isComplete":""),s=ME();return(0,hE.jsxs)("div",{"data-testid":"goalTest",className:u,children:[(0,hE.jsx)("p",{className:"goal__title",children:n.title}),(0,hE.jsxs)("div",{className:"score",children:[(0,hE.jsxs)("div",{className:"score__numbers",children:[(0,hE.jsx)("span",{className:"score__actual",children:n.score.actual}),(0,hE.jsx)("span",{className:"score__separator",children:"/"}),(0,hE.jsx)("span",{className:"score__toReach",children:n.score.max})]}),(0,hE.jsxs)("div",{className:"score__ctas",children:[(0,hE.jsx)("button",{title:"decrease score by 1",className:"score__button score__button--decrease",onClick:function(){return s(rA(n))},disabled:n.score.actual===n.score.min||o,children:(0,hE.jsx)("span",{className:"icon score__buttonIcon score__buttonIcon--decreaseScore"})}),(0,hE.jsx)("button",{title:"increase score by 1",className:"score__button score__button--increase",onClick:function(){return s(nA(n))},disabled:n.score.actual===n.score.max||o,children:(0,hE.jsx)("span",{className:"icon score__buttonIcon score__buttonIcon--increaseScore"})})]}),(0,hE.jsxs)("div",{className:"score__otherActionsWrapper",children:[(0,hE.jsx)("button",{title:"edit goal",className:"score__button score__button--edit",disabled:o,onClick:function(){a(!0)},children:(0,hE.jsx)("span",{className:"icon score__buttonIcon score__buttonIcon--edit"})}),(0,hE.jsx)("button",{title:"delete goal",className:"score__button score__button--delete",onClick:function(){return s(eA(n))},children:(0,hE.jsx)("span",{className:"icon score__buttonIcon score__buttonIcon--delete"})}),(0,hE.jsx)("button",{title:"reset goal score",className:"score__button score__button--reset",disabled:0===n.score.actual,onClick:function(){return s(tA(n))},children:(0,hE.jsx)("span",{className:"icon score__buttonIcon score__buttonIcon--reset"})}),i&&(0,hE.jsx)($C,{mode:"edit",onClose:function(){return a(!1)},children:(0,hE.jsx)(dA,{goalToEditId:n.id,titleToEdit:n.title,maxScoreToEdit:n.score.max,mode:"edit",onGoalFormSubmit:function(){return a(!1)}})})]})]}),(0,hE.jsx)("hr",{})]})};var vA=function(){var e=c((0,t.useState)(!1),2),n=e[0],r=e[1];return(0,hE.jsxs)("div",{className:"newGoalButton newGoalButton__wrapper",children:[(0,hE.jsx)("button",{className:"newGoalButton__button cta",onClick:function(){return r(!0)},children:"+"}),n&&(0,hE.jsx)($C,{mode:"add",onClose:function(){return r(!1)},children:(0,hE.jsx)(dA,{mode:"add",onGoalFormSubmit:function(){return r(!1)}})})]})},yA=wC({name:"goalFormSlice",initialState:{show:!1,goalTitle:"",goalScore:""},reducers:{showForm:function(e){e.show=!0},hideForm:function(e){e.show=!1}}}),mA=yA.actions,gA=(mA.showForm,mA.hideForm,yA.reducer),kA="NOT_FOUND";var bA=function(e,t){return e===t};function wA(e,t){var n="object"===typeof t?t:{equalityCheck:t},r=n.equalityCheck,i=void 0===r?bA:r,a=n.maxSize,o=void 0===a?1:a,u=n.resultEqualityCheck,s=function(e){return function(t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,i=0;i<r;i++)if(!e(t[i],n[i]))return!1;return!0}}(i),c=1===o?function(e){var t;return{get:function(n){return t&&e(t.key,n)?t.value:kA},put:function(e,n){t={key:e,value:n}},getEntries:function(){return t?[t]:[]},clear:function(){t=void 0}}}(s):function(e,t){var n=[];function r(e){var r=n.findIndex((function(n){return t(e,n.key)}));if(r>-1){var i=n[r];return r>0&&(n.splice(r,1),n.unshift(i)),i.value}return kA}return{get:r,put:function(t,i){r(t)===kA&&(n.unshift({key:t,value:i}),n.length>e&&n.pop())},getEntries:function(){return n},clear:function(){n=[]}}}(o,s);function l(){var t=c.get(arguments);if(t===kA){if(t=e.apply(null,arguments),u){var n=c.getEntries().find((function(e){return u(e.value,t)}));n&&(t=n.value)}c.put(arguments,t)}return t}return l.clearCache=function(){return c.clear()},l}function xA(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var a,o=0,u={memoizeOptions:void 0},s=r.pop();if("object"===typeof s&&(u=s,s=r.pop()),"function"!==typeof s)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof s+"]");var c=u.memoizeOptions,l=void 0===c?n:c,f=Array.isArray(l)?l:[l],h=function(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"===typeof e}))){var n=t.map((function(e){return"function"===typeof e?"function "+(e.name||"unnamed")+"()":typeof e})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+n+"]")}return t}(r),d=e.apply(void 0,[function(){return o++,s.apply(null,arguments)}].concat(f)),p=e((function(){for(var e=[],t=h.length,n=0;n<t;n++)e.push(h[n].apply(null,arguments));return a=d.apply(null,e)}));return Object.assign(p,{resultFunc:s,memoizedResultFunc:d,dependencies:h,lastResult:function(){return a},recomputations:function(){return o},resetRecomputations:function(){return o=0}}),p}}var _A,SA,IA=xA(wA),EA=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(u){a=[6,u],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},TA=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},CA=Object.defineProperty,AA=Object.defineProperties,NA=Object.getOwnPropertyDescriptors,DA=Object.getOwnPropertySymbols,OA=Object.prototype.hasOwnProperty,RA=Object.prototype.propertyIsEnumerable,PA=function(e,t,n){return t in e?CA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},LA=function(e,t){for(var n in t||(t={}))OA.call(t,n)&&PA(e,n,t[n]);if(DA)for(var r=0,i=DA(t);r<i.length;r++){n=i[r];RA.call(t,n)&&PA(e,n,t[n])}return e},MA=function(e,t){return AA(e,NA(t))},FA=function(e,t,n){return new Promise((function(r,i){var a=function(e){try{u(n.next(e))}catch(t){i(t)}},o=function(e){try{u(n.throw(e))}catch(t){i(t)}},u=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(a,o)};u((n=n.apply(e,t)).next())}))};(SA=_A||(_A={})).uninitialized="uninitialized",SA.pending="pending",SA.fulfilled="fulfilled",SA.rejected="rejected";var jA=function(e){return[].concat.apply([],e)};var UA=vC;function VA(e,t){if(e===t||!(UA(e)&&UA(t)||Array.isArray(e)&&Array.isArray(t)))return t;for(var n=Object.keys(t),r=Object.keys(e),i=n.length===r.length,a=Array.isArray(t)?[]:{},o=0,u=n;o<u.length;o++){var s=u[o];a[s]=VA(e[s],t[s]),i&&(i=e[s]===a[s])}return i?e:a}var qA=function(e,t){void 0===t&&(t=void 0),this.value=e,this.meta=t};var zA,BA,KA=kC("__rtkq/focused"),GA=kC("__rtkq/unfocused"),WA=kC("__rtkq/online"),QA=kC("__rtkq/offline");function HA(e){return e.type===zA.query}function $A(e,t,n,r,i,a){return function(e){return"function"===typeof e}(e)?e(t,n,r,i).map(XA).map(a):Array.isArray(e)?e.map(XA).map(a):[]}function XA(e){return"string"===typeof e?{type:e}:e}function YA(e){return null!=e}(BA=zA||(zA={})).query="query",BA.mutation="mutation";var JA=Symbol("forceQueryFn"),ZA=function(e){return"function"===typeof e[JA]};function eN(e){return e}function tN(e,t,n,r){return $A(n[e.meta.arg.endpointName][t],FC(e)?e.payload:void 0,MC(e)?e.payload:void 0,e.meta.arg.originalArgs,"baseQueryMeta"in e.meta?e.meta.baseQueryMeta:void 0,r)}function nN(e,t,n){var r=e[t];r&&n(r)}function rN(e){var t;return null!=(t="arg"in e?e.arg.fixedCacheKey:e.fixedCacheKey)?t:e.requestId}function iN(e,t,n){var r=e[rN(t)];r&&n(r)}var aN={};function oN(e){var t=e.reducerPath,n=e.queryThunk,r=e.mutationThunk,i=e.context,a=i.endpointDefinitions,o=i.apiUid,u=i.extractRehydrationInfo,s=i.hasRehydrationInfo,c=e.assertTagType,l=e.config,f=kC(t+"/resetApiState"),h=wC({name:t+"/queries",initialState:aN,reducers:{removeQueryResult:{reducer:function(e,t){delete e[t.payload.queryCacheKey]},prepare:zC()},queryResultPatched:function(e,t){var n=t.payload,r=n.queryCacheKey,i=n.patches;nN(e,r,(function(e){e.data=qT(e.data,i.concat())}))}},extraReducers:function(e){e.addCase(n.pending,(function(e,t){var n,r=t.meta,i=t.meta.arg,a=ZA(i);(i.subscribe||a)&&(null!=e[n=i.queryCacheKey]||(e[n]={status:_A.uninitialized,endpointName:i.endpointName})),nN(e,i.queryCacheKey,(function(e){e.status=_A.pending,e.requestId=a&&e.requestId?e.requestId:r.requestId,void 0!==i.originalArgs&&(e.originalArgs=i.originalArgs),e.startedTimeStamp=r.startedTimeStamp}))})).addCase(n.fulfilled,(function(e,t){var n=t.meta,r=t.payload;nN(e,n.arg.queryCacheKey,(function(e){var t;if(e.requestId===n.requestId||ZA(n.arg)){var i=a[n.arg.endpointName].merge;if(e.status=_A.fulfilled,i)if(void 0!==e.data){var o=n.fulfilledTimeStamp,u=n.arg,s=n.baseQueryMeta,c=n.requestId,l=zT(e.data,(function(e){return i(e,r,{arg:u.originalArgs,baseQueryMeta:s,fulfilledTimeStamp:o,requestId:c})}));e.data=l}else e.data=r;else e.data=null==(t=a[n.arg.endpointName].structuralSharing)||t?VA(e.data,r):r;delete e.error,e.fulfilledTimeStamp=n.fulfilledTimeStamp}}))})).addCase(n.rejected,(function(e,t){var n=t.meta,r=n.condition,i=n.arg,a=n.requestId,o=t.error,u=t.payload;nN(e,i.queryCacheKey,(function(e){if(r);else{if(e.requestId!==a)return;e.status=_A.rejected,e.error=null!=u?u:o}}))})).addMatcher(s,(function(e,t){for(var n=u(t).queries,r=0,i=Object.entries(n);r<i.length;r++){var a=i[r],o=a[0],s=a[1];(null==s?void 0:s.status)!==_A.fulfilled&&(null==s?void 0:s.status)!==_A.rejected||(e[o]=s)}}))}}),d=wC({name:t+"/mutations",initialState:aN,reducers:{removeMutationResult:{reducer:function(e,t){var n=rN(t.payload);n in e&&delete e[n]},prepare:zC()}},extraReducers:function(e){e.addCase(r.pending,(function(e,t){var n=t.meta,r=t.meta,i=r.requestId,a=r.arg,o=r.startedTimeStamp;a.track&&(e[rN(n)]={requestId:i,status:_A.pending,endpointName:a.endpointName,startedTimeStamp:o})})).addCase(r.fulfilled,(function(e,t){var n=t.payload,r=t.meta;r.arg.track&&iN(e,r,(function(e){e.requestId===r.requestId&&(e.status=_A.fulfilled,e.data=n,e.fulfilledTimeStamp=r.fulfilledTimeStamp)}))})).addCase(r.rejected,(function(e,t){var n=t.payload,r=t.error,i=t.meta;i.arg.track&&iN(e,i,(function(e){e.requestId===i.requestId&&(e.status=_A.rejected,e.error=null!=n?n:r)}))})).addMatcher(s,(function(e,t){for(var n=u(t).mutations,r=0,i=Object.entries(n);r<i.length;r++){var a=i[r],o=a[0],s=a[1];(null==s?void 0:s.status)!==_A.fulfilled&&(null==s?void 0:s.status)!==_A.rejected||o===(null==s?void 0:s.requestId)||(e[o]=s)}}))}}),p=wC({name:t+"/invalidation",initialState:aN,reducers:{},extraReducers:function(e){e.addCase(h.actions.removeQueryResult,(function(e,t){for(var n=t.payload.queryCacheKey,r=0,i=Object.values(e);r<i.length;r++)for(var a=i[r],o=0,u=Object.values(a);o<u.length;o++){var s=u[o],c=s.indexOf(n);-1!==c&&s.splice(c,1)}})).addMatcher(s,(function(e,t){for(var n,r,i,a,o=u(t).provided,s=0,c=Object.entries(o);s<c.length;s++)for(var l=c[s],f=l[0],h=l[1],d=0,p=Object.entries(h);d<p.length;d++)for(var v=p[d],y=v[0],m=v[1],g=null!=(a=(r=null!=(n=e[f])?n:e[f]={})[i=y||"__internal_without_id"])?a:r[i]=[],k=0,b=m;k<b.length;k++){var w=b[k];g.includes(w)||g.push(w)}})).addMatcher(NC(FC(n),MC(n)),(function(e,t){for(var n,r,i,o,u=tN(t,"providesTags",a,c),s=t.meta.arg.queryCacheKey,l=0,f=Object.values(e);l<f.length;l++)for(var h=f[l],d=0,p=Object.values(h);d<p.length;d++){var v=p[d],y=v.indexOf(s);-1!==y&&v.splice(y,1)}for(var m=0,g=u;m<g.length;m++){var k=g[m],b=k.type,w=k.id,x=null!=(o=(r=null!=(n=e[b])?n:e[b]={})[i=w||"__internal_without_id"])?o:r[i]=[];x.includes(s)||x.push(s)}}))}}),v=wC({name:t+"/subscriptions",initialState:aN,reducers:{updateSubscriptionOptions:function(e,t){},unsubscribeQueryResult:function(e,t){},internal_probeSubscription:function(e,t){}}}),y=wC({name:t+"/internalSubscriptions",initialState:aN,reducers:{subscriptionsUpdated:function(e,t){return qT(e,t.payload)}}}),m=wC({name:t+"/config",initialState:LA({online:"undefined"===typeof navigator||void 0===navigator.onLine||navigator.onLine,focused:"undefined"===typeof document||"hidden"!==document.visibilityState,middlewareRegistered:!1},l),reducers:{middlewareRegistered:function(e,t){var n=t.payload;e.middlewareRegistered="conflict"!==e.middlewareRegistered&&o===n||"conflict"}},extraReducers:function(e){e.addCase(WA,(function(e){e.online=!0})).addCase(QA,(function(e){e.online=!1})).addCase(KA,(function(e){e.focused=!0})).addCase(GA,(function(e){e.focused=!1})).addMatcher(s,(function(e){return LA({},e)}))}}),g=$T({queries:h.reducer,mutations:d.reducer,provided:p.reducer,subscriptions:y.reducer,config:m.reducer});return{reducer:function(e,t){return g(f.match(t)?void 0:e,t)},actions:MA(LA(LA(LA(LA(LA({},m.actions),h.actions),v.actions),y.actions),d.actions),{unsubscribeMutationResult:d.actions.removeMutationResult,resetApiState:f})}}var uN=Symbol.for("RTKQ/skipToken"),sN={status:_A.uninitialized},cN=zT(sN,(function(){})),lN=zT(sN,(function(){}));function fN(e){var t=e.serializeQueryArgs,n=e.reducerPath,r=function(e){return cN},i=function(e){return lN};return{buildQuerySelector:function(e,n){return function(i){var u=t({queryArgs:i,endpointDefinition:n,endpointName:e}),s=i===uN?r:function(e){var t,n,r;return null!=(r=null==(n=null==(t=o(e))?void 0:t.queries)?void 0:n[u])?r:cN};return IA(s,a)}},buildMutationSelector:function(){return function(e){var t,n,r=(n="object"===typeof e?null!=(t=rN(e))?t:uN:e)===uN?i:function(e){var t,r,i;return null!=(i=null==(r=null==(t=o(e))?void 0:t.mutations)?void 0:r[n])?i:lN};return IA(r,a)}},selectInvalidatedBy:function(e,t){for(var r,i=e[n],a=new Set,o=0,u=t.map(XA);o<u.length;o++){var s=u[o],c=i.provided[s.type];if(c)for(var l=0,f=null!=(r=void 0!==s.id?c[s.id]:jA(Object.values(c)))?r:[];l<f.length;l++){var h=f[l];a.add(h)}}return jA(Array.from(a.values()).map((function(e){var t=i.queries[e];return t?[{queryCacheKey:e,endpointName:t.endpointName,originalArgs:t.originalArgs}]:[]})))}};function a(e){return LA(LA({},e),{status:t=e.status,isUninitialized:t===_A.uninitialized,isLoading:t===_A.pending,isSuccess:t===_A.fulfilled,isError:t===_A.rejected});var t}function o(e){return e[n]}}var hN=WeakMap?new WeakMap:void 0,dN=function(e){var t=e.endpointName,n=e.queryArgs,r="",i=null==hN?void 0:hN.get(n);if("string"===typeof i)r=i;else{var a=JSON.stringify(n,(function(e,t){return vC(t)?Object.keys(t).sort().reduce((function(e,n){return e[n]=t[n],e}),{}):t}));vC(n)&&(null==hN||hN.set(n,a)),r=a}return t+"("+r+")"};function pN(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){var n=wA((function(e){var n,r;return null==(r=t.extractRehydrationInfo)?void 0:r.call(t,e,{reducerPath:null!=(n=t.reducerPath)?n:"api"})})),r=MA(LA({reducerPath:"api",keepUnusedDataFor:60,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1},t),{extractRehydrationInfo:n,serializeQueryArgs:function(e){var n=dN;if("serializeQueryArgs"in e.endpointDefinition){var r=e.endpointDefinition.serializeQueryArgs;n=function(e){var t=r(e);return"string"===typeof t?t:dN(MA(LA({},e),{queryArgs:t}))}}else t.serializeQueryArgs&&(n=t.serializeQueryArgs);return n(e)},tagTypes:TA([],t.tagTypes||[])}),i={endpointDefinitions:{},batch:function(e){e()},apiUid:xC(),extractRehydrationInfo:n,hasRehydrationInfo:wA((function(e){return null!=n(e)}))},a={injectEndpoints:function(e){for(var t=e.endpoints({query:function(e){return MA(LA({},e),{type:zA.query})},mutation:function(e){return MA(LA({},e),{type:zA.mutation})}}),n=0,r=Object.entries(t);n<r.length;n++){var u=r[n],s=u[0],c=u[1];if(e.overrideExisting||!(s in i.endpointDefinitions)){i.endpointDefinitions[s]=c;for(var l=0,f=o;l<f.length;l++){f[l].injectEndpoint(s,c)}}}return a},enhanceEndpoints:function(e){var t=e.addTagTypes,n=e.endpoints;if(t)for(var o=0,u=t;o<u.length;o++){var s=u[o];r.tagTypes.includes(s)||r.tagTypes.push(s)}if(n)for(var c=0,l=Object.entries(n);c<l.length;c++){var f=l[c],h=f[0],d=f[1];"function"===typeof d?d(i.endpointDefinitions[h]):Object.assign(i.endpointDefinitions[h]||{},d)}return a}},o=e.map((function(e){return e.init(a,r,i)}));return a.injectEndpoints({endpoints:t.endpoints})}}var vN,yN=function(e){var t=e.reducerPath,n=e.api,r=e.context,i=e.internalState,a=n.internalActions,o=a.removeQueryResult,u=a.unsubscribeQueryResult;function s(e){var t=i.currentSubscriptions[e];return!!t&&!function(e){for(var t in e)return!1;return!0}(t)}var c={};function l(e,t,n,i){var a,u=r.endpointDefinitions[t],l=null!=(a=null==u?void 0:u.keepUnusedDataFor)?a:i.keepUnusedDataFor;if(l!==1/0){var f=Math.max(0,Math.min(l,2147482.647));if(!s(e)){var h=c[e];h&&clearTimeout(h),c[e]=setTimeout((function(){s(e)||n.dispatch(o({queryCacheKey:e})),delete c[e]}),1e3*f)}}}return function(e,i,a){var o;if(u.match(e)){var s=i.getState()[t];l(b=e.payload.queryCacheKey,null==(o=s.queries[b])?void 0:o.endpointName,i,s.config)}if(n.util.resetApiState.match(e))for(var f=0,h=Object.entries(c);f<h.length;f++){var d=h[f],p=d[0],v=d[1];v&&clearTimeout(v),delete c[p]}if(r.hasRehydrationInfo(e)){s=i.getState()[t];for(var y=r.extractRehydrationInfo(e).queries,m=0,g=Object.entries(y);m<g.length;m++){var k=g[m],b=k[0],w=k[1];l(b,null==w?void 0:w.endpointName,i,s.config)}}}},mN=function(e){var t=e.reducerPath,n=e.context,r=e.context.endpointDefinitions,i=e.mutationThunk,a=e.api,o=e.assertTagType,u=e.refetchQuery,s=a.internalActions.removeQueryResult,c=NC(FC(i),MC(i));function l(e,r){var i=r.getState(),o=i[t],c=a.util.selectInvalidatedBy(i,e);n.batch((function(){for(var e,t=0,n=Array.from(c.values());t<n.length;t++){var i=n[t].queryCacheKey,a=o.queries[i],l=null!=(e=o.subscriptions[i])?e:{};a&&(0===Object.keys(l).length?r.dispatch(s({queryCacheKey:i})):a.status!==_A.uninitialized&&r.dispatch(u(a,i)))}}))}return function(e,t){c(e)&&l(tN(e,"invalidatesTags",r,o),t),a.util.invalidateTags.match(e)&&l($A(e.payload,void 0,void 0,void 0,void 0,o),t)}},gN=function(e){var t=e.reducerPath,n=e.queryThunk,r=e.api,i=e.refetchQuery,a=e.internalState,o={};function u(e,n){var r=e.queryCacheKey,u=n.getState()[t].queries[r],s=a.currentSubscriptions[r];if(u&&u.status!==_A.uninitialized){var c=l(s);if(Number.isFinite(c)){var f=o[r];(null==f?void 0:f.timeout)&&(clearTimeout(f.timeout),f.timeout=void 0);var h=Date.now()+c,d=o[r]={nextPollTimestamp:h,pollingInterval:c,timeout:setTimeout((function(){d.timeout=void 0,n.dispatch(i(u,r))}),c)}}}}function s(e,n){var r=e.queryCacheKey,i=n.getState()[t].queries[r],s=a.currentSubscriptions[r];if(i&&i.status!==_A.uninitialized){var f=l(s);if(Number.isFinite(f)){var h=o[r],d=Date.now()+f;(!h||d<h.nextPollTimestamp)&&u({queryCacheKey:r},n)}else c(r)}}function c(e){var t=o[e];(null==t?void 0:t.timeout)&&clearTimeout(t.timeout),delete o[e]}function l(e){void 0===e&&(e={});var t=Number.POSITIVE_INFINITY;for(var n in e)e[n].pollingInterval&&(t=Math.min(e[n].pollingInterval,t));return t}return function(e,t){(r.internalActions.updateSubscriptionOptions.match(e)||r.internalActions.unsubscribeQueryResult.match(e))&&s(e.payload,t),(n.pending.match(e)||n.rejected.match(e)&&e.meta.condition)&&s(e.meta.arg,t),(n.fulfilled.match(e)||n.rejected.match(e)&&!e.meta.condition)&&u(e.meta.arg,t),r.util.resetApiState.match(e)&&function(){for(var e=0,t=Object.keys(o);e<t.length;e++){c(t[e])}}()}},kN=new Error("Promise never resolved before cacheEntryRemoved."),bN=function(e){var t=e.api,n=e.reducerPath,r=e.context,i=e.queryThunk,a=e.mutationThunk,o=(e.internalState,jC(i)),u=jC(a),s=FC(i,a),c={};function l(e,n,i,a,o){var u=r.endpointDefinitions[e],s=null==u?void 0:u.onCacheEntryAdded;if(s){var l={},f=new Promise((function(e){l.cacheEntryRemoved=e})),h=Promise.race([new Promise((function(e){l.valueResolved=e})),f.then((function(){throw kN}))]);h.catch((function(){})),c[i]=l;var d=t.endpoints[e].select(u.type===zA.query?n:i),p=a.dispatch((function(e,t,n){return n})),v=MA(LA({},a),{getCacheEntry:function(){return d(a.getState())},requestId:o,extra:p,updateCachedData:u.type===zA.query?function(r){return a.dispatch(t.util.updateQueryData(e,n,r))}:void 0,cacheDataLoaded:h,cacheEntryRemoved:f}),y=s(n,v);Promise.resolve(y).catch((function(e){if(e!==kN)throw e}))}}return function(e,r,f){var h=function(e){return o(e)?e.meta.arg.queryCacheKey:u(e)?e.meta.requestId:t.internalActions.removeQueryResult.match(e)?e.payload.queryCacheKey:t.internalActions.removeMutationResult.match(e)?rN(e.payload):""}(e);if(i.pending.match(e)){var d=f[n].queries[h],p=r.getState()[n].queries[h];!d&&p&&l(e.meta.arg.endpointName,e.meta.arg.originalArgs,h,r,e.meta.requestId)}else if(a.pending.match(e)){(p=r.getState()[n].mutations[h])&&l(e.meta.arg.endpointName,e.meta.arg.originalArgs,h,r,e.meta.requestId)}else if(s(e)){(null==(k=c[h])?void 0:k.valueResolved)&&(k.valueResolved({data:e.payload,meta:e.meta.baseQueryMeta}),delete k.valueResolved)}else if(t.internalActions.removeQueryResult.match(e)||t.internalActions.removeMutationResult.match(e)){(k=c[h])&&(delete c[h],k.cacheEntryRemoved())}else if(t.util.resetApiState.match(e))for(var v=0,y=Object.entries(c);v<y.length;v++){var m=y[v],g=m[0],k=m[1];delete c[g],k.cacheEntryRemoved()}}},wN=function(e){var t=e.api,n=e.context,r=e.queryThunk,i=e.mutationThunk,a=PC(r,i),o=LC(r,i),u=FC(r,i),s={};return function(e,r){var i,c,l;if(a(e)){var f=e.meta,h=f.requestId,d=f.arg,p=d.endpointName,v=d.originalArgs,y=n.endpointDefinitions[p],m=null==y?void 0:y.onQueryStarted;if(m){var g={},k=new Promise((function(e,t){g.resolve=e,g.reject=t}));k.catch((function(){})),s[h]=g;var b=t.endpoints[p].select(y.type===zA.query?v:h),w=r.dispatch((function(e,t,n){return n})),x=MA(LA({},r),{getCacheEntry:function(){return b(r.getState())},requestId:h,extra:w,updateCachedData:y.type===zA.query?function(e){return r.dispatch(t.util.updateQueryData(p,v,e))}:void 0,queryFulfilled:k});m(v,x)}}else if(u(e)){var _=e.meta,S=(h=_.requestId,_.baseQueryMeta);null==(i=s[h])||i.resolve({data:e.payload,meta:S}),delete s[h]}else if(o(e)){var I=e.meta,E=(h=I.requestId,I.rejectedWithValue);S=I.baseQueryMeta;null==(l=s[h])||l.reject({error:null!=(c=e.payload)?c:e.error,isUnhandledError:!E,meta:S}),delete s[h]}}},xN=function(e){var t=e.api,n=e.context.apiUid;e.reducerPath;return function(e,r){t.util.resetApiState.match(e)&&r.dispatch(t.internalActions.middlewareRegistered(n))}},_N="function"===typeof queueMicrotask?queueMicrotask.bind("undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:globalThis):function(e){return(vN||(vN=Promise.resolve())).then(e).catch((function(e){return setTimeout((function(){throw e}),0)}))},SN=function(e){var t=e.api,n=e.queryThunk,r=e.internalState,i=t.reducerPath+"/subscriptions",a=null,o=!1,u=t.internalActions,s=u.updateSubscriptionOptions,c=u.unsubscribeQueryResult;return function(e,u){var l,f;if(a||(a=JSON.parse(JSON.stringify(r.currentSubscriptions))),t.internalActions.internal_probeSubscription.match(e)){var h=e.payload,d=h.queryCacheKey,p=h.requestId;return[!1,!!(null==(l=r.currentSubscriptions[d])?void 0:l[p])]}var v=function(e,r){var i,a,o,u,l,f,h,d,p;if(s.match(r)){var v=r.payload,y=v.queryCacheKey,m=v.requestId,g=v.options;return(null==(i=null==e?void 0:e[y])?void 0:i[m])&&(e[y][m]=g),!0}if(c.match(r)){var k=r.payload;return y=k.queryCacheKey,m=k.requestId,e[y]&&delete e[y][m],!0}if(t.internalActions.removeQueryResult.match(r))return delete e[r.payload.queryCacheKey],!0;if(n.pending.match(r)){var b=r.meta,w=b.arg;if(m=b.requestId,w.subscribe)return(x=null!=(o=e[a=w.queryCacheKey])?o:e[a]={})[m]=null!=(l=null!=(u=w.subscriptionOptions)?u:x[m])?l:{},!0}if(n.rejected.match(r)){var x,_=r.meta,S=_.condition;if(w=_.arg,m=_.requestId,S&&w.subscribe)return(x=null!=(h=e[f=w.queryCacheKey])?h:e[f]={})[m]=null!=(p=null!=(d=w.subscriptionOptions)?d:x[m])?p:{},!0}return!1}(r.currentSubscriptions,e);if(v){o||(_N((function(){var e=JSON.parse(JSON.stringify(r.currentSubscriptions)),n=VT(a,(function(){return e}))[1];u.next(t.internalActions.subscriptionsUpdated(n)),a=e,o=!1})),o=!0);var y=!!(null==(f=e.type)?void 0:f.startsWith(i)),m=n.rejected.match(e)&&e.meta.condition&&!!e.meta.arg.subscribe;return[!y&&!m,!1]}return[!0,!1]}};function IN(e){var t=e.reducerPath,n=e.queryThunk,r=e.api,i=e.context,a=i.apiUid,o={invalidateTags:kC(t+"/invalidateTags")},u=[xN,yN,mN,gN,bN,wN];return{middleware:function(n){var o=!1,c=MA(LA({},e),{internalState:{currentSubscriptions:{}},refetchQuery:s}),l=u.map((function(e){return e(c)})),f=SN(c),h=function(e){var t=e.reducerPath,n=e.context,r=e.api,i=e.refetchQuery,a=e.internalState,o=r.internalActions.removeQueryResult;function u(e,r){var u=e.getState()[t],s=u.queries,c=a.currentSubscriptions;n.batch((function(){for(var t=0,n=Object.keys(c);t<n.length;t++){var a=n[t],l=s[a],f=c[a];f&&l&&(Object.values(f).some((function(e){return!0===e[r]}))||Object.values(f).every((function(e){return void 0===e[r]}))&&u.config[r])&&(0===Object.keys(f).length?e.dispatch(o({queryCacheKey:a})):l.status!==_A.uninitialized&&e.dispatch(i(l,a)))}}))}return function(e,t){KA.match(e)&&u(t,"refetchOnFocus"),WA.match(e)&&u(t,"refetchOnReconnect")}}(c);return function(e){return function(u){o||(o=!0,n.dispatch(r.internalActions.middlewareRegistered(a)));var s,c=MA(LA({},n),{next:e}),d=n.getState(),p=f(u,c,d),v=p[0],y=p[1];if(s=v?e(u):y,n.getState()[t]&&(h(u,c,d),function(e){return!!e&&"string"===typeof e.type&&e.type.startsWith(t+"/")}(u)||i.hasRehydrationInfo(u)))for(var m=0,g=l;m<g.length;m++){(0,g[m])(u,c,d)}return s}}},actions:o};function s(e,t,r){return void 0===r&&(r={}),n(LA({type:"query",endpointName:e.endpointName,originalArgs:e.originalArgs,subscribe:!1,forceRefetch:!0,queryCacheKey:t},r))}}function EN(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];Object.assign.apply(Object,TA([e],t))}var TN=Symbol(),CN=function(){return{name:TN,init:function(e,t,n){var r=t.baseQuery,i=(t.tagTypes,t.reducerPath),a=t.serializeQueryArgs,o=t.keepUnusedDataFor,u=t.refetchOnMountOrArgChange,s=t.refetchOnFocus,c=t.refetchOnReconnect;wT();var l=function(e){return e};Object.assign(e,{reducerPath:i,endpoints:{},internalActions:{onOnline:WA,onOffline:QA,onFocus:KA,onFocusLost:GA},util:{}});var f=function(e){var t=this,n=e.reducerPath,r=e.baseQuery,i=e.context.endpointDefinitions,a=e.serializeQueryArgs,o=e.api,u=function(e,n){return FA(t,[e,n],(function(e,t){var n,a,o,u,c,l,f,h,d,p,v,y,m,g=t.signal,k=t.abort,b=t.rejectWithValue,w=t.fulfillWithValue,x=t.dispatch,_=t.getState,S=t.extra;return EA(this,(function(t){switch(t.label){case 0:n=i[e.endpointName],t.label=1;case 1:return t.trys.push([1,8,,13]),a=eN,o=void 0,u={signal:g,abort:k,dispatch:x,getState:_,extra:S,endpoint:e.endpointName,type:e.type,forced:"query"===e.type?s(e,_()):void 0},(c="query"===e.type?e[JA]:void 0)?(o=c(),[3,6]):[3,2];case 2:return n.query?[4,r(n.query(e.originalArgs),u,n.extraOptions)]:[3,4];case 3:return o=t.sent(),n.transformResponse&&(a=n.transformResponse),[3,6];case 4:return[4,n.queryFn(e.originalArgs,u,n.extraOptions,(function(e){return r(e,u,n.extraOptions)}))];case 5:o=t.sent(),t.label=6;case 6:if(o.error)throw new qA(o.error,o.meta);return l=w,[4,a(o.data,o.meta,e.originalArgs)];case 7:return[2,l.apply(void 0,[t.sent(),(y={fulfilledTimeStamp:Date.now(),baseQueryMeta:o.meta},y[qC]=!0,y)])];case 8:if(f=t.sent(),!((h=f)instanceof qA))return[3,12];d=eN,n.query&&n.transformErrorResponse&&(d=n.transformErrorResponse),t.label=9;case 9:return t.trys.push([9,11,,12]),p=b,[4,d(h.value,h.meta,e.originalArgs)];case 10:return[2,p.apply(void 0,[t.sent(),(m={baseQueryMeta:h.meta},m[qC]=!0,m)])];case 11:return v=t.sent(),h=v,[3,12];case 12:throw console.error(h),h;case 13:return[2]}}))}))};function s(e,t){var r,i,a,o,u=null==(i=null==(r=t[n])?void 0:r.queries)?void 0:i[e.queryCacheKey],s=null==(a=t[n])?void 0:a.config.refetchOnMountOrArgChange,c=null==u?void 0:u.fulfilledTimeStamp,l=null!=(o=e.forceRefetch)?o:e.subscribe&&s;return!!l&&(!0===l||(Number(new Date)-Number(c))/1e3>=l)}var c=TC(n+"/executeQuery",u,{getPendingMeta:function(){var e;return(e={startedTimeStamp:Date.now()})[qC]=!0,e},condition:function(e,t){var r,a,o,u=(0,t.getState)(),c=null==(a=null==(r=u[n])?void 0:r.queries)?void 0:a[e.queryCacheKey],l=null==c?void 0:c.fulfilledTimeStamp,f=e.originalArgs,h=null==c?void 0:c.originalArgs,d=i[e.endpointName];return!!ZA(e)||"pending"!==(null==c?void 0:c.status)&&(!!s(e,u)||!(!HA(d)||!(null==(o=null==d?void 0:d.forceRefetch)?void 0:o.call(d,{currentArg:f,previousArg:h,endpointState:c,state:u})))||!l)},dispatchConditionRejection:!0}),l=TC(n+"/executeMutation",u,{getPendingMeta:function(){var e;return(e={startedTimeStamp:Date.now()})[qC]=!0,e}});function f(e){return function(t){var n,r;return(null==(r=null==(n=null==t?void 0:t.meta)?void 0:n.arg)?void 0:r.endpointName)===e}}return{queryThunk:c,mutationThunk:l,prefetch:function(e,t,n){return function(r,i){var a=function(e){return"force"in e}(n)&&n.force,u=function(e){return"ifOlderThan"in e}(n)&&n.ifOlderThan,s=function(n){return void 0===n&&(n=!0),o.endpoints[e].initiate(t,{forceRefetch:n})},c=o.endpoints[e].select(t)(i());if(a)r(s());else if(u){var l=null==c?void 0:c.fulfilledTimeStamp;if(!l)return void r(s());(Number(new Date)-Number(new Date(l)))/1e3>=u&&r(s())}else r(s(!1))}},updateQueryData:function(e,t,n){return function(r,i){var a,u,s=o.endpoints[e].select(t)(i()),c={patches:[],inversePatches:[],undo:function(){return r(o.util.patchQueryData(e,t,c.inversePatches))}};if(s.status===_A.uninitialized)return c;if("data"in s)if(qE(s.data)){var l=VT(s.data,n),f=l[1],h=l[2];(a=c.patches).push.apply(a,f),(u=c.inversePatches).push.apply(u,h)}else{var d=n(s.data);c.patches.push({op:"replace",path:[],value:d}),c.inversePatches.push({op:"replace",path:[],value:s.data})}return r(o.util.patchQueryData(e,t,c.patches)),c}},upsertQueryData:function(e,t,n){return function(r){var i;return r(o.endpoints[e].initiate(t,((i={subscribe:!1,forceRefetch:!0})[JA]=function(){return{data:n}},i)))}},patchQueryData:function(e,t,n){return function(r){var u=i[e];r(o.internalActions.queryResultPatched({queryCacheKey:a({queryArgs:t,endpointDefinition:u,endpointName:e}),patches:n}))}},buildMatchThunkActions:function(e,t){return{matchPending:DC(PC(e),f(t)),matchFulfilled:DC(FC(e),f(t)),matchRejected:DC(LC(e),f(t))}}}}({baseQuery:r,reducerPath:i,context:n,api:e,serializeQueryArgs:a}),h=f.queryThunk,d=f.mutationThunk,p=f.patchQueryData,v=f.updateQueryData,y=f.upsertQueryData,m=f.prefetch,g=f.buildMatchThunkActions,k=oN({context:n,queryThunk:h,mutationThunk:d,reducerPath:i,assertTagType:l,config:{refetchOnFocus:s,refetchOnReconnect:c,refetchOnMountOrArgChange:u,keepUnusedDataFor:o,reducerPath:i}}),b=k.reducer,w=k.actions;EN(e.util,{patchQueryData:p,updateQueryData:v,upsertQueryData:y,prefetch:m,resetApiState:w.resetApiState}),EN(e.internalActions,w);var x=IN({reducerPath:i,context:n,queryThunk:h,mutationThunk:d,api:e,assertTagType:l}),_=x.middleware,S=x.actions;EN(e.util,S),EN(e,{reducer:b,middleware:_});var I=fN({serializeQueryArgs:a,reducerPath:i}),E=I.buildQuerySelector,T=I.buildMutationSelector,C=I.selectInvalidatedBy;EN(e.util,{selectInvalidatedBy:C});var A=function(e){var t=e.serializeQueryArgs,n=e.queryThunk,r=e.mutationThunk,i=e.api,a=e.context,o=new Map,u=new Map,s=i.internalActions,c=s.unsubscribeQueryResult,l=s.removeMutationResult,f=s.updateSubscriptionOptions;return{buildInitiateQuery:function(e,r){return function a(u,s){var l=void 0===s?{}:s,d=l.subscribe,p=void 0===d||d,v=l.forceRefetch,y=l.subscriptionOptions,m=l[JA];return function(s,l){var d,g,k=t({queryArgs:u,endpointDefinition:r,endpointName:e}),b=n(((d={type:"query",subscribe:p,forceRefetch:v,subscriptionOptions:y,endpointName:e,originalArgs:u,queryCacheKey:k})[JA]=m,d)),w=i.endpoints[e].select(u),x=s(b),_=w(l());h(s);var S=x.requestId,I=x.abort,E=_.requestId!==S,T=null==(g=o.get(s))?void 0:g[k],C=function(){return w(l())},A=Object.assign(m?x.then(C):E&&!T?Promise.resolve(_):Promise.all([T,x]).then(C),{arg:u,requestId:S,subscriptionOptions:y,queryCacheKey:k,abort:I,unwrap:function(){return FA(this,null,(function(){var e;return EA(this,(function(t){switch(t.label){case 0:return[4,A];case 1:if((e=t.sent()).isError)throw e.error;return[2,e.data]}}))}))},refetch:function(){return s(a(u,{subscribe:!1,forceRefetch:!0}))},unsubscribe:function(){p&&s(c({queryCacheKey:k,requestId:S}))},updateSubscriptionOptions:function(t){A.subscriptionOptions=t,s(f({endpointName:e,requestId:S,queryCacheKey:k,options:t}))}});if(!T&&!E&&!m){var N=o.get(s)||{};N[k]=A,o.set(s,N),A.then((function(){delete N[k],Object.keys(N).length||o.delete(s)}))}return A}}},buildInitiateMutation:function(e){return function(t,n){var i=void 0===n?{}:n,a=i.track,o=void 0===a||a,s=i.fixedCacheKey;return function(n,i){var a=r({type:"mutation",endpointName:e,originalArgs:t,track:o,fixedCacheKey:s}),c=n(a);h(n);var f=c.requestId,d=c.abort,p=c.unwrap,v=c.unwrap().then((function(e){return{data:e}})).catch((function(e){return{error:e}})),y=function(){n(l({requestId:f,fixedCacheKey:s}))},m=Object.assign(v,{arg:c.arg,requestId:f,abort:d,unwrap:p,unsubscribe:y,reset:y}),g=u.get(n)||{};return u.set(n,g),g[f]=m,m.then((function(){delete g[f],Object.keys(g).length||u.delete(n)})),s&&(g[s]=m,m.then((function(){g[s]===m&&(delete g[s],Object.keys(g).length||u.delete(n))}))),m}}},getRunningQueryThunk:function(e,n){return function(r){var i,u=a.endpointDefinitions[e],s=t({queryArgs:n,endpointDefinition:u,endpointName:e});return null==(i=o.get(r))?void 0:i[s]}},getRunningMutationThunk:function(e,t){return function(e){var n;return null==(n=u.get(e))?void 0:n[t]}},getRunningQueriesThunk:function(){return function(e){return Object.values(o.get(e)||{}).filter(YA)}},getRunningMutationsThunk:function(){return function(e){return Object.values(u.get(e)||{}).filter(YA)}},getRunningOperationPromises:function(){var e=function(e){return Array.from(e.values()).flatMap((function(e){return e?Object.values(e):[]}))};return TA(TA([],e(o)),e(u)).filter(YA)},removalWarning:function(){throw new Error("This method had to be removed due to a conceptual bug in RTK.\n       Please see https://github.com/reduxjs/redux-toolkit/pull/2481 for details.\n       See https://redux-toolkit.js.org/rtk-query/usage/server-side-rendering for new guidance on SSR.")}};function h(e){}}({queryThunk:h,mutationThunk:d,api:e,serializeQueryArgs:a,context:n}),N=A.buildInitiateQuery,D=A.buildInitiateMutation,O=A.getRunningMutationThunk,R=A.getRunningMutationsThunk,P=A.getRunningQueriesThunk,L=A.getRunningQueryThunk,M=A.getRunningOperationPromises,F=A.removalWarning;return EN(e.util,{getRunningOperationPromises:M,getRunningOperationPromise:F,getRunningMutationThunk:O,getRunningMutationsThunk:R,getRunningQueryThunk:L,getRunningQueriesThunk:P}),{name:TN,injectEndpoint:function(t,n){var r,i=e;null!=(r=i.endpoints)[t]||(r[t]={}),HA(n)?EN(i.endpoints[t],{name:t,select:E(t,n),initiate:N(t,n)},g(h,t)):function(e){return e.type===zA.mutation}(n)&&EN(i.endpoints[t],{name:t,select:T(),initiate:D(t)},g(d,t))}}}}},AN=(CN(),function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e}),NN=Object.defineProperty,DN=Object.defineProperties,ON=Object.getOwnPropertyDescriptors,RN=Object.getOwnPropertySymbols,PN=Object.prototype.hasOwnProperty,LN=Object.prototype.propertyIsEnumerable,MN=function(e,t,n){return t in e?NN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},FN=function(e,t){for(var n in t||(t={}))PN.call(t,n)&&MN(e,n,t[n]);if(RN)for(var r=0,i=RN(t);r<i.length;r++){n=i[r];LN.call(t,n)&&MN(e,n,t[n])}return e},jN=function(e,t){return DN(e,ON(t))};function UN(e,n,r,i){var a=(0,t.useMemo)((function(){return{queryArgs:e,serialized:"object"==typeof e?n({queryArgs:e,endpointDefinition:r,endpointName:i}):e}}),[e,n,r,i]),o=(0,t.useRef)(a);return(0,t.useEffect)((function(){o.current.serialized!==a.serialized&&(o.current=a)}),[a]),o.current.serialized===a.serialized?o.current.queryArgs:e}var VN=Symbol();function qN(e){var n=(0,t.useRef)(e);return(0,t.useEffect)((function(){jE(n.current,e)||(n.current=e)}),[e]),jE(n.current,e)?n.current:e}var zN,BN=WeakMap?new WeakMap:void 0,KN=function(e){var t=e.endpointName,n=e.queryArgs,r="",i=null==BN?void 0:BN.get(n);if("string"===typeof i)r=i;else{var a=JSON.stringify(n,(function(e,t){return vC(t)?Object.keys(t).sort().reduce((function(e,n){return e[n]=t[n],e}),{}):t}));vC(n)&&(null==BN||BN.set(n,a)),r=a}return t+"("+r+")"},GN="undefined"!==typeof window&&window.document&&window.document.createElement?t.useLayoutEffect:t.useEffect,WN=function(e){return e},QN=function(e){return e.isUninitialized?jN(FN({},e),{isUninitialized:!1,isFetching:!0,isLoading:void 0===e.data,status:_A.pending}):e};function HN(e){return e.replace(e[0],e[0].toUpperCase())}function $N(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];Object.assign.apply(Object,AN([e],t))}!function(e){e.query="query",e.mutation="mutation"}(zN||(zN={}));var XN=Symbol();var YN,JN,ZN=pN(CN(),function(e){var n=void 0===e?{}:e,r=n.batch,i=void 0===r?gE.unstable_batchedUpdates:r,a=n.useDispatch,o=void 0===a?ME:a,u=n.useSelector,s=void 0===u?TE:u,c=n.useStore,l=void 0===c?RE:c,f=n.unstable__sideEffectsInRender,h=void 0!==f&&f;return{name:XN,init:function(e,n,r){var a=n.serializeQueryArgs,u=e,c=function(e){var n=e.api,r=e.moduleOptions,i=r.batch,a=r.useDispatch,o=r.useSelector,u=r.useStore,s=r.unstable__sideEffectsInRender,c=e.serializeQueryArgs,l=e.context,f=s?function(e){return e()}:t.useEffect;return{buildQueryHooks:function(e){var r=function(r,i){var o=void 0===i?{}:i,u=o.refetchOnReconnect,s=o.refetchOnFocus,c=o.refetchOnMountOrArgChange,h=o.skip,d=void 0!==h&&h,p=o.pollingInterval,v=void 0===p?0:p,y=n.endpoints[e].initiate,m=a(),g=UN(d?uN:r,KN,l.endpointDefinitions[e],e),k=qN({refetchOnReconnect:u,refetchOnFocus:s,pollingInterval:v}),b=(0,t.useRef)(!1),w=(0,t.useRef)(),x=w.current||{},_=x.queryCacheKey,S=x.requestId,I=!1;if(_&&S){var E=m(n.internalActions.internal_probeSubscription({queryCacheKey:_,requestId:S}));I=!!E}var T=!I&&b.current;return f((function(){b.current=I})),f((function(){T&&(w.current=void 0)}),[T]),f((function(){var e,t=w.current;if(g===uN)return null==t||t.unsubscribe(),void(w.current=void 0);var n=null==(e=w.current)?void 0:e.subscriptionOptions;if(t&&t.arg===g)k!==n&&t.updateSubscriptionOptions(k);else{null==t||t.unsubscribe();var r=m(y(g,{subscriptionOptions:k,forceRefetch:c}));w.current=r}}),[m,y,c,g,k,T]),(0,t.useEffect)((function(){return function(){var e;null==(e=w.current)||e.unsubscribe(),w.current=void 0}}),[]),(0,t.useMemo)((function(){return{refetch:function(){var e;if(!w.current)throw new Error("Cannot refetch a query that has not been started yet.");return null==(e=w.current)?void 0:e.refetch()}}}),[])},s=function(r){var o=void 0===r?{}:r,u=o.refetchOnReconnect,s=o.refetchOnFocus,c=o.pollingInterval,l=void 0===c?0:c,h=n.endpoints[e].initiate,d=a(),p=(0,t.useState)(VN),v=p[0],y=p[1],m=(0,t.useRef)(),g=qN({refetchOnReconnect:u,refetchOnFocus:s,pollingInterval:l});f((function(){var e,t,n=null==(e=m.current)?void 0:e.subscriptionOptions;g!==n&&(null==(t=m.current)||t.updateSubscriptionOptions(g))}),[g]);var k=(0,t.useRef)(g);f((function(){k.current=g}),[g]);var b=(0,t.useCallback)((function(e,t){var n;return void 0===t&&(t=!1),i((function(){var r;null==(r=m.current)||r.unsubscribe(),m.current=n=d(h(e,{subscriptionOptions:k.current,forceRefetch:!t})),y(e)})),n}),[d,h]);return(0,t.useEffect)((function(){return function(){var e;null==(e=null==m?void 0:m.current)||e.unsubscribe()}}),[]),(0,t.useEffect)((function(){v===VN||m.current||b(v,!0)}),[v,b]),(0,t.useMemo)((function(){return[b,v]}),[b,v])},d=function(r,i){var a=void 0===i?{}:i,s=a.skip,f=void 0!==s&&s,d=a.selectFromResult,p=n.endpoints[e].select,v=UN(f?uN:r,c,l.endpointDefinitions[e],e),y=(0,t.useRef)(),m=(0,t.useMemo)((function(){return IA([p(v),function(e,t){return t},function(e){return v}],h)}),[p,v]),g=(0,t.useMemo)((function(){return d?IA([m],d):m}),[m,d]),k=o((function(e){return g(e,y.current)}),jE),b=u(),w=m(b.getState(),y.current);return GN((function(){y.current=w}),[w]),k};return{useQueryState:d,useQuerySubscription:r,useLazyQuerySubscription:s,useLazyQuery:function(e){var n=s(e),r=n[0],i=n[1],a=d(i,jN(FN({},e),{skip:i===VN})),o=(0,t.useMemo)((function(){return{lastArg:i}}),[i]);return(0,t.useMemo)((function(){return[r,a,o]}),[r,a,o])},useQuery:function(e,n){var i=r(e,n),a=d(e,FN({selectFromResult:e===uN||(null==n?void 0:n.skip)?void 0:QN},n)),o=a.data,u=a.status,s=a.isLoading,c=a.isSuccess,l=a.isError,f=a.error;return(0,t.useDebugValue)({data:o,status:u,isLoading:s,isSuccess:c,isError:l,error:f}),(0,t.useMemo)((function(){return FN(FN({},a),i)}),[a,i])}}},buildMutationHook:function(e){return function(r){var u=void 0===r?{}:r,s=u.selectFromResult,c=void 0===s?WN:s,l=u.fixedCacheKey,f=n.endpoints[e],h=f.select,d=f.initiate,p=a(),v=(0,t.useState)(),y=v[0],m=v[1];(0,t.useEffect)((function(){return function(){(null==y?void 0:y.arg.fixedCacheKey)||null==y||y.reset()}}),[y]);var g=(0,t.useCallback)((function(e){var t=p(d(e,{fixedCacheKey:l}));return m(t),t}),[p,d,l]),k=(y||{}).requestId,b=(0,t.useMemo)((function(){return IA([h({fixedCacheKey:l,requestId:null==y?void 0:y.requestId})],c)}),[h,y,c,l]),w=o(b,jE),x=null==l?null==y?void 0:y.arg.originalArgs:void 0,_=(0,t.useCallback)((function(){i((function(){y&&m(void 0),l&&p(n.internalActions.removeMutationResult({requestId:k,fixedCacheKey:l}))}))}),[p,l,y,k]),S=w.endpointName,I=w.data,E=w.status,T=w.isLoading,C=w.isSuccess,A=w.isError,N=w.error;(0,t.useDebugValue)({endpointName:S,data:I,status:E,isLoading:T,isSuccess:C,isError:A,error:N});var D=(0,t.useMemo)((function(){return jN(FN({},w),{originalArgs:x,reset:_})}),[w,x,_]);return(0,t.useMemo)((function(){return[g,D]}),[g,D])}},usePrefetch:function(e,r){var i=a(),o=qN(r);return(0,t.useCallback)((function(t,r){return i(n.util.prefetch(e,t,FN(FN({},o),r)))}),[e,i,o])}};function h(e,t,n){if((null==t?void 0:t.endpointName)&&e.isUninitialized){var r=t.endpointName,i=l.endpointDefinitions[r];c({queryArgs:t.originalArgs,endpointDefinition:i,endpointName:r})===c({queryArgs:n,endpointDefinition:i,endpointName:r})&&(t=void 0)}var a=e.isSuccess?e.data:null==t?void 0:t.data;void 0===a&&(a=e.data);var o=void 0!==a,u=e.isLoading,s=!o&&u,f=e.isSuccess||u&&o;return jN(FN({},e),{data:a,currentData:e.data,isFetching:u,isLoading:s,isSuccess:f})}}({api:e,moduleOptions:{batch:i,useDispatch:o,useSelector:s,useStore:l,unstable__sideEffectsInRender:h},serializeQueryArgs:a,context:r}),f=c.buildQueryHooks,d=c.buildMutationHook,p=c.usePrefetch;return $N(u,{usePrefetch:p}),$N(r,{batch:i}),{injectEndpoint:function(t,n){if(function(e){return e.type===zN.query}(n)){var r=f(t),i=r.useQuery,a=r.useLazyQuery,o=r.useLazyQuerySubscription,s=r.useQueryState,c=r.useQuerySubscription;$N(u.endpoints[t],{useQuery:i,useLazyQuery:a,useLazyQuerySubscription:o,useQueryState:s,useQuerySubscription:c}),e["use"+HN(t)+"Query"]=i,e["useLazy"+HN(t)+"Query"]=a}else if(function(e){return e.type===zN.mutation}(n)){var l=d(t);$N(u.endpoints[t],{useMutation:l}),e["use"+HN(t)+"Mutation"]=l}}}}}}()),eD=ZN({baseQuery:function(){throw new Error("When using `fakeBaseQuery`, all queries & mutations must use the `queryFn` definition syntax.")},tagTypes:["Goals"],endpoints:function(e){return{fetchGoals:e.query({queryFn:function(e){return d(f().mark((function t(){var n,r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("goals api - fetching goals from DB"),n=[],r=$_(sE,"/users/".concat(e.userDocId,"/user-goals/")),t.next=6,wI(QS(r,YS("title","asc")));case 6:return t.sent.forEach((function(e){var t;n.push({title:(t=e.data()).title,score:t.score,id:t.id})})),t.abrupt("return",{data:n});case 11:return t.prev=11,t.t0=t.catch(0),console.error(t.t0.message),t.abrupt("return",{error:t.t0.message});case 15:case"end":return t.stop()}}),t,null,[[0,11]])})))()},providesTags:["Goals"]})}}}),tD=eD.useFetchGoalsQuery,nD=function(e){var t,n=gC(),r=e||{},i=r.reducer,a=void 0===i?void 0:i,o=r.middleware,u=void 0===o?n():o,s=r.devTools,c=void 0===s||s,l=r.preloadedState,f=void 0===l?void 0:l,h=r.enhancers,d=void 0===h?void 0:h;if("function"===typeof a)t=a;else{if(!vC(a))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=$T(a)}var p=u;"function"===typeof p&&(p=p(n));var v=YT.apply(void 0,p),y=XT;c&&(y=pC(fC({trace:!1},"object"===typeof c&&c)));var m=[v];return Array.isArray(d)?m=rC([v],d):"function"===typeof d&&(m=d(m)),HT(t,f,y.apply(void 0,m))}({reducer:(YN={goalFormReducer:gA,userReducer:QC},v(YN,eD.reducerPath,eD.reducer),v(YN,"goalReducer",aA),YN),middleware:function(e){return e().concat(eD.middleware)}}),rD=TE;function iD(){return iD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iD.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(JN||(JN={}));var aD,oD="popstate";function uD(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function sD(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function cD(e,t){return{usr:e.state,key:e.key,idx:t}}function lD(e,t,n,r){return void 0===n&&(n=null),iD({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?hD(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function fD(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function hD(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function dD(e,t,n,r){void 0===r&&(r={});var i=r,a=i.window,o=void 0===a?document.defaultView:a,u=i.v5Compat,s=void 0!==u&&u,c=o.history,l=JN.Pop,f=null,h=d();function d(){return(c.state||{idx:null}).idx}function p(){l=JN.Pop;var e=d(),t=null==e?null:e-h;h=e,f&&f({action:l,location:y.location,delta:t})}function v(e){var t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:fD(e);return uD(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==h&&(h=0,c.replaceState(iD({},c.state,{idx:h}),""));var y={get action(){return l},get location(){return e(o,c)},listen:function(e){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(oD,p),f=e,function(){o.removeEventListener(oD,p),f=null}},createHref:function(e){return t(o,e)},createURL:v,encodeLocation:function(e){var t=v(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=JN.Push;var r=lD(y.location,e,t);n&&n(r,e);var i=cD(r,h=d()+1),a=y.createHref(r);try{c.pushState(i,"",a)}catch(u){o.location.assign(a)}s&&f&&f({action:l,location:y.location,delta:1})},replace:function(e,t){l=JN.Replace;var r=lD(y.location,e,t);n&&n(r,e);var i=cD(r,h=d()),a=y.createHref(r);c.replaceState(i,"",a),s&&f&&f({action:l,location:y.location,delta:0})},go:function(e){return c.go(e)}};return y}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(aD||(aD={}));var pD=new Set(["lazy","caseSensitive","path","id","index","children"]);function vD(e,t,n,r){return void 0===n&&(n=[]),void 0===r&&(r={}),e.map((function(e,i){var a=[].concat(oe(n),[i]),o="string"===typeof e.id?e.id:a.join("-");if(uD(!0!==e.index||!e.children,"Cannot specify children on an index route"),uD(!r[o],'Found a route id collision on id "'+o+"\".  Route id's must be globally unique within Data Router usages"),function(e){return!0===e.index}(e)){var u=iD({},e,{hasErrorBoundary:t(e),id:o});return r[o]=u,u}var s=iD({},e,{id:o,hasErrorBoundary:t(e),children:void 0});return r[o]=s,e.children&&(s.children=vD(e.children,t,a,r)),s}))}function yD(e,t,n){void 0===n&&(n="/");var r=ND(("string"===typeof t?hD(t):t).pathname||"/",n);if(null==r)return null;var i=mD(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=TD(i[o],AD(r));return a}function mD(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(uD(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var u=PD([r,o.relativePath]),s=n.concat(o);e.children&&e.children.length>0&&(uD(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+u+'".'),mD(e.children,t,s,u)),(null!=e.path||e.index)&&t.push({path:u,score:ED(u,e.index),routesMeta:s})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=k(gD(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(u){a.e(u)}finally{a.f()}}else i(e,t)})),t}function gD(e){var t=e.split("/");if(0===t.length)return[];var n=Mt(t),r=n[0],i=n.slice(1),a=r.endsWith("?"),o=r.replace(/\?$/,"");if(0===i.length)return a?[o,""]:[o];var u=gD(i.join("/")),s=[];return s.push.apply(s,oe(u.map((function(e){return""===e?o:[o,e].join("/")})))),a&&s.push.apply(s,oe(u)),s.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var kD=/^:\w+$/,bD=3,wD=2,xD=1,_D=10,SD=-2,ID=function(e){return"*"===e};function ED(e,t){var n=e.split("/"),r=n.length;return n.some(ID)&&(r+=SD),t&&(r+=wD),n.filter((function(e){return!ID(e)})).reduce((function(e,t){return e+(kD.test(t)?bD:""===t?xD:_D)}),r)}function TD(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=CD({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:PD([i,l.pathname]),pathnameBase:LD(PD([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=PD([i,l.pathnameBase]))}return a}function CD(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);sD("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=c(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),l=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return sD(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(l[n]||"",t),e}),{}),pathname:u,pathnameBase:s,pattern:e}}function AD(e){try{return decodeURI(e)}catch(t){return sD(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function ND(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function DD(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function OD(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function RD(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=hD(e):(uD(!(i=iD({},e)).pathname||!i.pathname.includes("?"),DD("?","pathname","search",i)),uD(!i.pathname||!i.pathname.includes("#"),DD("#","pathname","hash",i)),uD(!i.search||!i.search.includes("#"),DD("#","search","hash",i)));var a,o=""===e||""===i.pathname,u=o?"/":i.pathname;if(r||null==u)a=n;else{var s=t.length-1;if(u.startsWith("..")){for(var c=u.split("/");".."===c[0];)c.shift(),s-=1;i.pathname=c.join("/")}a=s>=0?t[s]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?hD(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:MD(a),hash:FD(u)}}(i,a),f=u&&"/"!==u&&u.endsWith("/"),h=(o||"."===u)&&n.endsWith("/");return l.pathname.endsWith("/")||!f&&!h||(l.pathname+="/"),l}var PD=function(e){return e.join("/").replace(/\/\/+/g,"/")},LD=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},MD=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},FD=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},jD=function(e){x(n,e);var t=I(n);function n(){return y(this,n),t.apply(this,arguments)}return g(n)}(T(Error));var UD=g((function e(t,n,r,i){y(this,e),void 0===i&&(i=!1),this.status=t,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}));function VD(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var qD=["post","put","patch","delete"],zD=new Set(qD),BD=["get"].concat(qD),KD=new Set(BD),GD=new Set([301,302,303,307,308]),WD=new Set([307,308]),QD={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},HD={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},$D={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},XD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,YD="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,JD=!YD,ZD=function(e){return Boolean(e.hasErrorBoundary)};function eO(e){uD(e.routes.length>0,"You must provide a non-empty routes array to createRouter");var t,n=e.detectErrorBoundary||ZD,r={},i=vD(e.routes,n,void 0,r),a=iD({v7_normalizeFormMethod:!1},e.future),o=null,u=new Set,s=null,l=null,h=null,p=null!=e.hydrationData,y=yD(i,e.history.location,e.basename),m=null;if(null==y){var g=mO(404,{pathname:e.history.location.pathname}),b=yO(i);y=b.matches,m=v({},b.route.id,g)}var w,x,_=!y.some((function(e){return e.route.lazy}))&&(!y.some((function(e){return e.route.loader}))||null!=e.hydrationData),S={historyAction:e.history.action,location:e.history.location,matches:y,initialized:_,navigation:QD,restoreScrollPosition:null==e.hydrationData&&null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||m,fetchers:new Map,blockers:new Map},I=JN.Pop,E=!1,T=!1,C=!1,A=[],N=[],D=new Map,O=0,R=-1,P=new Map,L=new Set,M=new Map,F=new Map,j=new Map,U=!1;function V(e){S=iD({},S,e),u.forEach((function(e){return e(S)}))}function q(n,r){var a,o,u,s=null!=S.actionData&&null!=S.navigation.formMethod&&TO(S.navigation.formMethod)&&"loading"===S.navigation.state&&!0!==(null==(a=n.state)?void 0:a._isRedirect);u=r.actionData?Object.keys(r.actionData).length>0?r.actionData:null:s?S.actionData:null;var l,f=r.loaderData?pO(S.loaderData,r.loaderData,r.matches||[],r.errors):S.loaderData,h=k(j);try{for(h.s();!(l=h.n()).done;){fe(c(l.value,1)[0])}}catch(p){h.e(p)}finally{h.f()}var d=!0===E||null!=S.navigation.formMethod&&TO(S.navigation.formMethod)&&!0!==(null==(o=n.state)?void 0:o._isRedirect);t&&(i=t,t=void 0),V(iD({},r,{actionData:u,loaderData:f,historyAction:I,location:n,initialized:!0,navigation:QD,revalidation:"idle",restoreScrollPosition:ye(n,r.matches||S.matches),preventScrollReset:d,blockers:new Map(S.blockers)})),T||I===JN.Pop||(I===JN.Push?e.history.push(n,n.state):I===JN.Replace&&e.history.replace(n,n.state)),I=JN.Pop,E=!1,T=!1,C=!1,A=[],N=[]}function z(e,t){return B.apply(this,arguments)}function B(){return B=d(f().mark((function t(n,r){var i,o,u,s,c,l,h,d,p,v;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("number"!==typeof n){t.next=3;break}return e.history.go(n),t.abrupt("return");case 3:if(i=tO(n,a,r),o=i.path,u=i.submission,s=i.error,c=S.location,l=iD({},l=lD(S.location,o,r&&r.state),e.history.encodeLocation(l)),h=r&&null!=r.replace?r.replace:void 0,d=JN.Push,!0===h?d=JN.Replace:!1===h||null!=u&&TO(u.formMethod)&&u.formAction===S.location.pathname+S.location.search&&(d=JN.Replace),p=r&&"preventScrollReset"in r?!0===r.preventScrollReset:void 0,!(v=de({currentLocation:c,nextLocation:l,historyAction:d}))){t.next=15;break}return he(v,{state:"blocked",location:l,proceed:function(){he(v,{state:"proceeding",proceed:void 0,reset:void 0,location:l}),z(n,r)},reset:function(){fe(v),V({blockers:new Map(S.blockers)})}}),t.abrupt("return");case 15:return t.next=17,K(d,l,{submission:u,pendingError:s,preventScrollReset:p,replace:r&&r.replace});case 17:return t.abrupt("return",t.sent);case 18:case"end":return t.stop()}}),t)}))),B.apply(this,arguments)}function K(e,t,n){return G.apply(this,arguments)}function G(){return G=d(f().mark((function n(r,a,o){var u,s,c,l,h,d,p,y,m,g,k,b,w,_,C,A;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(x&&x.abort(),x=null,I=r,T=!0===(o&&o.startUninterruptedRevalidation),ve(S.location,S.matches),E=!0===(o&&o.preventScrollReset),u=t||i,s=o&&o.overrideNavigation,c=yD(u,a,e.basename)){n.next=15;break}return l=mO(404,{pathname:a.pathname}),h=yO(u),d=h.matches,p=h.route,pe(),q(a,{matches:d,loaderData:{},errors:v({},p.id,l)}),n.abrupt("return");case 15:if(!bO(S.location,a)||o&&o.submission&&TO(o.submission.formMethod)){n.next=18;break}return q(a,{matches:c}),n.abrupt("return");case 18:if(x=new AbortController,y=lO(e.history,a,x.signal,o&&o.submission),!o||!o.pendingError){n.next=24;break}g=v({},vO(c).route.id,o.pendingError),n.next=35;break;case 24:if(!(o&&o.submission&&TO(o.submission.formMethod))){n.next=35;break}return n.next=27,W(y,a,o.submission,c,{replace:o.replace});case 27:if(!(k=n.sent).shortCircuited){n.next=30;break}return n.abrupt("return");case 30:m=k.pendingActionData,g=k.pendingActionError,b=iD({state:"loading",location:a},o.submission),s=b,y=new Request(y.url,{signal:y.signal});case 35:return n.next=37,H(y,a,c,s,o&&o.submission,o&&o.fetcherSubmission,o&&o.replace,m,g);case 37:if(w=n.sent,_=w.shortCircuited,C=w.loaderData,A=w.errors,!_){n.next=43;break}return n.abrupt("return");case 43:x=null,q(a,iD({matches:c},m?{actionData:m}:{},{loaderData:C,errors:A}));case 45:case"end":return n.stop()}}),n)}))),G.apply(this,arguments)}function W(e,t,n,r,i){return Q.apply(this,arguments)}function Q(){return Q=d(f().mark((function e(t,i,a,o,u){var s,c,l,h;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(re(),V({navigation:iD({state:"submitting",location:i},a)}),(c=PO(o,i)).route.action||c.route.lazy){e.next=8;break}s={type:aD.error,error:mO(405,{method:t.method,pathname:i.pathname,routeId:c.route.id})},e.next=13;break;case 8:return e.next=10,sO("action",t,c,o,r,n,w.basename);case 10:if(s=e.sent,!t.signal.aborted){e.next=13;break}return e.abrupt("return",{shortCircuited:!0});case 13:if(!_O(s)){e.next=18;break}return l=u&&null!=u.replace?u.replace:s.location===S.location.pathname+S.location.search,e.next=17,Z(S,s,{submission:a,replace:l});case 17:return e.abrupt("return",{shortCircuited:!0});case 18:if(!xO(s)){e.next=22;break}return h=vO(o,c.route.id),!0!==(u&&u.replace)&&(I=JN.Push),e.abrupt("return",{pendingActionData:{},pendingActionError:v({},h.route.id,s.error)});case 22:if(!wO(s)){e.next=24;break}throw mO(400,{type:"defer-action"});case 24:return e.abrupt("return",{pendingActionData:v({},c.route.id,s.data)});case 25:case"end":return e.stop()}}),e)}))),Q.apply(this,arguments)}function H(e,t,n,r,i,a,o,u,s){return $.apply(this,arguments)}function $(){return $=d(f().mark((function n(r,a,o,u,s,l,h,d,p){var v,y,m,g,k,b,w,_,I,E,P,L,j,U,z,B,K,G;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((v=u)||(y=iD({state:"loading",location:a,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},s),v=y),m=s||l?s||l:v.formMethod&&v.formAction&&v.formData&&v.formEncType?{formMethod:v.formMethod,formAction:v.formAction,formData:v.formData,formEncType:v.formEncType}:void 0,g=t||i,k=rO(e.history,S,o,m,a,C,A,N,M,g,e.basename,d,p),b=c(k,2),w=b[0],_=b[1],pe((function(e){return!(o&&o.some((function(t){return t.route.id===e})))||w&&w.some((function(t){return t.route.id===e}))})),0!==w.length||0!==_.length){n.next=9;break}return q(a,iD({matches:o,loaderData:{},errors:p||null},d?{actionData:d}:{})),n.abrupt("return",{shortCircuited:!0});case 9:return T||(_.forEach((function(e){var t=S.fetchers.get(e.key),n={state:"loading",data:t&&t.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};S.fetchers.set(e.key,n)})),I=d||S.actionData,V(iD({navigation:v},I?0===Object.keys(I).length?{actionData:null}:{actionData:I}:{},_.length>0?{fetchers:new Map(S.fetchers)}:{}))),R=++O,_.forEach((function(e){return D.set(e.key,x)})),n.next=14,te(S.matches,o,w,_,r);case 14:if(E=n.sent,P=E.results,L=E.loaderResults,j=E.fetcherResults,!r.signal.aborted){n.next=20;break}return n.abrupt("return",{shortCircuited:!0});case 20:if(_.forEach((function(e){return D.delete(e.key)})),!(U=gO(P))){n.next=26;break}return n.next=25,Z(S,U,{replace:h});case 25:return n.abrupt("return",{shortCircuited:!0});case 26:return z=dO(S,o,w,L,p,_,j,F),B=z.loaderData,K=z.errors,F.forEach((function(e,t){e.subscribe((function(n){(n||e.done)&&F.delete(t)}))})),ce(),G=le(R),n.abrupt("return",iD({loaderData:B,errors:K},G||_.length>0?{fetchers:new Map(S.fetchers)}:{}));case 31:case"end":return n.stop()}}),n)}))),$.apply(this,arguments)}function X(e){return S.fetchers.get(e)||HD}function Y(){return Y=d(f().mark((function a(o,u,s,l,h,d){var p,y,m,g,k,b,_,E,T,j,U,z,B,K,G,W,Q,H,$,X,Y,J,ee,ne,ae,oe,ue;return f().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(re(),M.delete(o),l.route.action||l.route.lazy){a.next=6;break}return p=mO(405,{method:d.formMethod,pathname:s,routeId:u}),ie(o,u,p),a.abrupt("return");case 6:return y=S.fetchers.get(o),m=iD({state:"submitting"},d,{data:y&&y.data," _hasFetcherDoneAnything ":!0}),S.fetchers.set(o,m),V({fetchers:new Map(S.fetchers)}),g=new AbortController,k=lO(e.history,s,g.signal,d),D.set(o,g),a.next=15,sO("action",k,l,h,r,n,w.basename);case 15:if(b=a.sent,!k.signal.aborted){a.next=19;break}return D.get(o)===g&&D.delete(o),a.abrupt("return");case 19:if(!_O(b)){a.next=26;break}return D.delete(o),L.add(o),_=iD({state:"loading"},d,{data:void 0," _hasFetcherDoneAnything ":!0}),S.fetchers.set(o,_),V({fetchers:new Map(S.fetchers)}),a.abrupt("return",Z(S,b,{submission:d,isFetchActionRedirect:!0}));case 26:if(!xO(b)){a.next=29;break}return ie(o,u,b.error),a.abrupt("return");case 29:if(!wO(b)){a.next=31;break}throw mO(400,{type:"defer-action"});case 31:return E=S.navigation.location||S.location,T=lO(e.history,E,g.signal),j=t||i,uD(U="idle"!==S.navigation.state?yD(j,S.navigation.location,e.basename):S.matches,"Didn't find any matches after fetcher action"),z=++O,P.set(o,z),B=iD({state:"loading",data:b.data},d,{" _hasFetcherDoneAnything ":!0}),S.fetchers.set(o,B),K=rO(e.history,S,U,d,E,C,A,N,M,j,e.basename,v({},l.route.id,b.data),void 0),G=c(K,2),W=G[0],(Q=G[1]).filter((function(e){return e.key!==o})).forEach((function(e){var t=e.key,n=S.fetchers.get(t),r={state:"loading",data:n&&n.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};S.fetchers.set(t,r),D.set(t,g)})),V({fetchers:new Map(S.fetchers)}),a.next=45,te(S.matches,U,W,Q,T);case 45:if(H=a.sent,$=H.results,X=H.loaderResults,Y=H.fetcherResults,!g.signal.aborted){a.next=51;break}return a.abrupt("return");case 51:if(P.delete(o),D.delete(o),Q.forEach((function(e){return D.delete(e.key)})),!(J=gO($))){a.next=57;break}return a.abrupt("return",Z(S,J));case 57:ee=dO(S,S.matches,W,X,void 0,Q,Y,F),ne=ee.loaderData,ae=ee.errors,oe={state:"idle",data:b.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0},S.fetchers.set(o,oe),ue=le(z),"loading"===S.navigation.state&&z>R?(uD(I,"Expected pending action"),x&&x.abort(),q(S.navigation.location,{matches:U,loaderData:ne,errors:ae,fetchers:new Map(S.fetchers)})):(V(iD({errors:ae,loaderData:pO(S.loaderData,ne,U,ae)},ue?{fetchers:new Map(S.fetchers)}:{})),C=!1);case 62:case"end":return a.stop()}}),a)}))),Y.apply(this,arguments)}function J(){return J=d(f().mark((function t(i,a,o,u,s,c){var l,h,d,p,y,m,g;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l=S.fetchers.get(i),h=iD({state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},c,{data:l&&l.data," _hasFetcherDoneAnything ":!0}),S.fetchers.set(i,h),V({fetchers:new Map(S.fetchers)}),d=new AbortController,p=lO(e.history,o,d.signal),D.set(i,d),t.next=9,sO("loader",p,u,s,r,n,w.basename);case 9:if(!wO(y=t.sent)){t.next=17;break}return t.next=13,NO(y,p.signal,!0);case 13:if(t.t0=t.sent,t.t0){t.next=16;break}t.t0=y;case 16:y=t.t0;case 17:if(D.get(i)===d&&D.delete(i),!p.signal.aborted){t.next=20;break}return t.abrupt("return");case 20:if(!_O(y)){t.next=24;break}return t.next=23,Z(S,y);case 23:return t.abrupt("return");case 24:if(!xO(y)){t.next=29;break}return m=vO(S.matches,a),S.fetchers.delete(i),V({fetchers:new Map(S.fetchers),errors:v({},m.route.id,y.error)}),t.abrupt("return");case 29:uD(!wO(y),"Unhandled fetcher deferred data"),g={state:"idle",data:y.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0},S.fetchers.set(i,g),V({fetchers:new Map(S.fetchers)});case 33:case"end":return t.stop()}}),t)}))),J.apply(this,arguments)}function Z(e,t,n){return ee.apply(this,arguments)}function ee(){return ee=d(f().mark((function t(n,r,i){var a,o,u,s,c,l,h,d,p,v,y,m,g,k;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=(o=void 0===i?{}:i).submission,s=o.replace,c=o.isFetchActionRedirect,r.revalidate&&(C=!0),uD(l=lD(n.location,r.location,iD({_isRedirect:!0},c?{_isFetchActionRedirect:!0}:{})),"Expected a location on the redirect navigation"),!XD.test(r.location)||!YD||"undefined"===typeof(null==(a=window)?void 0:a.location)){t.next=10;break}if(h=e.history.createURL(r.location),d=null==ND(h.pathname,e.basename||"/"),window.location.origin===h.origin&&!d){t.next=10;break}return s?window.location.replace(r.location):window.location.assign(r.location),t.abrupt("return");case 10:if(x=null,p=!0===s?JN.Replace:JN.Push,v=n.navigation,y=v.formMethod,m=v.formAction,g=v.formEncType,k=v.formData,!u&&y&&m&&k&&g&&(u={formMethod:y,formAction:m,formEncType:g,formData:k}),!(WD.has(r.status)&&u&&TO(u.formMethod))){t.next=19;break}return t.next=17,K(p,l,{submission:iD({},u,{formAction:r.location}),preventScrollReset:E});case 17:case 22:t.next=26;break;case 19:if(!c){t.next=24;break}return t.next=22,K(p,l,{overrideNavigation:{state:"loading",location:l,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},fetcherSubmission:u,preventScrollReset:E});case 24:return t.next=26,K(p,l,{overrideNavigation:{state:"loading",location:l,formMethod:u?u.formMethod:void 0,formAction:u?u.formAction:void 0,formEncType:u?u.formEncType:void 0,formData:u?u.formData:void 0},preventScrollReset:E});case 26:case"end":return t.stop()}}),t)}))),ee.apply(this,arguments)}function te(e,t,n,r,i){return ne.apply(this,arguments)}function ne(){return ne=d(f().mark((function t(i,a,o,u,s){var c,l,h;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([].concat(oe(o.map((function(e){return sO("loader",s,e,a,r,n,w.basename)}))),oe(u.map((function(t){return t.matches&&t.match?sO("loader",lO(e.history,t.path,s.signal),t.match,t.matches,r,n,w.basename):{type:aD.error,error:mO(404,{pathname:t.path})}})))));case 2:return c=t.sent,l=c.slice(0,o.length),h=c.slice(o.length),t.next=7,Promise.all([CO(i,o,l,s.signal,!1,S.loaderData),CO(i,u.map((function(e){return e.match})),h,s.signal,!0)]);case 7:return t.abrupt("return",{results:c,loaderResults:l,fetcherResults:h});case 8:case"end":return t.stop()}}),t)}))),ne.apply(this,arguments)}function re(){var e;C=!0,(e=A).push.apply(e,oe(pe())),M.forEach((function(e,t){D.has(t)&&(N.push(t),ue(t))}))}function ie(e,t,n){var r=vO(S.matches,t);ae(e),V({errors:v({},r.route.id,n),fetchers:new Map(S.fetchers)})}function ae(e){D.has(e)&&ue(e),M.delete(e),P.delete(e),L.delete(e),S.fetchers.delete(e)}function ue(e){var t=D.get(e);uD(t,"Expected fetch controller: "+e),t.abort(),D.delete(e)}function se(e){var t,n=k(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i={state:"idle",data:X(r).data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};S.fetchers.set(r,i)}}catch(a){n.e(a)}finally{n.f()}}function ce(){var e,t=[],n=k(L);try{for(n.s();!(e=n.n()).done;){var r=e.value,i=S.fetchers.get(r);uD(i,"Expected fetcher: "+r),"loading"===i.state&&(L.delete(r),t.push(r))}}catch(a){n.e(a)}finally{n.f()}se(t)}function le(e){var t,n=[],r=k(P);try{for(r.s();!(t=r.n()).done;){var i=c(t.value,2),a=i[0];if(i[1]<e){var o=S.fetchers.get(a);uD(o,"Expected fetcher: "+a),"loading"===o.state&&(ue(a),P.delete(a),n.push(a))}}}catch(u){r.e(u)}finally{r.f()}return se(n),n.length>0}function fe(e){S.blockers.delete(e),j.delete(e)}function he(e,t){var n=S.blockers.get(e)||$D;uD("unblocked"===n.state&&"blocked"===t.state||"blocked"===n.state&&"blocked"===t.state||"blocked"===n.state&&"proceeding"===t.state||"blocked"===n.state&&"unblocked"===t.state||"proceeding"===n.state&&"unblocked"===t.state,"Invalid blocker state transition: "+n.state+" -> "+t.state),S.blockers.set(e,t),V({blockers:new Map(S.blockers)})}function de(e){var t=e.currentLocation,n=e.nextLocation,r=e.historyAction;if(0!==j.size){j.size>1&&sD(!1,"A router only supports one blocker at a time");var i=Array.from(j.entries()),a=c(i[i.length-1],2),o=a[0],u=a[1],s=S.blockers.get(o);if(!s||"proceeding"!==s.state)return u({currentLocation:t,nextLocation:n,historyAction:r})?o:void 0}}function pe(e){var t=[];return F.forEach((function(n,r){e&&!e(r)||(n.cancel(),t.push(r),F.delete(r))})),t}function ve(e,t){if(s&&l&&h){var n=t.map((function(e){return RO(e,S.loaderData)})),r=l(e,n)||e.key;s[r]=h()}}function ye(e,t){if(s&&l&&h){var n=t.map((function(e){return RO(e,S.loaderData)})),r=l(e,n)||e.key,i=s[r];if("number"===typeof i)return i}return null}return w={get basename(){return e.basename},get state(){return S},get routes(){return i},initialize:function(){return o=e.history.listen((function(t){var n=t.action,r=t.location,i=t.delta;if(!U){sD(0===j.size||null!=i,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");var a=de({currentLocation:S.location,nextLocation:r,historyAction:n});return a&&null!=i?(U=!0,e.history.go(-1*i),void he(a,{state:"blocked",location:r,proceed:function(){he(a,{state:"proceeding",proceed:void 0,reset:void 0,location:r}),e.history.go(i)},reset:function(){fe(a),V({blockers:new Map(w.state.blockers)})}})):K(n,r)}U=!1})),S.initialized||K(JN.Pop,S.location),w},subscribe:function(e){return u.add(e),function(){return u.delete(e)}},enableScrollRestoration:function(e,t,n){if(s=e,h=t,l=n||function(e){return e.key},!p&&S.navigation===QD){p=!0;var r=ye(S.location,S.matches);null!=r&&V({restoreScrollPosition:r})}return function(){s=null,h=null,l=null}},navigate:z,fetch:function(n,r,o,u){if(JD)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");D.has(n)&&ue(n);var s=yD(t||i,o,e.basename);if(s){var c=tO(o,a,u,!0),l=c.path,f=c.submission,h=PO(s,l);E=!0===(u&&u.preventScrollReset),f&&TO(f.formMethod)?function(e,t,n,r,i,a){Y.apply(this,arguments)}(n,r,l,h,s,f):(M.set(n,{routeId:r,path:l}),function(e,t,n,r,i,a){J.apply(this,arguments)}(n,r,l,h,s,f))}else ie(n,r,mO(404,{pathname:o}))},revalidate:function(){re(),V({revalidation:"loading"}),"submitting"!==S.navigation.state&&("idle"!==S.navigation.state?K(I||S.historyAction,S.navigation.location,{overrideNavigation:S.navigation}):K(S.historyAction,S.location,{startUninterruptedRevalidation:!0}))},createHref:function(t){return e.history.createHref(t)},encodeLocation:function(t){return e.history.encodeLocation(t)},getFetcher:X,deleteFetcher:ae,dispose:function(){o&&o(),u.clear(),x&&x.abort(),S.fetchers.forEach((function(e,t){return ae(t)})),S.blockers.forEach((function(e,t){return fe(t)}))},getBlocker:function(e,t){var n=S.blockers.get(e)||$D;return j.get(e)!==t&&j.set(e,t),n},deleteBlocker:fe,_internalFetchControllers:D,_internalActiveDeferreds:F,_internalSetRoutes:function(e){t=e}},w}Symbol("deferred");function tO(e,t,n,r){void 0===r&&(r=!1);var i,a="string"===typeof e?e:fD(e);if(!n||!function(e){return null!=e&&"formData"in e}(n))return{path:a};if(n.formMethod&&!EO(n.formMethod))return{path:a,error:mO(405,{method:n.formMethod})};if(n.formData){var o=n.formMethod||"get";if(TO((i={formMethod:t.v7_normalizeFormMethod?o.toUpperCase():o.toLowerCase(),formAction:kO(a),formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:n.formData}).formMethod))return{path:a,submission:i}}var u=hD(a),s=fO(n.formData);return r&&u.search&&OO(u.search)&&s.append("index",""),u.search="?"+s,{path:fD(u),submission:i}}function nO(e,t){var n=e;if(t){var r=e.findIndex((function(e){return e.route.id===t}));r>=0&&(n=e.slice(0,r))}return n}function rO(e,t,n,r,i,a,o,u,s,c,l,f,h){var d=h?Object.values(h)[0]:f?Object.values(f)[0]:void 0,p=e.createURL(t.location),v=e.createURL(i),y=a||p.toString()===v.toString()||p.search!==v.search,m=h?Object.keys(h)[0]:void 0,g=nO(n,m).filter((function(e,n){if(e.route.lazy)return!0;if(null==e.route.loader)return!1;if(function(e,t,n){var r=!t||n.route.id!==t.route.id,i=void 0===e[n.route.id];return r||i}(t.loaderData,t.matches[n],e)||o.some((function(t){return t===e.route.id})))return!0;var i=t.matches[n],a=e;return aO(e,iD({currentUrl:p,currentParams:i.params,nextUrl:v,nextParams:a.params},r,{actionResult:d,defaultShouldRevalidate:y||iO(i,a)}))})),k=[];return s.forEach((function(e,i){if(n.some((function(t){return t.route.id===e.routeId}))){var a=yD(c,e.path,l);if(a){var o=PO(a,e.path);if(u.includes(i))k.push(iD({key:i,matches:a,match:o},e));else aO(o,iD({currentUrl:p,currentParams:t.matches[t.matches.length-1].params,nextUrl:v,nextParams:n[n.length-1].params},r,{actionResult:d,defaultShouldRevalidate:y}))&&k.push(iD({key:i,matches:a,match:o},e))}else k.push(iD({key:i},e,{matches:null,match:null}))}})),[g,k]}function iO(e,t){var n=e.route.path;return e.pathname!==t.pathname||null!=n&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function aO(e,t){if(e.route.shouldRevalidate){var n=e.route.shouldRevalidate(t);if("boolean"===typeof n)return n}return t.defaultShouldRevalidate}function oO(e,t,n){return uO.apply(this,arguments)}function uO(){return uO=d(f().mark((function e(t,n,r){var i,a,o,u,s,c;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.lazy){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.lazy();case 4:if(i=e.sent,t.lazy){e.next=7;break}return e.abrupt("return");case 7:for(u in uD(a=r[t.id],"No route found in manifest"),o={},i)s=a[u],sD(!(c=void 0!==s&&"hasErrorBoundary"!==u),'Route "'+a.id+'" has a static property "'+u+'" defined but its lazy function is also returning a value for this property. The lazy route property "'+u+'" will be ignored.'),c||pD.has(u)||(o[u]=i[u]);Object.assign(a,o),Object.assign(a,{hasErrorBoundary:n(iD({},a)),lazy:void 0});case 13:case"end":return e.stop()}}),e)}))),uO.apply(this,arguments)}function sO(e,t,n,r,i,a,o,u,s,c){return cO.apply(this,arguments)}function cO(){return cO=d(f().mark((function e(t,n,r,i,a,o,u,s,c,l){var h,d,p,v,y,m,g,k,b,w,x,_,S,I,E,T,C,A,N;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===u&&(u="/"),void 0===s&&(s=!1),void 0===c&&(c=!1),v=function(e){var t,i=new Promise((function(e,n){return t=n}));return p=function(){return t()},n.signal.addEventListener("abort",p),Promise.race([e({request:n,params:r.params,context:l}),i])},e.prev=4,y=r.route[t],!r.route.lazy){e.next=30;break}if(!y){e.next=14;break}return e.next=10,Promise.all([v(y),oO(r.route,o,a)]);case 10:m=e.sent,d=m[0],e.next=28;break;case 14:return e.next=16,oO(r.route,o,a);case 16:if(!(y=r.route[t])){e.next=23;break}return e.next=20,v(y);case 20:d=e.sent,e.next=28;break;case 23:if("action"!==t){e.next=27;break}throw mO(405,{method:n.method,pathname:new URL(n.url).pathname,routeId:r.route.id});case 27:return e.abrupt("return",{type:aD.data,data:void 0});case 28:e.next=34;break;case 30:return uD(y,"Could not find the "+t+' to run on the "'+r.route.id+'" route'),e.next=33,v(y);case 33:d=e.sent;case 34:uD(void 0!==d,"You defined "+("action"===t?"an action":"a loader")+' for route "'+r.route.id+"\" but didn't return anything from your `"+t+"` function. Please return a value or `null`."),e.next=41;break;case 37:e.prev=37,e.t0=e.catch(4),h=aD.error,d=e.t0;case 41:return e.prev=41,p&&n.signal.removeEventListener("abort",p),e.finish(41);case 44:if(!IO(d)){e.next=69;break}if(g=d.status,!GD.has(g)){e.next=54;break}if(uD(k=d.headers.get("Location"),"Redirects returned/thrown from loaders/actions must have a Location header"),XD.test(k)?s||(S=new URL(n.url),I=k.startsWith("//")?new URL(S.protocol+k):new URL(k),E=null!=ND(I.pathname,u),I.origin===S.origin&&E&&(k=I.pathname+I.search+I.hash)):(b=i.slice(0,i.indexOf(r)+1),w=OD(b).map((function(e){return e.pathnameBase})),uD(fD(x=RD(k,w,new URL(n.url).pathname)),"Unable to resolve redirect location: "+k),u&&(_=x.pathname,x.pathname="/"===_?u:PD([u,_])),k=fD(x)),!s){e.next=53;break}throw d.headers.set("Location",k),d;case 53:return e.abrupt("return",{type:aD.redirect,status:g,location:k,revalidate:null!==d.headers.get("X-Remix-Revalidate")});case 54:if(!c){e.next=56;break}throw{type:h||aD.data,response:d};case 56:if(!(C=d.headers.get("Content-Type"))||!/\bapplication\/json\b/.test(C)){e.next=63;break}return e.next=60,d.json();case 60:T=e.sent,e.next=66;break;case 63:return e.next=65,d.text();case 65:T=e.sent;case 66:if(h!==aD.error){e.next=68;break}return e.abrupt("return",{type:h,error:new UD(g,d.statusText,T),headers:d.headers});case 68:return e.abrupt("return",{type:aD.data,data:T,statusCode:d.status,headers:d.headers});case 69:if(h!==aD.error){e.next=71;break}return e.abrupt("return",{type:h,error:d});case 71:if(!SO(d)){e.next=73;break}return e.abrupt("return",{type:aD.deferred,deferredData:d,statusCode:null==(A=d.init)?void 0:A.status,headers:(null==(N=d.init)?void 0:N.headers)&&new Headers(d.init.headers)});case 73:return e.abrupt("return",{type:aD.data,data:d});case 74:case"end":return e.stop()}}),e,null,[[4,37,41,44]])}))),cO.apply(this,arguments)}function lO(e,t,n,r){var i=e.createURL(kO(t)).toString(),a={signal:n};if(r&&TO(r.formMethod)){var o=r.formMethod,u=r.formEncType,s=r.formData;a.method=o.toUpperCase(),a.body="application/x-www-form-urlencoded"===u?fO(s):s}return new Request(i,a)}function fO(e){var t,n=new URLSearchParams,r=k(e.entries());try{for(r.s();!(t=r.n()).done;){var i=c(t.value,2),a=i[0],o=i[1];n.append(a,o instanceof File?o.name:o)}}catch(u){r.e(u)}finally{r.f()}return n}function hO(e,t,n,r,i){var a,o={},u=null,s=!1,c={};return n.forEach((function(n,l){var f=t[l].route.id;if(uD(!_O(n),"Cannot handle redirect results in processLoaderData"),xO(n)){var h=vO(e,f),d=n.error;r&&(d=Object.values(r)[0],r=void 0),null==(u=u||{})[h.route.id]&&(u[h.route.id]=d),o[f]=void 0,s||(s=!0,a=VD(n.error)?n.error.status:500),n.headers&&(c[f]=n.headers)}else wO(n)?(i.set(f,n.deferredData),o[f]=n.deferredData.data):o[f]=n.data,null==n.statusCode||200===n.statusCode||s||(a=n.statusCode),n.headers&&(c[f]=n.headers)})),r&&(u=r,o[Object.keys(r)[0]]=void 0),{loaderData:o,errors:u,statusCode:a||200,loaderHeaders:c}}function dO(e,t,n,r,i,a,o,u){for(var s=hO(t,n,r,i,u),c=s.loaderData,l=s.errors,f=0;f<a.length;f++){var h=a[f],d=h.key,p=h.match;uD(void 0!==o&&void 0!==o[f],"Did not find corresponding fetcher result");var y=o[f];if(xO(y)){var m=vO(e.matches,null==p?void 0:p.route.id);l&&l[m.route.id]||(l=iD({},l,v({},m.route.id,y.error))),e.fetchers.delete(d)}else if(_O(y))uD(!1,"Unhandled fetcher revalidation redirect");else if(wO(y))uD(!1,"Unhandled fetcher deferred data");else{var g={state:"idle",data:y.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};e.fetchers.set(d,g)}}return{loaderData:c,errors:l}}function pO(e,t,n,r){var i,a=iD({},t),o=k(n);try{for(o.s();!(i=o.n()).done;){var u=i.value,s=u.route.id;if(t.hasOwnProperty(s)?void 0!==t[s]&&(a[s]=t[s]):void 0!==e[s]&&u.route.loader&&(a[s]=e[s]),r&&r.hasOwnProperty(s))break}}catch(c){o.e(c)}finally{o.f()}return a}function vO(e,t){var n=t?e.slice(0,e.findIndex((function(e){return e.route.id===t}))+1):oe(e);return n.reverse().find((function(e){return!0===e.route.hasErrorBoundary}))||e[0]}function yO(e){var t=e.find((function(e){return e.index||!e.path||"/"===e.path}))||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function mO(e,t){var n=void 0===t?{}:t,r=n.pathname,i=n.routeId,a=n.method,o=n.type,u="Unknown Server Error",s="Unknown @remix-run/router error";return 400===e?(u="Bad Request",a&&r&&i?s="You made a "+a+' request to "'+r+'" but did not provide a `loader` for route "'+i+'", so there is no way to handle the request.':"defer-action"===o&&(s="defer() is not supported in actions")):403===e?(u="Forbidden",s='Route "'+i+'" does not match URL "'+r+'"'):404===e?(u="Not Found",s='No route matches URL "'+r+'"'):405===e&&(u="Method Not Allowed",a&&r&&i?s="You made a "+a.toUpperCase()+' request to "'+r+'" but did not provide an `action` for route "'+i+'", so there is no way to handle the request.':a&&(s='Invalid request method "'+a.toUpperCase()+'"')),new UD(e||500,u,new Error(s),!0)}function gO(e){for(var t=e.length-1;t>=0;t--){var n=e[t];if(_O(n))return n}}function kO(e){return fD(iD({},"string"===typeof e?hD(e):e,{hash:""}))}function bO(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash!==t.hash}function wO(e){return e.type===aD.deferred}function xO(e){return e.type===aD.error}function _O(e){return(e&&e.type)===aD.redirect}function SO(e){var t=e;return t&&"object"===typeof t&&"object"===typeof t.data&&"function"===typeof t.subscribe&&"function"===typeof t.cancel&&"function"===typeof t.resolveData}function IO(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"object"===typeof e.headers&&"undefined"!==typeof e.body}function EO(e){return KD.has(e.toLowerCase())}function TO(e){return zD.has(e.toLowerCase())}function CO(e,t,n,r,i,a){return AO.apply(this,arguments)}function AO(){return AO=d(f().mark((function e(t,n,r,i,a,o){var u,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u=f().mark((function e(u){var s,c,l,h;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=r[u],c=n[u]){e.next=4;break}return e.abrupt("return","continue");case 4:if(l=t.find((function(e){return e.route.id===c.route.id})),h=null!=l&&!iO(l,c)&&void 0!==(o&&o[c.route.id]),!wO(s)||!a&&!h){e.next=9;break}return e.next=9,NO(s,i,a).then((function(e){e&&(r[u]=e||r[u])}));case 9:case"end":return e.stop()}}),e)})),s=0;case 2:if(!(s<r.length)){e.next=10;break}return e.delegateYield(u(s),"t0",4);case 4:if("continue"!==e.t0){e.next=7;break}return e.abrupt("continue",7);case 7:s++,e.next=2;break;case 10:case"end":return e.stop()}}),e)}))),AO.apply(this,arguments)}function NO(e,t,n){return DO.apply(this,arguments)}function DO(){return DO=d(f().mark((function e(t,n,r){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r=!1),e.next=3,t.deferredData.resolveData(n);case 3:if(!e.sent){e.next=6;break}return e.abrupt("return");case 6:if(!r){e.next=14;break}return e.prev=7,e.abrupt("return",{type:aD.data,data:t.deferredData.unwrappedData});case 11:return e.prev=11,e.t0=e.catch(7),e.abrupt("return",{type:aD.error,error:e.t0});case 14:return e.abrupt("return",{type:aD.data,data:t.deferredData.data});case 15:case"end":return e.stop()}}),e,null,[[7,11]])}))),DO.apply(this,arguments)}function OO(e){return new URLSearchParams(e).getAll("index").some((function(e){return""===e}))}function RO(e,t){var n=e.route,r=e.pathname,i=e.params;return{id:n.id,pathname:r,params:i,data:t[n.id],handle:n.handle}}function PO(e,t){var n="string"===typeof t?hD(t).search:t.search;if(e[e.length-1].route.index&&OO(n||""))return e[e.length-1];var r=OD(e);return r[r.length-1]}var LO="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},MO=t.useState,FO=t.useEffect,jO=t.useLayoutEffect,UO=t.useDebugValue;function VO(e){var t=e.getSnapshot,n=e.value;try{var r=t();return!LO(n,r)}catch(i){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement;var qO=r.useSyncExternalStore,zO=t.createContext(null);var BO=t.createContext(null);var KO=t.createContext(null);var GO=t.createContext(null);var WO=t.createContext(null);var QO=t.createContext({outlet:null,matches:[]});var HO=t.createContext(null);function $O(){return $O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$O.apply(this,arguments)}function XO(){return null!=t.useContext(WO)}function YO(){return XO()||uD(!1),t.useContext(WO).location}function JO(){XO()||uD(!1);var e=t.useContext(GO),n=e.basename,r=e.navigator,i=t.useContext(QO).matches,a=YO().pathname,o=JSON.stringify(OD(i).map((function(e){return e.pathnameBase}))),u=t.useRef(!1);t.useEffect((function(){u.current=!0}));var s=t.useCallback((function(e,t){if(void 0===t&&(t={}),u.current)if("number"!==typeof e){var i=RD(e,JSON.parse(o),a,"path"===t.relative);"/"!==n&&(i.pathname="/"===i.pathname?n:PD([n,i.pathname])),(t.replace?r.replace:r.push)(i,t.state,t)}else r.go(e)}),[n,r,o,a]);return s}function ZO(){var e=function(){var e,n=t.useContext(HO),r=aR(tR.UseRouteError),i=oR(tR.UseRouteError);if(n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=VD(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:a},r):null,null)}var eR,tR,nR=function(e){x(r,e);var n=I(r);function r(e){var t;return y(this,r),(t=n.call(this,e)).state={location:e.location,error:e.error},t}return g(r,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?t.createElement(QO.Provider,{value:this.props.routeContext},t.createElement(HO.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}}]),r}(t.Component);function rR(e){var n=e.routeContext,r=e.match,i=e.children,a=t.useContext(zO);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(QO.Provider,{value:n},i)}function iR(e,n,r){if(void 0===n&&(n=[]),null==e){if(null==r||!r.errors)return null;e=r.matches}var i=e,a=null==r?void 0:r.errors;if(null!=a){var o=i.findIndex((function(e){return e.route.id&&(null==a?void 0:a[e.route.id])}));o>=0||uD(!1),i=i.slice(0,Math.min(i.length,o+1))}return i.reduceRight((function(e,o,u){var s=o.route.id?null==a?void 0:a[o.route.id]:null,c=null;r&&(c=o.route.ErrorBoundary?t.createElement(o.route.ErrorBoundary,null):o.route.errorElement?o.route.errorElement:t.createElement(ZO,null));var l=n.concat(i.slice(0,u+1)),f=function(){var n=e;return s?n=c:o.route.Component?n=t.createElement(o.route.Component,null):o.route.element&&(n=o.route.element),t.createElement(rR,{match:o,routeContext:{outlet:e,matches:l},children:n})};return r&&(o.route.ErrorBoundary||o.route.errorElement||0===u)?t.createElement(nR,{location:r.location,component:c,error:s,children:f(),routeContext:{outlet:null,matches:l}}):f()}),null)}function aR(e){var n=t.useContext(BO);return n||uD(!1),n}function oR(e){var n=function(e){var n=t.useContext(QO);return n||uD(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||uD(!1),r.route.id}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"}(eR||(eR={})),function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(tR||(tR={}));var uR;function sR(e){var n=e.fallbackElement,r=e.router,i=t.useCallback((function(){return r.state}),[r]),a=qO(r.subscribe,i,i),o=t.useMemo((function(){return{createHref:r.createHref,encodeLocation:r.encodeLocation,go:function(e){return r.navigate(e)},push:function(e,t,n){return r.navigate(e,{state:t,preventScrollReset:null==n?void 0:n.preventScrollReset})},replace:function(e,t,n){return r.navigate(e,{replace:!0,state:t,preventScrollReset:null==n?void 0:n.preventScrollReset})}}}),[r]),u=r.basename||"/",s=t.useMemo((function(){return{router:r,navigator:o,static:!1,basename:u}}),[r,o,u]);return t.createElement(t.Fragment,null,t.createElement(zO.Provider,{value:s},t.createElement(BO.Provider,{value:a},t.createElement(lR,{basename:r.basename,location:r.state.location,navigationType:r.state.historyAction,navigator:o},r.state.initialized?t.createElement(fR,null):n))),null)}function cR(e){uD(!1)}function lR(e){var n=e.basename,r=void 0===n?"/":n,i=e.children,a=void 0===i?null:i,o=e.location,u=e.navigationType,s=void 0===u?JN.Pop:u,c=e.navigator,l=e.static,f=void 0!==l&&l;XO()&&uD(!1);var h=r.replace(/^\/*/,"/"),d=t.useMemo((function(){return{basename:h,navigator:c,static:f}}),[h,c,f]);"string"===typeof o&&(o=hD(o));var p=o,v=p.pathname,y=void 0===v?"/":v,m=p.search,g=void 0===m?"":m,k=p.hash,b=void 0===k?"":k,w=p.state,x=void 0===w?null:w,_=p.key,S=void 0===_?"default":_,I=t.useMemo((function(){var e=ND(y,h);return null==e?null:{location:{pathname:e,search:g,hash:b,state:x,key:S},navigationType:s}}),[h,y,g,b,x,S,s]);return null==I?null:t.createElement(GO.Provider,{value:d},t.createElement(WO.Provider,{children:a,value:I}))}function fR(e){var n=e.children,r=e.location,i=t.useContext(zO);return function(e,n){XO()||uD(!1);var r,i=t.useContext(GO).navigator,a=t.useContext(BO),o=t.useContext(QO).matches,u=o[o.length-1],s=u?u.params:{},c=(u&&u.pathname,u?u.pathnameBase:"/"),l=(u&&u.route,YO());if(n){var f,h="string"===typeof n?hD(n):n;"/"===c||(null==(f=h.pathname)?void 0:f.startsWith(c))||uD(!1),r=h}else r=l;var d=r.pathname||"/",p=yD(e,{pathname:"/"===c?d:d.slice(c.length)||"/"}),v=iR(p&&p.map((function(e){return Object.assign({},e,{params:Object.assign({},s,e.params),pathname:PD([c,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:PD([c,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),o,a||void 0);return n&&v?t.createElement(WO.Provider,{value:{location:$O({pathname:"/",search:"",hash:"",state:null,key:"default"},r),navigationType:JN.Pop}},v):v}(i&&!n?i.router.routes:dR(n),r)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(uR||(uR={}));var hR=new Promise((function(){}));t.Component;function dR(e,n){void 0===n&&(n=[]);var r=[];return t.Children.forEach(e,(function(e,i){if(t.isValidElement(e)){var a=[].concat(oe(n),[i]);if(e.type!==t.Fragment){e.type!==cR&&uD(!1),e.props.index&&e.props.children&&uD(!1);var o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=dR(e.props.children,a)),r.push(o)}else r.push.apply(r,dR(e.props.children,a))}})),r}function pR(e){return Boolean(e.ErrorBoundary)||Boolean(e.errorElement)}var vR=function(e){var t=e.errorMessage;return(0,hE.jsx)("div",{className:"errorMessage",children:(0,hE.jsx)("h1",{children:t})})};function yR(e,n,r){var i=this,a=(0,t.useRef)(null),o=(0,t.useRef)(0),u=(0,t.useRef)(null),s=(0,t.useRef)([]),c=(0,t.useRef)(),l=(0,t.useRef)(),f=(0,t.useRef)(e),h=(0,t.useRef)(!0);(0,t.useEffect)((function(){f.current=e}),[e]);var d=!n&&0!==n&&"undefined"!=typeof window;if("function"!=typeof e)throw new TypeError("Expected a function");n=+n||0;var p=!!(r=r||{}).leading,v=!("trailing"in r)||!!r.trailing,y="maxWait"in r,m=y?Math.max(+r.maxWait||0,n):null;(0,t.useEffect)((function(){return h.current=!0,function(){h.current=!1}}),[]);var g=(0,t.useMemo)((function(){var e=function(e){var t=s.current,n=c.current;return s.current=c.current=null,o.current=e,l.current=f.current.apply(n,t)},t=function(e,t){d&&cancelAnimationFrame(u.current),u.current=d?requestAnimationFrame(e):setTimeout(e,t)},r=function(e){if(!h.current)return!1;var t=e-a.current;return!a.current||t>=n||t<0||y&&e-o.current>=m},g=function(t){return u.current=null,v&&s.current?e(t):(s.current=c.current=null,l.current)},k=function e(){var i=Date.now();if(r(i))return g(i);if(h.current){var u=n-(i-a.current),s=y?Math.min(u,m-(i-o.current)):u;t(e,s)}},b=function(){var f=Date.now(),d=r(f);if(s.current=[].slice.call(arguments),c.current=i,a.current=f,d){if(!u.current&&h.current)return o.current=a.current,t(k,n),p?e(a.current):l.current;if(y)return t(k,n),e(a.current)}return u.current||t(k,n),l.current};return b.cancel=function(){u.current&&(d?cancelAnimationFrame(u.current):clearTimeout(u.current)),o.current=0,s.current=a.current=c.current=u.current=null},b.isPending=function(){return!!u.current},b.flush=function(){return u.current?g(Date.now()):l.current},b}),[p,y,n,m,v,d]);return g}function mR(e,t){return e===t}function gR(e){return"function"==typeof e?function(){return e}:e}var kR=function(e){var n=(0,t.useRef)();return(0,t.useEffect)((function(){console.log("usePrevious effect"),n.current=e}),[e]),n.current},bR=n(137),wR=n.n(bR),xR=function(e,t){var n={id:"",title:"",score:{min:0,max:0,actual:0}},r="";if(e.length>t.length){console.log("a goal was added");var i=e.filter((function(e){return!t.some((function(t){return t.id===e.id}))}));n=i[0],r="new goal"}else if(e.length<t.length){console.log("a goal was deleted");var a=t.filter((function(t){return!e.some((function(e){return e.id===t.id}))}));n=a[0],r="deleted"}else for(var o=function(){var i=e[u],a=t.find((function(e){return e.id===i.id}));if(a&&(console.log({msg:"goal already exists",goal:i}),!wR()(i,a)))return console.log({"compare-result":"NOT equal",existingGoal:a,goal:i}),n=i,r="update","break"},u=0;u<e.length;u++){if("break"===o())break}return{goalToReturn:n,typeOfDifference:r}},_R=function(){var e=d(f().mark((function e(t,n,r){var i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=X_(sE,"/users/".concat(t,"/user-goals/"),n.id),e.prev=1,"deleted"!==r){e.next=7;break}return e.next=5,II(i);case 5:e.next=9;break;case 7:return e.next=9,_I(i,n,{merge:!0});case 9:return e.abrupt("return","ok");case 12:return e.prev=12,e.t0=e.catch(1),e.abrupt("return",{error:e.t0});case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,n,r){return e.apply(this,arguments)}}(),SR=_R,IR=function(e,n){var r=kR(e);(0,t.useEffect)((function(){if(console.log("useSyncFirestoreDb effect"),JSON.stringify(r)!==JSON.stringify(e)&&"undefined"!==typeof r&&e&&e.length){var t=xR(e,r);console.log("updating user goal"),SR(n,t.goalToReturn,t.typeOfDifference)}return function(){console.log("cleanup")}}),[e,r,n])};var ER=function(){return(0,hE.jsx)("div",{className:"loader",children:"Loading..."})};var TR=function(){console.log("Goals component rendered");var e,n=rD((function(e){return e.userReducer.user})),r=rD((function(e){return e.goalReducer.goals})),i=ME(),a=JO(),o=tD(n),u=o.data,s=o.isSuccess,c=o.isLoading,l=o.isError,f=function(e,n,r){var i,a,o=r&&r.equalityFn||mR,u=(i=(0,t.useState)(gR(e)),a=i[1],[i[0],(0,t.useCallback)((function(e){return a(gR(e))}),[])]),s=u[0],c=u[1],l=yR((0,t.useCallback)((function(e){return c(e)}),[c]),n,r),f=(0,t.useRef)(e);return o(f.current,e)||(l(e),f.current=e),[s,l]}(r,200,{trailing:!0});return IR(f[0],n.userDocId),(0,t.useEffect)((function(){return console.log("Goals -> useEffect to sync backend to local state"),i(iA(u)),function(){console.log("cleaning up Goals -> useEffect to sync backend to local state")}}),[i,u]),s&&u&&u.length&&r&&r.length?e=r.map((function(e){return(0,hE.jsx)(pA,{goal:e,currentUser:n},e.id)})):c?e=(0,hE.jsx)(ER,{}):l&&(e=(0,hE.jsx)(vR,{errorMessage:"It seems there is an issue. Please try to reload the page"})),(0,hE.jsxs)("div",{className:"goals",children:[(0,hE.jsx)("button",{className:"cta cta__signOut",onClick:function(){(function(e){return ie(e).signOut()})(cE).then((function(){a("/")})).catch((function(e){console.error(e.message)}))},title:"sing out",children:(0,hE.jsx)("span",{className:"cta__signOutIcon"})}),(0,hE.jsx)("h1",{className:"goals__h1",children:"Goals"}),(0,hE.jsx)(vA,{}),e]})};var CR=function(){var e,n=c((0,t.useState)(void 0),2),r=n[0],i=n[1],a=ME();return(0,t.useEffect)((function(){return function(e,t,n,r){ie(e).onAuthStateChanged(t,n,r)}(Ku(),(function(e){console.log("onAuthStateChanged"),e?(i(!0),a(WC({email:null!==e.email?e.email:"",uid:e.uid,userDocId:"".concat(e.email,"-").concat(e.uid)}))):i(!1)})),function(){console.log("onAuthStateChanged return fn")}}),[a]),"undefined"!==typeof r&&(e=r?(0,hE.jsx)(TR,{}):(0,hE.jsxs)("div",{className:"home__welcomeMessage",children:[(0,hE.jsx)("h1",{children:"WELCOME TO DAILY GOAL TRACKER"}),(0,hE.jsx)(vE,{})]})),(0,hE.jsx)("div",{className:"home",children:e})};function AR(){return AR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},AR.apply(this,arguments)}function NR(){var e,t=null==(e=window)?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=AR({},t,{errors:DR(t.errors)})),t}function DR(e){if(!e)return null;for(var t={},n=0,r=Object.entries(e);n<r.length;n++){var i=c(r[n],2),a=i[0],o=i[1];if(o&&"RouteErrorResponse"===o.__type)t[a]=new UD(o.status,o.statusText,o.data,!0===o.internal);else if(o&&"Error"===o.__type){var u=new Error(o.message);u.stack="",t[a]=u}else t[a]=o}return t}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var OR,RR;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(OR||(OR={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(RR||(RR={}));var PR=function(){var e=function(e,t){return eO({basename:null==t?void 0:t.basename,future:null==t?void 0:t.future,history:(n={window:null==t?void 0:t.window},void 0===n&&(n={}),dD((function(e,t){var n=hD(e.location.hash.substr(1)),r=n.pathname,i=void 0===r?"/":r,a=n.search,o=void 0===a?"":a,u=n.hash;return lD("",{pathname:i,search:o,hash:void 0===u?"":u},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){var n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){var i=e.location.href,a=i.indexOf("#");r=-1===a?i:i.slice(0,a)}return r+"#"+("string"===typeof t?t:fD(t))}),(function(e,t){sD("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),n)),hydrationData:(null==t?void 0:t.hydrationData)||NR(),routes:e,detectErrorBoundary:pR}).initialize();var n}([{path:"/",element:(0,hE.jsx)(CR,{})},{path:"myAccount",element:(0,hE.jsx)(vE,{})},{path:"goals",element:(0,hE.jsx)(TR,{})}]);return(0,hE.jsx)(sR,{router:e})},LR=function(e){e&&e instanceof Function&&n.e(988).then(n.bind(n,988)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};i.createRoot(document.getElementById("root")).render((0,hE.jsx)(DE,{store:nD,children:(0,hE.jsx)(PR,{})})),LR(console.log)}()}();
//# sourceMappingURL=main.0fd5659f.js.map